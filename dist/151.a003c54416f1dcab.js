"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[151],{8193:(L,C,h)=>{h.d(C,{Z:()=>x});var a=h(9468),t=h(6814),n=h(7818),y=h(8351),b=h(5399),S=h(6223);function D(i,c){if(1&i){const o=a.EpF();a.TgZ(0,"span",18),a.NdJ("mouseenter",function(){const _=a.CHM(o).$implicit,m=a.oxw();return a.KtG(m.hoveredDate=_)})("mouseleave",function(){a.CHM(o);const d=a.oxw();return a.KtG(d.hoveredDate=null)}),a._uU(1),a.qZA()}if(2&i){const o=c.$implicit,p=c.focused,d=a.oxw();a.ekj("focused",p)("range",d.isRange(o))("faded",d.isHovered(o)||d.isInside(o)),a.xp6(1),a.hij(" ",o.day," ")}}let x=(()=>{class i{constructor(o){this.activeModal=o,this.calendar=(0,a.f3M)(b.vL),this.hoveredDate=null,this.fromDate=this.calendar.getToday(),this.toDate=this.calendar.getNext(this.fromDate,"d",-1),this.currentDate=new Date,this.startTime={hour:this.currentDate.getHours(),minute:this.currentDate.getMinutes()},this.endTime={hour:this.currentDate.getHours(),minute:this.currentDate.getMinutes()}}ngOnInit(){const o=this.inputData.startDate,p=this.inputData.endDate;this.fromDate={year:o.getFullYear(),month:o.getMonth()+1,day:o.getDate()},this.toDate={year:p.getFullYear(),month:p.getMonth()+1,day:p.getDate()};const d=o.getHours(),_=o.getMinutes(),m=p.getHours(),U=p.getMinutes();this.startTime={hour:d,minute:_},this.endTime={hour:m,minute:U}}onDateSelection(o){this.fromDate||this.toDate?this.fromDate&&!this.toDate&&o.after(this.fromDate)?this.toDate=o:(this.toDate=null,this.fromDate=o):this.fromDate=o}isHovered(o){return this.fromDate&&!this.toDate&&this.hoveredDate&&o.after(this.fromDate)&&o.before(this.hoveredDate)}isInside(o){return this.toDate&&o.after(this.fromDate)&&o.before(this.toDate)}isRange(o){return o.equals(this.fromDate)||this.toDate&&o.equals(this.toDate)||this.isInside(o)||this.isHovered(o)}selectDataAndClose(){this.activeModal.close({isUpdated:!0,dateData:{startDate:this.fromDate,endDate:this.toDate,startTime:this.startTime,endTime:this.endTime}})}closeModal(){this.activeModal.dismiss({isUpdated:!1})}static#t=this.\u0275fac=function(p){return new(p||i)(a.Y36(b.Kz))};static#e=this.\u0275cmp=a.Xpm({type:i,selectors:[["app-datatime-range-modal"]],inputs:{inputData:"inputData"},standalone:!0,features:[a.jDz],decls:26,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],["outsideDays","hidden",1,"range-datetimepicker",3,"displayMonths","dayTemplate","dateSelect"],["dp",""],["t",""],[1,"col-md-6","col-sm-6"],[3,"ngModel","ngModelChange"],[1,"row","justify-content-end"],[1,"col-xl-3","col-md-3","col-sm-6"],["type","button","ngbAutofocus","",1,"btn","btn-block","btn-primary","mb-4",3,"click"],[1,"fas","fa-check"],[1,"col-xl-4","col-md-3","col-sm-6"],["type","button",1,"btn","btn-block","btn-primary","mb-4",3,"click"],[1,"fas","fa-times"],[1,"custom-day",3,"mouseenter","mouseleave"]],template:function(p,d){if(1&p&&(a.TgZ(0,"div",0)(1,"h6",1),a._uU(2,"Select Date"),a.qZA(),a.TgZ(3,"button",2),a.NdJ("click",function(){return d.closeModal()}),a.TgZ(4,"span",3),a._uU(5,"\xd7"),a.qZA()()(),a.TgZ(6,"div",4)(7,"div",5)(8,"ngb-datepicker",6,7),a.NdJ("dateSelect",function(m){return d.onDateSelection(m)}),a.qZA(),a.YNc(10,D,2,7,"ng-template",null,8,a.W1O),a.qZA(),a.TgZ(12,"div",5)(13,"div",9)(14,"ngb-timepicker",10),a.NdJ("ngModelChange",function(m){return d.startTime=m}),a.qZA()(),a.TgZ(15,"div",9)(16,"ngb-timepicker",10),a.NdJ("ngModelChange",function(m){return d.endTime=m}),a.qZA()()(),a.TgZ(17,"div",11)(18,"div",12)(19,"button",13),a.NdJ("click",function(){return d.selectDataAndClose()}),a._UZ(20,"i",14),a._uU(21," Apply "),a.qZA()(),a.TgZ(22,"div",15)(23,"button",16),a.NdJ("click",function(){return d.closeModal()}),a._UZ(24,"i",17),a._uU(25," Cancel "),a.qZA()()()()),2&p){const _=a.MAs(11);a.xp6(8),a.Q6J("displayMonths",2)("dayTemplate",_),a.xp6(6),a.Q6J("ngModel",d.startTime),a.xp6(2),a.Q6J("ngModel",d.endTime)}},dependencies:[t.ez,n.m,S.JJ,S.On,b.VL,b.Pm,y.Qf],styles:[".modal-title{font-style:normal;font-weight:400}  .modal-header{padding:10px;justify-content:space-between}  .close{border-radius:50%;padding:0 8px;border-color:#666}  .modal-row-border{border-color:#ced4da;border-style:solid;border-width:.8px;border-radius:5px;padding:10px;margin:20px 10px}  .ml-10{margin-left:10px}  .mb-5{margin-bottom:5px}  .custom-day{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}  .custom-day.focused{background-color:#e6e6e6}  .custom-day.range,   .custom-day:hover{background-color:#0275d8;color:#fff}  .custom-day.faded{background-color:#0275d880}  .range-datetimepicker{overflow-x:scroll}@media only screen and (max-width: 768px){  .col-sm-6{width:50%}}"]})}return i})()},2151:(L,C,h)=>{h.r(C),h.d(C,{NgbdSortableHeaderDirective:()=>N,default:()=>F});var a=h(6814),t=h(9468),n=h(7818),y=h(8193),b=h(8351),S=h(7844),D=h(1486),x=h(9074),i=h(7911),c=h(5399),o=h(8642),p=h(6686),d=h(589),_=h(4277),m=h(8672),U=h(7635),A=h(6223),O=h(220);function j(f,Z){1&f&&(t.TgZ(0,"th"),t._uU(1,"Delete Log"),t.qZA())}function w(f,Z){if(1&f){const e=t.EpF();t.TgZ(0,"td",37)(1,"i",40),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.deleteMaintenance(null==s?null:s.mid))}),t.qZA()()}}function I(f,Z){if(1&f){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"date"),t.qZA(),t.TgZ(23,"td",37)(24,"i",38),t.NdJ("click",function(){const l=t.CHM(e).index,u=t.oxw(2);return t.KtG(u.openMaintenanceModal(l))}),t.qZA()(),t.YNc(25,w,2,0,"td",39),t.qZA()}if(2&f){const e=Z.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(null==e?null:e.projectid),t.xp6(2),t.Oqu(null==e?null:e.ProjectName),t.xp6(2),t.Oqu(null==e?null:e.TestBenchNo),t.xp6(2),t.Oqu(null==e?null:e.ProjectType),t.xp6(2),t.Oqu(null==e?null:e.testno),t.xp6(2),t.Oqu(null==e?null:e.reason),t.xp6(2),t.Oqu(null==e?null:e.description),t.xp6(2),t.Oqu(null==e?null:e.fullname),t.xp6(2),t.Oqu(t.Dn7(19,11,null==e?null:e.issuecreateddate,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(t.Dn7(22,15,null==e?null:e.updateddate,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(4),t.Q6J("ngIf",r.isSuperAdmin)}}function B(f,Z){if(1&f){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4),t._UZ(3,"i",5),t.TgZ(4,"input",6),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.tbSearchFilter=s)})("keyup",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleSearchChange())}),t.qZA()(),t.TgZ(5,"div",7)(6,"span",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.openDateTimeModal())}),t._UZ(7,"i",9),t._uU(8),t.qZA()()(),t.TgZ(9,"div",10)(10,"div",11)(11,"div",12)(12,"app-card",13)(13,"fusioncharts",14),t.NdJ("dataplotClick",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.handleDataPlotClick(s))}),t.qZA()()(),t.TgZ(14,"div",12)(15,"app-card",15)(16,"fusioncharts",14),t.NdJ("dataplotClick",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.handleDataPlotClick(s))}),t.qZA()()(),t.TgZ(17,"div",12)(18,"app-card",16)(19,"fusioncharts",14),t.NdJ("dataplotClick",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.handleDataPlotClick(s))}),t.qZA()()()(),t.TgZ(20,"div")(21,"app-card",17)(22,"div",18)(23,"button",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.exportToCSV())}),t._UZ(24,"i",20),t._uU(25," Export "),t.qZA()(),t.TgZ(26,"div",21)(27,"table",22)(28,"thead")(29,"tr")(30,"th",23),t.NdJ("sort",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.onSort(s))}),t._uU(31,"Project ID"),t.qZA(),t.TgZ(32,"th",24),t.NdJ("sort",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.onSort(s))}),t._uU(33,"Project Name"),t.qZA(),t.TgZ(34,"th",25),t.NdJ("sort",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.onSort(s))}),t._uU(35,"Test Bench"),t.qZA(),t.TgZ(36,"th",26),t.NdJ("sort",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.onSort(s))}),t._uU(37,"Project Type"),t.qZA(),t.TgZ(38,"th",27),t.NdJ("sort",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.onSort(s))}),t._uU(39,"Test Run No."),t.qZA(),t.TgZ(40,"th",28),t.NdJ("sort",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.onSort(s))}),t._uU(41,"Reason"),t.qZA(),t.TgZ(42,"th",29),t.NdJ("sort",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.onSort(s))}),t._uU(43,"Description"),t.qZA(),t.TgZ(44,"th",30),t.NdJ("sort",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.onSort(s))}),t._uU(45,"Created By"),t.qZA(),t.TgZ(46,"th",31),t.NdJ("sort",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.onSort(s))}),t._uU(47,"Issue Created Time"),t.qZA(),t.TgZ(48,"th",32),t.NdJ("sort",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.onSort(s))}),t._uU(49,"Modified Time"),t.qZA(),t.TgZ(50,"th"),t._uU(51,"Update Log"),t.qZA(),t.YNc(52,j,2,0,"th",33),t.qZA()(),t.TgZ(53,"tbody"),t.YNc(54,I,26,19,"tr",34),t.qZA()(),t.TgZ(55,"div",35)(56,"span"),t._uU(57),t.qZA(),t.TgZ(58,"ngb-pagination",36),t.NdJ("pageChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.handlePageChange(s))})("pageChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.page=s)}),t.qZA()()()()()()()}if(2&f){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.tbSearchFilter),t.xp6(4),t.hij(" ",e.formattedDateTimeRange," "),t.xp6(4),t.Q6J("options",!1),t.xp6(1),t.Q6J("type",e.type)("dataFormat",e.dataFormat)("dataSource",e.dataSourceReason),t.xp6(2),t.Q6J("options",!1),t.xp6(1),t.Q6J("type",e.type)("dataFormat",e.dataFormat)("dataSource",e.dataSourceTestbench),t.xp6(2),t.Q6J("options",!1),t.xp6(1),t.Q6J("type",e.type)("dataFormat",e.dataFormat)("dataSource",e.dataSourceRequest),t.xp6(2),t.Q6J("hidHeader",!0)("options",!1),t.xp6(31),t.Q6J("ngIf",e.isSuperAdmin),t.xp6(2),t.Q6J("ngForOf",e.selectedLogs),t.xp6(3),t.AsE("Page ",(e.page-1)*e.pageSize," - ",e.page*e.pageSize>e.logs.length?e.logs.length:e.page*e.pageSize," "),t.xp6(1),t.Q6J("pageSize",e.pageSize)("collectionSize",null==e.logs?null:e.logs.length)("page",e.page)}}const k={asc:"desc",desc:"","":"asc"};let N=(()=>{class f{constructor(){this.appSortable="",this.direction="",this.sort=new t.vpe}rotate(){this.direction=k[this.direction],this.sort.emit({column:this.appSortable,direction:this.direction})}static#t=this.\u0275fac=function(r){return new(r||f)};static#e=this.\u0275dir=t.lG2({type:f,selectors:[["th","appSortable",""]],hostVars:4,hostBindings:function(r,s){1&r&&t.NdJ("click",function(){return s.rotate()}),2&r&&t.ekj("asc","asc"===s.direction)("desc","desc"===s.direction)},inputs:{appSortable:"appSortable",direction:"direction"},outputs:{sort:"sort"},standalone:!0})}return f})(),F=(()=>{class f{constructor(e,r,s,l,u,g,M,T,v){this.headerService=e,this.toastService=r,this.modalService=s,this.router=l,this.idleTimerService=u,this.projectService=g,this.maintenanceToolService=M,this.spinner=T,this.auth=v,this.width="300",this.height="250",this.type="pie2d",this.dataFormat="json",this.page=1,this.pageSize=15,this.showSpinner=!0,this.testbenchChart=[],this.reason=[],this.createdby=[],this.isSuperAdmin=!1,this.spinner.show(),this.headerService.setHeaderName("Maintenance Log")}ngOnInit(){const e=this.auth.decodedToken();null!=e&&(this.loggedUserDetails=e,console.log(this.loggedUserDetails,"lll"),this.isSuperAdmin="SuperAdmin"==this.loggedUserDetails.user),this.formatTimeModalDate(),this.getTestData(),this.idleTimerService.setupIdle(),this.idleTimerService.resetIdleTimer()}getTestData(){const r=this.toDate,s=(0,a.p6)(this.fromDate,"YYYY-MM-dd HH:mm:ss","en_US"),l=(0,a.p6)(r,"YYYY-MM-dd HH:mm:ss","en_US");this.maintenanceToolService.selectMaintenance(s,l).subscribe(u=>{this.testbenchChart=[],this.reason=[];const g={},M={},T={};this.testBenchData=u,this.logs=u,this.tempLogs=u,this.sliceLogs(this.page),u.forEach(v=>{const E=v.reason,P=v.uname,R=v.TestBenchNo;g[R]=(g[R]||0)+1,M[E]=(M[E]||0)+1,T[P]=(T[P]||0)+1}),this.testbenchChart=Object.keys(g).map(v=>({label:`TestBench ${v}`,value:g[v]})),this.reason=Object.keys(M).map(v=>({label:v,value:M[v]})),this.createdby=Object.keys(T).map(v=>({label:v,value:T[v]})),this.typeDistribution(),this.testBenchChart(),this.modeDistribution(),this.showSpinner=!1,this.spinner.hide()})}handlePageChange(e){this.sliceLogs(e)}exportToCSV(){const e=[];this.selectedLogs.map(g=>{e.push([g.projectid,g.ProjectName,g.TestBenchNo,g.ProjectType,g.testno,g.reason,g.description,g.fullname,g.issuecreateddate,g.updateddate])}),e.unshift(["Project ID","Project Name","Test Bench","Project Type","Test Run No.","Reason","Description","Created By","Issue Created Time","Modified Time"]);const s=D.P6.aoa_to_sheet(e),l=D.P6.decode_range(s["!ref"]);for(let g=l.s.r;g<=l.e.r;++g)for(let M=l.s.c;M<=l.e.c;++M){const T=D.P6.encode_cell({r:g,c:M});s[T]&&(s[T].s||(s[T].s={}),s[T].s.alignment={horizontal:"center",vertical:"center"})}const u=D.P6.book_new();D.P6.book_append_sheet(u,s,"Sheet1"),D.NC(u,"maintenance_log.xlsx")}typeDistribution(){this.dataSourceReason={chart:{showPercentInTooltip:"0",showlegend:!0,legendWidth:"350",legendHeight:"350",legendItemFontSize:"10",legendPosition:"right",theme:"fusion",tooltipBorderRadius:"20",showlabels:"0",showvalues:"0",plottooltext:"$label, Count: $Value ",paletteColors:"#F7B7A3,#EA5F89,#9B3192,#57167E,#2B0B3F",pieRadius:80},data:this.reason}}testBenchChart(){this.dataSourceTestbench={chart:{showPercentInTooltip:"0",showlegend:!0,legendWidth:"350",legendHeight:"350",legendPosition:"right",legendItemFontSize:"10",theme:"fusion",tooltipBorderRadius:"20",showlabels:"0",showvalues:"0",bgAlpha:"0",plottooltext:"$label, Count: $Value ",paletteColors:"#2085ec,#72b4eb,#0a417a,#8464a0,#cea9bc",pieRadius:80},data:this.testbenchChart}}modeDistribution(){this.dataSourceRequest={chart:{showPercentInTooltip:"0",showlegend:!0,legendWidth:"400",legendHeight:"350",legendPosition:"right",legendItemFontSize:"10",theme:"fusion",tooltipBorderRadius:"20",showlabels:"0",showvalues:"0",plottooltext:"$label, Count: $Value ",paletteColors:"#2085ec,#72b4eb,#0a417a,#8464a0,#cea9bc",pieRadius:80},data:this.createdby}}handleSearchChange(){this.filterLogs(this.tbSearchFilter,!1)}handleDataPlotClick(e){this.filterLogs(e.dataObj.categoryLabel)}openMaintenanceModal(e){const r=this.selectedLogs[e],s={mid:r.mid,projectId:r.projectid,testId:r.testno,reason:r.reason,description:r.description,issuecreateddate:r.issuecreateddate,mode:"update"},l=this.modalService.open(S.l,{size:"lg"});l.componentInstance.inputData=s,l.result.then(u=>{this.getTestData()},u=>{console.log(`Modal dismissed with: ${JSON.stringify(u)}`)})}deleteMaintenance(e){confirm("Are you sure you want to delete this record?")&&this.projectService.deleteMaintenance(e).subscribe({next:()=>{this.toastService.show({template:"Log deleted successfully!!",classname:"bg-success",delay:3e3}),this.getTestData()},error:r=>{console.error(r),this.toastService.show({template:"Failed to delete log!!",classname:"bg-danger",delay:3e3})}})}filterLogs(e,r=!0){if(r)if(this.selectedDataPlot){if(this.selectedDataPlot==e)return this.logs=this.tempLogs,this.sliceLogs(this.page),void(this.selectedDataPlot=void 0)}else this.selectedDataPlot=e;const s=this.tempLogs.filter(l=>{if(Object.entries(l).some(M=>{let T=M[1]?.toString();return!!T&&(e.startsWith("TestBench")&&"TestBenchNo"==M[0]&&(T="TestBench "+T),r?T==e:T.toLowerCase().includes(e.toLowerCase()))}))return l});this.logs=s,this.sliceLogs(this.page)}openDateTimeModal(){const s={startDate:this.jsStartDate,endDate:this.jsEndDate},l=this.modalService.open(y.Z);l.componentInstance.inputData=s,l.result.then(u=>{const M=new Intl.DateTimeFormat("en-GB",{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),T=new Date(u.dateData.startDate.year,u.dateData.startDate.month-1,u.dateData.startDate.day,u.dateData.startTime.hour,u.dateData.startTime.minute,0),v=M.format(T),E=new Date(u.dateData.endDate.year,u.dateData.endDate.month-1,u.dateData.endDate.day,u.dateData.endTime.hour,u.dateData.endTime.minute,0),P=M.format(E);this.formattedDateTimeRange=v+" - "+P,this.jsStartDate=T,this.jsEndDate=E,this.fromDate=this.formatDate(this.jsStartDate),this.toDate=this.formatDate(this.jsEndDate),this.getTestData()},u=>{console.log(`Modal dismissed with: ${u}`)})}formatTimeModalDate(){const e=new Date;e.setDate(e.getDate()-30),this.fromDate=this.formatDate(e),this.toDate=this.getCurrentDateTime();const s=new Intl.DateTimeFormat("en-GB",{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),l=new Date;this.jsEndDate=l;const u=s.format(l),g=e;this.jsStartDate=g,g.setDate(g.getDate());const M=s.format(g);this.formattedDateTimeRange=M+" - "+u}sliceLogs(e){this.selectedLogs=this.logs.slice((e-1)*this.pageSize,e*this.pageSize)}getCurrentDateTime(){return this.formatDate(new Date)}formatDate(e){return`${e.getFullYear()}-${this.padZero(e.getMonth()+1)}-${this.padZero(e.getDate())}T${this.padZero(e.getHours())}:${this.padZero(e.getMinutes())}`}padZero(e){return e<10?`0${e}`:`${e}`}onSort({column:e,direction:r}){if(this.headers)for(const s of this.headers)s.appSortable!==e&&(s.direction="");""===r||""===e?(this.logs=this.tempLogs,this.sliceLogs(this.page)):(this.logs=[...this.tempLogs].sort((s,l)=>{const u=((f,Z)=>f<Z?-1:f>Z?1:0)(s[e],l[e]);return"asc"===r?u:-u}),this.sliceLogs(this.page))}static#t=this.\u0275fac=function(r){return new(r||f)(t.Y36(x.r),t.Y36(i.k),t.Y36(c.FF),t.Y36(o.F0),t.Y36(p.p),t.Y36(d.Y),t.Y36(_.W),t.Y36(m.t2),t.Y36(U.u))};static#e=this.\u0275cmp=t.Xpm({type:f,selectors:[["app-logsheet"]],viewQuery:function(r,s){if(1&r&&t.Gf(N,5),2&r){let l;t.iGM(l=t.CRH())&&(s.headers=l)}},standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[["type","ball-scale-multiple"],["class","logsheet",4,"ngIf"],[1,"logsheet"],[1,"filter","row","col-md-12"],[1,"searchbar","col-md-4"],[1,"feather","icon","icon-search"],["type","text","name","","id","","placeholder","Search",3,"ngModel","ngModelChange","keyup"],[1,"col-md-8","d-flex","justify-content-end","dateRangePicker"],[1,"custom-datetime-range-span",3,"click"],[1,"fas","fa-calendar"],[1,"project-log"],[1,"row"],[1,"col-md-4"],["cardTitle","Reason of Maintenance",3,"options"],["width","100%","height","230",3,"type","dataFormat","dataSource","dataplotClick"],["cardTitle","Test Bench wise Maintenance Count",3,"options"],["cardTitle","Maintenance By",3,"options"],[3,"hidHeader","options"],[1,"export","d-flex","justify-content-end"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-file-csv","fw-bolder"],[1,"table-responsive"],[1,"table","table-styling"],["appSortable","projectid","scope","col",3,"sort"],["appSortable","ProjectName","scope","col",3,"sort"],["appSortable","TestBenchNo","scope","col",3,"sort"],["appSortable","ProjectType","scope","col",3,"sort"],["appSortable","testno","scope","col",3,"sort"],["appSortable","reason","scope","col",3,"sort"],["appSortable","description","scope","col",3,"sort"],["appSortable","fullname","scope","col",3,"sort"],["appSortable","issuecreateddate","scope","col",3,"sort"],["appSortable","updateddate","scope","col",3,"sort"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","align-items-center","gap-3"],[1,"m-0",3,"pageSize","collectionSize","page","pageChange"],[1,"text-center"],["role","button",1,"icon","feather","icon-edit","text-success","fs-5",3,"click"],["class","text-center",4,"ngIf"],["role","button",1,"icon","feather","icon-trash-2","text-danger","fs-5",3,"click"]],template:function(r,s){1&r&&(t._UZ(0,"ngx-spinner",0),t.YNc(1,B,59,23,"div",1)),2&r&&(t.xp6(1),t.Q6J("ngIf",!s.showSpinner))},dependencies:[a.ez,a.sg,a.O5,a.uU,n.m,A.Fj,A.JJ,A.On,O.A,c.N9,m.Ro,b.Qf,b.PZ,N],styles:['.logsheet .searchbar{background-color:#ddd;padding:2px 8px;display:flex;align-items:center;border-radius:20px;max-height:26px}  .logsheet .searchbar .feather{font-size:15px}  .logsheet .searchbar input{flex:1;background-color:transparent;border:0;outline:0}  .logsheet .custom-datetime-range-span{padding:2px 8px;border:solid 1px rgb(206,212,218);border-radius:20px}  .logsheet .custom-datetime-range-span i{margin-right:15px}  .logsheet .card-body{padding:15px 10px!important}  .logsheet .card-header{padding:15px!important}  .logsheet .filter{margin:10px 0}  .logsheet table tbody tr{cursor:pointer}  .logsheet table tbody tr:hover{background-color:#d3d3d3}  .logsheet table thead th[appSortable]{cursor:pointer;-webkit-user-select:none;user-select:none}  .logsheet table thead th[appSortable]:after{font-family:"Font Awesome 5 Free";margin-left:5px}  .logsheet table thead th[appSortable].asc:after{content:"\\f062"}  .logsheet table thead th[appSortable].desc:after{content:"\\f063"}']})}return f})()},589:(L,C,h)=>{h.d(C,{Y:()=>S});var a=h(5449),t=h(6814),n=h(9468),y=h(9862),b=h(7635);let S=(()=>{class D{constructor(i,c){this.http=i,this.authService=c}getLastRunData(){return this.http.get(`${a.N.apiUrl}/getLastRunData`)}getListView(i,c){return this.http.post(`${a.N.apiUrl}/getListView`,{fromDate:i,toDate:c})}getProjectDetails(i){return this.http.post(`${a.N.apiUrl}/getProjectDetails`,{id:i})}getCurrentBenchDetails(i){return this.http.post(`${a.N.apiUrl}/getCurrentBenchDetails`,{id:i})}getTableData(i,c,o,p){return this.http.post(`${a.N.apiUrl}/getRunningStats`,{id:i,no:c,start:o,end:p})}getProjectAnalysis(i,c){return this.http.post(`${a.N.apiUrl}/getProjectAnalysis`,{id:i,no:c})}getTestBenchSequence(i,c){return this.http.post(`${a.N.apiUrl}/getTestBenchseq`,{id:i,no:c})}getTimeSeriesById(i,c,o){return this.http.post(`${a.N.apiUrl}/getTimeSeriesbyid`,{projectConfig:i,id:c,no:o})}getTimeSeriesByIdForRunPro(i,c,o,p){return this.http.post(`${a.N.apiUrl}/getTimeSeriesDatabyid`,{id:i,no:c,start:o,end:p})}getProjectRunTime(i,c){return this.http.post(`${a.N.apiUrl}/getProjectTime`,{id:i,no:c})}getUpdatePanelStatus(i,c,o,p,d,_){const m=this.authService.getFullNameFromToken();return this.http.post(`${a.N.apiUrl}/UpdatePanelStatus`,{group:i,status:c,date:o,message:p,uid:m.uid,projectid:d,no:_})}getAnalysisData(i,c,o,p){return this.http.post(`${a.N.apiUrl}/getAnalysisData`,{id:i,start:c,end:o,data:p})}createMaintenance(i,c,o,p,d){const _=this.authService.getFullNameFromToken(),m=(0,t.p6)(new Date,"YYYY-MM-dd HH:mm:ss","en_US"),U=(0,t.p6)(new Date,"YYYY-MM-dd HH:mm:ss","en_US"),A=(0,t.p6)(new Date(d),"YYYY-MM-dd HH:mm:ss","en_US");return this.http.post(`${a.N.apiUrl}/CreateMaintenance`,{data:{projectid:i,testno:c,reason:o,desc:p,createuid:_.uid,updateid:_.uid,createdate:m,updatedate:U,issuecreateddate:A}})}selectUpdateMaintenance(i,c,o,p){const d=this.authService.getFullNameFromToken(),_=(0,t.p6)(new Date(p),"YYYY-MM-dd HH:mm:ss","en_US"),m=(0,t.p6)(new Date,"YYYY-MM-dd HH:mm:ss","en_US");return this.http.post(`${a.N.apiUrl}/UpdateMaintenance`,{mid:i,data:[`reason='${c}'`,`description='${o}'`,`updatedbyid=${d.uid}`,`updateddate='${m}'`,`issuecreateddate='${_}'`]})}deleteMaintenance(i){return this.http.post(`${a.N.apiUrl}/deleteMaintenance`,{mid:i})}createNote(i,c,o,p,d){const m={uid:this.authService.getFullNameFromToken().uid,projectid:i,testno:c,remarks:o,updateddate:d,createddate:p};return this.http.post(`${a.N.apiUrl}/CreateNote`,{data:m})}createFav(i,c,o,p){const _={uid:this.authService.getFullNameFromToken().uid,projectid:i,testno:c,favremark:o,updatedate:p,status:!0};return this.http.post(`${a.N.apiUrl}/CreateFav`,{data:_})}updateUserNote(i,c){const o=(0,t.p6)(new Date,"YYYY-MM-dd HH:mm:ss","en_US");return this.http.post(`${a.N.apiUrl}/UpdateNote`,{id:i,data:[`remarks='${c}'`,`updateddate='${o}'`]})}deleteUserNote(i){return this.http.post(`${a.N.apiUrl}/deleteNote`,{id:i})}deleteFav(i){return this.http.post(`${a.N.apiUrl}/deleteFav`,{fid:i})}getAttach(i,c,o,p,d,_){return this.http.post(`${a.N.apiUrl}/getSeriesReport`,{projectId:i,headers:c,value:o,match:p,fromDate:d,toDate:_},{responseType:"blob"})}getAmbientData(i,c,o){return this.http.post(`${a.N.apiUrl}/getAmbiantData`,{data:o,start:i,end:c})}getAmbientReport(i,c,o){return this.http.post(`${a.N.apiUrl}/getAmbiantReport`,{data:o,start:i,end:c},{responseType:"blob"})}getGroupCReport(i,c){return this.http.post(`${a.N.apiUrl}/getGroupCReport`,{start:i,end:c},{responseType:"blob"})}getAlarmReport(i,c){return this.http.post(`${a.N.apiUrl}/getAlarmReport`,{start:i,end:c},{responseType:"blob"})}getTankReport(i,c,o){return this.http.post(`${a.N.apiUrl}/getTankReport`,{data:o,start:i,end:c},{responseType:"blob"})}getAlarmData(i,c){return this.http.post(`${a.N.apiUrl}/getAlarmData`,{start:i,end:c})}getGroupCData(i,c){return this.http.post(`${a.N.apiUrl}/getAllGroupC`,{start:i,end:c})}static#t=this.\u0275fac=function(c){return new(c||D)(n.LFG(y.eN),n.LFG(b.u))};static#e=this.\u0275prov=n.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})()},7844:(L,C,h)=>{h.d(C,{l:()=>x});var a=h(6814),t=h(7818),n=h(9468),y=h(5399),b=h(589),S=h(7911),D=h(6223);let x=(()=>{class i{constructor(o,p,d){this.activeModal=o,this.projectService=p,this.toastService=d,this.reason=""}ngOnInit(){console.log(this.inputData),this.inputData.reason&&(this.reason=this.inputData.reason),this.inputData.description&&(this.remark=this.inputData.description),this.currrentDate=this.formateDate(),console.log(this.currrentDate)}createMaintenance(){this.projectService.createMaintenance(this.inputData.projectId,this.inputData.testId,this.reason,this.remark,this.currrentDate).subscribe({next:o=>{console.log(o),this.toastService.show({template:"Inserted Succesfully!!",classname:"bg-success",delay:3e3})},error:()=>{this.toastService.show({template:"Something went wrong",classname:"bg-danger",delay:3e3})}})}updateMaintenance(){console.log(this.reason,this.remark),this.projectService.selectUpdateMaintenance(this.inputData.mid,this.reason,this.remark,this.currrentDate).subscribe({next:o=>{console.log(o),this.toastService.show({template:"Updated Succesfully!!",classname:"bg-success",delay:3e3})},error:()=>{this.toastService.show({template:"Something went wrong!!",classname:"bg-danger",delay:3e3})}})}selectDataAndClose(){this.reason?this.remark?("add"==this.inputData.mode?this.createMaintenance():this.updateMaintenance(),this.activeModal.close({isSearch:!1,isSuccess:!0})):this.toastService.show({template:"Please enter the description",classname:"bg-danger",delay:3e3}):this.toastService.show({template:"Please select the reason",classname:"bg-danger",delay:3e3})}closeModal(){this.activeModal.dismiss({isSearch:!1})}formateDate(){let o=new Date;this.inputData.issuecreateddate&&(o=new Date(this.inputData.issuecreateddate));const p=o.getMonth()+1,d=o.getDate(),_=o.getHours(),m=o.getMinutes();return`${o.getFullYear()}-${this.padding10(p)}-${this.padding10(d)}T${this.padding10(_)}:${this.padding10(m)}`}padding10(o){return o>=10?o:`0${o}`}static#t=this.\u0275fac=function(p){return new(p||i)(n.Y36(y.Kz),n.Y36(b.Y),n.Y36(S.k))};static#e=this.\u0275cmp=n.Xpm({type:i,selectors:[["app-project-maintenance-log-modal"]],inputs:{inputData:"inputData"},standalone:!0,features:[n.jDz],decls:48,vars:6,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"form-group"],["for",""],["type","text","disabled","",1,"form-control",3,"value"],["type","datetime-local","name","date","id","",1,"form-control",3,"ngModel","ngModelChange"],["name","reason",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected",""],["value","Calibration"],["value","Mechanical"],["value","Electrical"],["value","Others"],["name","remark",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","justify-content-end"],[1,"col-xl-2","col-md-2"],["type","button","ngbAutofocus","",1,"btn","btn-block","d-flex","align-items-center","gap-2","btn-primary","mb-4","custom-btn",3,"click"],[1,"fas","fa-check"],["type","button",1,"btn","btn-block","btn-primary","mb-4","custom-btn",3,"click"],[1,"fas","fa-times"]],template:function(p,d){1&p&&(n.TgZ(0,"div",0)(1,"h6",1),n._uU(2,"Add Maintenance log"),n.qZA(),n.TgZ(3,"button",2),n.NdJ("click",function(){return d.closeModal()}),n.TgZ(4,"span",3),n._uU(5,"\xd7"),n.qZA()()(),n.TgZ(6,"div",4)(7,"div",5)(8,"form")(9,"div",6)(10,"label",7),n._uU(11,"Project ID:"),n.qZA(),n._UZ(12,"input",8),n.qZA(),n.TgZ(13,"div",6)(14,"label",7),n._uU(15,"Test No:"),n.qZA(),n._UZ(16,"input",8),n.qZA(),n.TgZ(17,"div",6)(18,"label",7),n._uU(19,"Issue Created Date"),n.qZA(),n.TgZ(20,"input",9),n.NdJ("ngModelChange",function(m){return d.currrentDate=m}),n.qZA()(),n.TgZ(21,"div",6)(22,"label"),n._uU(23,"Select Reason"),n.qZA(),n.TgZ(24,"select",10),n.NdJ("ngModelChange",function(m){return d.reason=m}),n.TgZ(25,"option",11),n._uU(26,"Select Reason"),n.qZA(),n.TgZ(27,"option",12),n._uU(28,"Calibration"),n.qZA(),n.TgZ(29,"option",13),n._uU(30,"Mechanical"),n.qZA(),n.TgZ(31,"option",14),n._uU(32,"Electrical"),n.qZA(),n.TgZ(33,"option",15),n._uU(34,"Others"),n.qZA()()(),n.TgZ(35,"div",6)(36,"label",7),n._uU(37,"Description:"),n.qZA(),n.TgZ(38,"textarea",16),n.NdJ("ngModelChange",function(m){return d.remark=m}),n.qZA()()()(),n.TgZ(39,"div",17)(40,"div",18)(41,"button",19),n.NdJ("click",function(){return d.selectDataAndClose()}),n._UZ(42,"i",20),n._uU(43),n.qZA()(),n.TgZ(44,"div",18)(45,"button",21),n.NdJ("click",function(){return d.closeModal()}),n._UZ(46,"i",22),n._uU(47," Cancel "),n.qZA()()()()),2&p&&(n.xp6(12),n.Q6J("value",d.inputData.projectId),n.xp6(4),n.Q6J("value",d.inputData.testId),n.xp6(4),n.Q6J("ngModel",d.currrentDate),n.xp6(4),n.Q6J("ngModel",d.reason),n.xp6(14),n.Q6J("ngModel",d.remark),n.xp6(5),n.hij(" ","add"===d.inputData.mode?"Add":"Update"," "))},dependencies:[a.ez,t.m,D._Y,D.YN,D.Kr,D.Fj,D.EJ,D.JJ,D.JL,D.On,D.F],styles:[".modal-header[_ngcontent-%COMP%]{padding:10px;justify-content:space-between}"]})}return i})()}}]);