"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[852],{1852:(ra,f,h)=>{h.r(f),h.d(f,{default:()=>sa});var c=h(6814),D=h(7818),S=h(8351),M=h(3182),w=h(1687),H=h(7398),A=h(3185),a=h(9468),O=h(5399),k=h(5026);const W=function(){return{width:"100%",height:"180px"}};function V(s,d){if(1&s&&(a.TgZ(0,"div",6),a._UZ(1,"canvasjs-chart",7),a.qZA()),2&s){const t=a.oxw();a.xp6(1),a.Q6J("options",t.chartOptions)("styles",a.DdM(2,W))}}let U=(()=>{class s{constructor(t,e){this.activeModal=t,this.dashService=e,this.datasetfortank=[],this.datasetfortemp=[],this.timelabel=[],this.timeSeriesLegendState={},this.showChart=!1,this.handleLegendItemClick=i=>{i.preventDefault();const o=i.dataObj.datasetName;this.timeSeriesLegendState[o]=+!this.timeSeriesLegendState[o]}}selectDataAndClose(){this.activeModal.close({isSearch:!0,data:"successs"})}ngOnInit(){const t=new Date,e=new Date;t.setHours(t.getHours()-24),this.abstartdate=t,this.abenddate=e,this.getAmbiantData()}closeModal(){this.activeModal.dismiss({isSearch:!1})}getAmbiantData(t=!0){let e;this.showChart=!1,e=t?this.inputData.title.split(","):this.inputData.split(","),this.datasetfortank=[],this.datasetfortemp=[];const i=e[0];console.log(i[-1],"testtttt l");const o=e[1];this.labeltemp=o,this.labellevel=i,console.log(this.labellevel,this.labeltemp,"tetst label"),this.dashService.getAmbiantData(this.abstartdate,this.abenddate,e).subscribe(n=>{n.map(r=>{this.datasetfortank.push({value:r[e[0]]}),this.datasetfortemp.push({value:r[e[1]]}),this.timelabel.push({label:new Date(r.DateTime)})}),this.popupTankChart(this.datasetfortank,this.datasetfortemp,this.timelabel,i,o,this.datasetfortank.length)})}popupTankChart(t,e,i,o,n,l){const r={categories:[{category:i}],dataset:[{seriesname:o,lineThickness:"3",data:t.slice(0,l)},{seriesname:n,lineThickness:"3",data:e.slice(0,l)}]},u=[];r.dataset.forEach(T=>{const p=[];T.data.map((v,m)=>{const x={x:new Date(this.timelabel[m].label),y:v.value};p.push(x)}),u.push({type:"line",name:T.seriesname,showInLegend:!0,dataPoints:p})}),this.data=u,this.loadLegendItems(),this.formatData()}loadLegendItems(){const t=0==Object.keys(this.timeSeriesLegendState).length;this.data?.map(e=>{const{name:i}=e;t&&(this.timeSeriesLegendState[i]=1)})}formatData(){if(!this.data)return;const t=this.data.map(n=>({type:"line",showInLegend:!0,visible:this.timeSeriesLegendState[n.name],...n})).flat();this.tempData=t;const e=(n,l)=>{this.timeSeriesLegendState[n]=l},i=this.labellevel;this.chartOptions={zoomEnabled:!0,animationEnabled:!0,theme:"light2",title:{text:""},axisX:{valueFormatString:"HH:mm:ss"},axisY:{title:"Value",suffix:""},toolTip:{shared:!0,content:function(n){let l="";l+=(0,c.p6)(n.entries[0].dataPoint.x,"dd/MM/YYYY HH:mm:ss","en_US")+"<br/><br/>";for(let r=0;r<n.entries.length;r++)l+=n.entries[r].dataSeries.name==i?n.entries[r].dataSeries.name+": "+n.entries[r].dataPoint.y.toFixed(1)+" %<br/>":n.entries[r].dataSeries.name+": "+n.entries[r].dataPoint.y.toFixed(1)+" (\xb0C)<br/>";return l}},legend:{cursor:"pointer",itemclick:function(n){typeof n.dataSeries.visible>"u"||n.dataSeries.visible?(e(n.dataSeries.name,!1),n.dataSeries.visible=!1):(e(n.dataSeries.name,!0),n.dataSeries.visible=!0),n.chart.render()}},data:t},this.showChart=!0}static#a=this.\u0275fac=function(e){return new(e||s)(a.Y36(O.Kz),a.Y36(k.s))};static#t=this.\u0275cmp=a.Xpm({type:s,selectors:[["app-dash-tank-status-modal"]],inputs:{inputData:"inputData"},standalone:!0,features:[a.jDz],decls:8,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","row",4,"ngIf"],[1,"row"],["id","chartContainer",3,"options","styles"]],template:function(e,i){1&e&&(a.TgZ(0,"div",0)(1,"h6",1),a._uU(2,"Tank Chart"),a.qZA(),a.TgZ(3,"button",2),a.NdJ("click",function(){return i.closeModal()}),a.TgZ(4,"span",3),a._uU(5,"\xd7"),a.qZA()()(),a.TgZ(6,"div",4),a.YNc(7,V,2,3,"div",5),a.qZA()),2&e&&(a.xp6(7),a.Q6J("ngIf",i.showChart))},dependencies:[c.ez,c.O5,D.m,A.n,A.x],styles:[".modal-header[_ngcontent-%COMP%]{padding:10px;justify-content:space-between}"]})}return s})();var B=h(9074),y=h(8672),_=h(6223),Q=h(220);const F=function(){return{color:"green","font-size":"20px","font-weight":"bold"}};function q(s,d){1&s&&a._UZ(0,"i",47),2&s&&a.Akn(a.DdM(2,F))}function J(s,d){1&s&&a._UZ(0,"i",48),2&s&&a.Akn(a.DdM(2,F))}const j=function(){return{color:"black","font-size":"20px","font-weight":"bold"}};function $(s,d){1&s&&a._UZ(0,"i",49),2&s&&a.Akn(a.DdM(2,j))}const L=function(s){return{color:s}};function I(s,d){if(1&s&&(a.TgZ(0,"div",33)(1,"app-card",34)(2,"h6",35),a._UZ(3,"i"),a._uU(4),a.qZA(),a.TgZ(5,"h5",36)(6,"span",37),a._uU(7),a.ALo(8,"number"),a._UZ(9,"span",38),a.qZA()(),a._UZ(10,"p",39),a.TgZ(11,"div",40)(12,"span",41),a._uU(13),a.qZA(),a.TgZ(14,"span",42),a._uU(15,"|"),a.qZA(),a.TgZ(16,"span",43),a._uU(17),a.qZA(),a.YNc(18,q,1,3,"i",44),a.YNc(19,J,1,3,"i",45),a.YNc(20,$,1,3,"i",46),a.qZA()()()),2&s){const t=d.$implicit,e=d.index,i=a.oxw(2);a.xp6(1),a.MGl("cardClass","",t.background," order-card"),a.Q6J("hidHeader",!0),a.xp6(2),a.Gre("feather ",t.icon," float-start"),a.xp6(1),a.Oqu(t.title),a.xp6(3),a.hij("",a.xi3(8,16,t.value,"1.1-1")," "),a.xp6(2),a.Q6J("innerHTML",t.unit,a.oJD),a.xp6(1),a.Q6J("innerHTML",t.range,a.oJD),a.xp6(2),a.Q6J("ngStyle",a.VKq(19,L,t.value>t.warning?"orange":"green")),a.xp6(1),a.hij(" Warning: >",t.warning," "),a.xp6(3),a.Q6J("ngStyle",a.VKq(21,L,t.value>t.alarm?"red":"green")),a.xp6(1),a.hij(" Alarm: >",t.alarm," "),a.xp6(1),a.Q6J("ngIf",t.value>i.cardsAvg[e]),a.xp6(1),a.Q6J("ngIf",t.value<i.cardsAvg[e]),a.xp6(1),a.Q6J("ngIf",t.value===i.cardsAvg[e])}}function Y(s,d){if(1&s&&a._UZ(0,"fusioncharts",65),2&s){const t=a.oxw(3);a.Q6J("width",t.width)("type","angulargauge")("dataFormat",t.dataFormat)("dataSource",t.dataSourceOilTank2)}}function E(s,d){if(1&s){const t=a.EpF();a.TgZ(0,"div",7)(1,"div",50)(2,"div",51)(3,"i",52),a.NdJ("click",function(){a.CHM(t);const i=a.oxw(2);return a.KtG(i.openModal("WaterTankLevel,WaterTankTemp"))}),a.qZA(),a._UZ(4,"fusioncharts",53),a.qZA(),a.TgZ(5,"div",54),a._UZ(6,"fusioncharts",55),a.TgZ(7,"p",56),a._uU(8),a.ALo(9,"number"),a.qZA()(),a.TgZ(10,"div",57)(11,"div",58)(12,"div",59),a._uU(13),a.qZA(),a._uU(14,"\xa0 "),a.TgZ(15,"div",59),a._uU(16),a.qZA(),a._uU(17,"\xa0 "),a.TgZ(18,"div",59),a._uU(19),a.qZA()()(),a.TgZ(20,"div",60)(21,"p",61),a._uU(22,"Connected Test Bench"),a.qZA()(),a.TgZ(23,"div",62)(24,"p",56),a._uU(25,"Water Tank 01"),a.qZA()()(),a.TgZ(26,"div",50)(27,"div",51)(28,"i",52),a.NdJ("click",function(){a.CHM(t);const i=a.oxw(2);return a.KtG(i.openModal("OilTank1Level,OilTank1Temp"))}),a.qZA(),a._UZ(29,"fusioncharts",63),a.qZA(),a.TgZ(30,"div",54),a._UZ(31,"fusioncharts",55),a.TgZ(32,"p",56),a._uU(33),a.ALo(34,"number"),a.qZA()(),a.TgZ(35,"div",57)(36,"div",58)(37,"div",59),a._uU(38),a.qZA(),a._uU(39,"\xa0 "),a.TgZ(40,"div",59),a._uU(41),a.qZA(),a._uU(42,"\xa0 "),a.TgZ(43,"div",59),a._uU(44),a.qZA()()(),a.TgZ(45,"div",60)(46,"p",61),a._uU(47,"Connected Test Bench"),a.qZA()(),a.TgZ(48,"div",62)(49,"p",56),a._uU(50,"Oil Tank 01"),a.qZA()()(),a.TgZ(51,"div",50)(52,"div",51)(53,"i",52),a.NdJ("click",function(){a.CHM(t);const i=a.oxw(2);return a.KtG(i.openModal("OilTank2Level,OilTank2Temp"))}),a.qZA(),a.YNc(54,Y,1,4,"fusioncharts",64),a.qZA(),a.TgZ(55,"div",54),a._UZ(56,"fusioncharts",55),a.TgZ(57,"p",56),a._uU(58),a.ALo(59,"number"),a.qZA()(),a.TgZ(60,"div",57)(61,"div",58)(62,"div",59),a._uU(63),a.qZA(),a._uU(64,"\xa0 "),a.TgZ(65,"div",59),a._uU(66),a.qZA(),a._uU(67,"\xa0 "),a.TgZ(68,"div",59),a._uU(69),a.qZA()()(),a.TgZ(70,"div",60)(71,"p",61),a._uU(72,"Connected Test Bench"),a.qZA()(),a.TgZ(73,"div",62)(74,"p",56),a._uU(75,"Oil Tank 02"),a.qZA()()(),a.TgZ(76,"div",50)(77,"div",51)(78,"i",52),a.NdJ("click",function(){a.CHM(t);const i=a.oxw(2);return a.KtG(i.openModal("OilTank3Level,OilTank3Temp"))}),a.qZA(),a._UZ(79,"fusioncharts",53),a.qZA(),a.TgZ(80,"div",54),a._UZ(81,"fusioncharts",55),a.TgZ(82,"p",56),a._uU(83),a.ALo(84,"number"),a.qZA()(),a.TgZ(85,"div",57)(86,"div",58)(87,"div",59),a._uU(88),a.qZA(),a._uU(89,"\xa0 "),a.TgZ(90,"div",59),a._uU(91),a.qZA(),a._uU(92,"\xa0 "),a.TgZ(93,"div",59),a._uU(94),a.qZA()()(),a.TgZ(95,"div",60)(96,"p",61),a._uU(97,"Connected Test Bench"),a.qZA()(),a.TgZ(98,"div",62)(99,"p",56),a._uU(100,"Oil Tank 03"),a.qZA()()(),a.TgZ(101,"div",50)(102,"div",51)(103,"i",52),a.NdJ("click",function(){a.CHM(t);const i=a.oxw(2);return a.KtG(i.openModal("OilTank4Level,OilTank4Temp"))}),a.qZA(),a._UZ(104,"fusioncharts",53),a.qZA(),a.TgZ(105,"div",54),a._UZ(106,"fusioncharts",55),a.TgZ(107,"p",56),a._uU(108),a.ALo(109,"number"),a.qZA()(),a.TgZ(110,"div",57)(111,"div",58)(112,"div",59),a._uU(113),a.qZA(),a._uU(114,"\xa0 "),a.TgZ(115,"div",59),a._uU(116),a.qZA(),a._uU(117,"\xa0 "),a.TgZ(118,"div",59),a._uU(119),a.qZA()()(),a.TgZ(120,"div",60)(121,"p",61),a._uU(122,"Connected Test Bench"),a.qZA()(),a.TgZ(123,"div",62)(124,"p",56),a._uU(125,"Oil Tank 04"),a.qZA()()()()}if(2&s){const t=a.oxw(2);a.xp6(2),a.Q6J("title",t.formatWaterTankData()),a.xp6(2),a.Q6J("type","angulargauge")("dataFormat",t.dataFormat)("dataSource",t.dataSource),a.xp6(1),a.Q6J("title",t.formatWaterTempData()),a.xp6(1),a.Q6J("type","hlineargauge")("dataFormat",t.dataFormat)("dataSource",t.dataSourceWaterTemp),a.xp6(2),a.hij(" ",a.xi3(9,58,t.dashboardData.WaterTankTemp,"1.1-1")," \xb0 C"),a.xp6(5),a.hij(" ",t.tankStatus.WaterTank_S1," "),a.xp6(3),a.hij(" ",t.tankStatus.WaterTank_S2," "),a.xp6(3),a.hij(" ",t.tankStatus.WaterTank_S3," "),a.xp6(8),a.Q6J("title",t.formatOilTank1Data()),a.xp6(2),a.Q6J("type","angulargauge")("dataFormat",t.dataFormat)("dataSource",t.dataSourceOilTank1),a.xp6(1),a.Q6J("title",t.formatOT1TempData()),a.xp6(1),a.Q6J("type","hlineargauge")("dataFormat",t.dataFormat)("dataSource",t.dataSourceOilTank1Temp),a.xp6(2),a.hij(" ",a.xi3(34,61,t.dashboardData.OilTank1Temp,"1.1-1")," \xb0 C"),a.xp6(5),a.hij(" ",t.tankStatus.OilTank1_S1," "),a.xp6(3),a.hij(" ",t.tankStatus.OilTank1_S2," "),a.xp6(3),a.hij(" ",t.tankStatus.OilTank1_S3," "),a.xp6(8),a.Q6J("title",t.formatOilTank2Data()),a.xp6(2),a.Q6J("ngIf",t.dataSourceOilTank2),a.xp6(1),a.Q6J("title",t.formatOT2TempData()),a.xp6(1),a.Q6J("type","hlineargauge")("dataFormat",t.dataFormat)("dataSource",t.dataSourceOilTank2Temp),a.xp6(2),a.hij(" ",a.xi3(59,64,t.dashboardData.OilTank2Temp,"1.1-1")," \xb0 C"),a.xp6(5),a.hij(" ",t.tankStatus.OilTank2_S1," "),a.xp6(3),a.hij(" ",t.tankStatus.OilTank2_S2," "),a.xp6(3),a.hij(" ",t.tankStatus.OilTank2_S3," "),a.xp6(8),a.Q6J("title",t.formatOilTank3Data()),a.xp6(2),a.Q6J("type","angulargauge")("dataFormat",t.dataFormat)("dataSource",t.dataSourceOilTank3),a.xp6(1),a.Q6J("title",t.formatOT3TempData()),a.xp6(1),a.Q6J("type","hlineargauge")("dataFormat",t.dataFormat)("dataSource",t.dataSourceOilTank3Temp),a.xp6(2),a.hij(" ",a.xi3(84,67,t.dashboardData.OilTank3Temp,"1.1-1")," \xb0 C"),a.xp6(5),a.hij(" ",t.tankStatus.OilTank3_S1," "),a.xp6(3),a.hij(" ",t.tankStatus.OilTank3_S2," "),a.xp6(3),a.hij(" ",t.tankStatus.OilTank3_S3," "),a.xp6(8),a.Q6J("title",t.formatOilTank4Data()),a.xp6(2),a.Q6J("type","angulargauge")("dataFormat",t.dataFormat)("dataSource",t.dataSourceOilTank4),a.xp6(1),a.Q6J("title",t.formatOT4TempData()),a.xp6(1),a.Q6J("type","hlineargauge")("dataFormat",t.dataFormat)("dataSource",t.dataSourceOilTank4Temp),a.xp6(2),a.hij(" ",a.xi3(109,70,t.dashboardData.OilTank4Temp,"1.1-1")," \xb0 C"),a.xp6(5),a.hij(" ",t.tankStatus.OilTank4_S1," "),a.xp6(3),a.hij(" ",t.tankStatus.OilTank4_S2," "),a.xp6(3),a.hij(" ",t.tankStatus.OilTank4_S3," ")}}function N(s,d){1&s&&(a.ynx(0),a.TgZ(1,"div",66),a._uU(2," Abnormal "),a.qZA(),a.BQk())}function R(s,d){1&s&&(a.TgZ(0,"div",67),a._uU(1," Normal "),a.qZA())}function z(s,d){if(1&s&&(a.TgZ(0,"a",82),a._uU(1,"Analyze "),a._UZ(2,"i",83),a.qZA()),2&s){const t=a.oxw(2).index,e=a.oxw(3);a.Q6J("href","#/running-projects/"+(null==e.testBenchData[t]?null:e.testBenchData[t].ProjectId),a.LSH)}}function G(s,d){if(1&s&&(a.TgZ(0,"a",82),a._uU(1,"Live View "),a._UZ(2,"i",83),a.qZA()),2&s){const t=a.oxw(2).index,e=a.oxw(3);a.Q6J("href","#/running-projects/"+(null==e.testBenchData[t]?null:e.testBenchData[t].ProjectId),a.LSH)}}function K(s,d){if(1&s&&(a.TgZ(0,"div",80),a.YNc(1,z,3,1,"a",81),a.YNc(2,G,3,1,"a",81),a.qZA()),2&s){const t=a.oxw().index,e=a.oxw(3);a.xp6(1),a.Q6J("ngIf","Running"!==(null==e.testBenchData[t]?null:e.testBenchData[t].Status)),a.xp6(1),a.Q6J("ngIf","Running"===(null==e.testBenchData[t]?null:e.testBenchData[t].Status))}}function X(s,d){if(1&s&&(a.TgZ(0,"div",84)(1,"div",85)(2,"span",77),a._uU(3),a.ALo(4,"date"),a.qZA()()()),2&s){const t=a.oxw().index,e=a.oxw(3);a.xp6(3),a.hij("Updated: ",a.Dn7(4,1,null==e.testBenchData[t]?null:e.testBenchData[t].DateTime,"dd/MM/yyyy, HH:mm:ss","UTC"),"")}}const aa=function(s,d){return{testBenchActive:s,bg_false:d}};function ta(s,d){if(1&s&&(a.TgZ(0,"div",69)(1,"div",70)(2,"div",71)(3,"div",72),a._UZ(4,"i",73),a.TgZ(5,"span"),a._uU(6),a.qZA()(),a.YNc(7,K,3,2,"div",74),a.qZA(),a.TgZ(8,"div",75)(9,"div",76)(10,"span",77),a._uU(11,"Project"),a.qZA(),a.TgZ(12,"span",78),a._uU(13),a.ALo(14,"slice"),a.qZA()(),a.TgZ(15,"div",76)(16,"span",77),a._uU(17,"Type"),a.qZA(),a.TgZ(18,"span",78),a._uU(19),a.qZA()(),a.TgZ(20,"div",76)(21,"span",77),a._uU(22,"Owner"),a.qZA(),a.TgZ(23,"span",78),a._uU(24),a.ALo(25,"slice"),a.qZA()(),a.TgZ(26,"div",76)(27,"span",77),a._uU(28,"Test Run"),a.qZA(),a.TgZ(29,"span",78),a._uU(30),a.qZA()()(),a.YNc(31,X,5,5,"div",79),a.qZA()()),2&s){const t=d.$implicit,e=d.index,i=a.oxw(3);a.xp6(1),a.Q6J("ngClass",a.WLB(16,aa,"Running"===(null==i.testBenchData[e]?null:i.testBenchData[e].Status)||"Starting"===(null==i.testBenchData[e]?null:i.testBenchData[e].Status),"Running"!==(null==i.testBenchData[e]?null:i.testBenchData[e].Status)||"Stopping"===(null==i.testBenchData[e]?null:i.testBenchData[e].Status))),a.xp6(5),a.Oqu(t),a.xp6(1),a.Q6J("ngIf",null!==(null==i.testBenchData[e]?null:i.testBenchData[e].ProductId)),a.xp6(6),a.Oqu(a.Dn7(14,8,null==i.testBenchData[e]?null:i.testBenchData[e].ProjectName,0,6)),a.xp6(6),a.Oqu(null==i.testBenchData[e]?null:i.testBenchData[e].ProjectType),a.xp6(5),a.Oqu(a.Dn7(25,12,null==i.testBenchData[e]?null:i.testBenchData[e].ProjectOwner,0,6)),a.xp6(6),a.Oqu(null==i.testBenchData[e]?null:i.testBenchData[e].TestRunCount),a.xp6(1),a.Q6J("ngIf",null==i.testBenchData[e]?null:i.testBenchData[e].DateTime)}}function ea(s,d){if(1&s&&(a.TgZ(0,"div",7),a.YNc(1,ta,32,19,"div",68),a.qZA()),2&s){const t=a.oxw(2);a.xp6(1),a.Q6J("ngForOf",t.testBenchList)}}function ia(s,d){if(1&s){const t=a.EpF();a.TgZ(0,"div",2)(1,"div",3),a.YNc(2,I,21,23,"div",4),a.qZA(),a.TgZ(3,"div",5)(4,"app-card",6)(5,"div",7)(6,"div",8)(7,"div",9),a._uU(8,"Ambient Parameter Trend"),a.qZA()(),a.TgZ(9,"div",10)(10,"select",11),a.NdJ("ngModelChange",function(i){a.CHM(t);const o=a.oxw();return a.KtG(o.selectedTimeRange=i)})("change",function(){a.CHM(t);const i=a.oxw();return a.KtG(i.onTimeRangeChange())}),a.TgZ(11,"option",12),a._uU(12,"Last 1 Hour"),a.qZA(),a.TgZ(13,"option",13),a._uU(14,"Last 3 Hours"),a.qZA(),a.TgZ(15,"option",14),a._uU(16,"Last 6 Hours"),a.qZA(),a.TgZ(17,"option",15),a._uU(18,"Last 24 Hours"),a.qZA()()()(),a._UZ(19,"app-time-series",16),a.qZA()(),a.TgZ(20,"div",17)(21,"div",18)(22,"app-card",19),a.YNc(23,E,126,73,"div",20),a.qZA()(),a.TgZ(24,"div",21)(25,"div",22)(26,"app-card",23)(27,"div",7)(28,"div",24)(29,"ul",25)(30,"li",26),a._uU(31,"Lab Emergency (BBT)"),a.qZA(),a.TgZ(32,"li",26),a._uU(33,"Master Panel Emergency "),a.qZA(),a.TgZ(34,"li",26),a._uU(35,"Test Setup Interlock "),a.qZA(),a.TgZ(36,"li",26),a._uU(37," Lab Environment Sensor"),a.qZA()()(),a.TgZ(38,"div",27),a.YNc(39,N,3,0,"ng-container",28),a.YNc(40,R,2,0,"ng-template",null,29,a.W1O),a.qZA()()()()()(),a.TgZ(42,"div",30)(43,"div",31)(44,"app-card",32),a.YNc(45,ea,2,1,"div",20),a.qZA()()()()}if(2&s){const t=a.MAs(41),e=a.oxw();a.xp6(2),a.Q6J("ngForOf",e.cards),a.xp6(2),a.Q6J("options",!1),a.xp6(6),a.Q6J("ngModel",e.selectedTimeRange),a.xp6(9),a.Q6J("_size",e.size),a.xp6(3),a.Q6J("options",!1),a.xp6(1),a.Q6J("ngIf",e.showCharts),a.xp6(3),a.Q6J("options",!1),a.xp6(4),a.Q6J("ngClass",e.dashboardData.LabEmergency?"text-green":"li-text-danger"),a.xp6(2),a.Q6J("ngClass",e.dashboardData.MPEmergencyShutdownPB?"text-green":"li-text-danger"),a.xp6(2),a.Q6J("ngClass",e.dashboardData.TBTrip>0?"li-text-danger":"text-green"),a.xp6(2),a.Q6J("ngClass",e.dashboardData.LabHumidity>e.dashboardData.Humi_HHSP||e.dashboardData.LabTemp>e.dashboardData.Temp_HHSP||e.dashboardData.LabAirQualityVOC>e.dashboardData.VOC_HHSP||e.dashboardData.LabAirQualityPM2_5>e.dashboardData.PM2_5_HHSP||e.dashboardData.LabAirQualityPM10>e.dashboardData.PM10_HHSP?"li-text-danger":"text-green"),a.xp6(3),a.Q6J("ngIf",e.dashboardData.LabHumidity>e.dashboardData.Humi_HHSP||e.dashboardData.LabTemp>e.dashboardData.Temp_HHSP||e.dashboardData.LabAirQualityVOC>e.dashboardData.VOC_HHSP||e.dashboardData.LabAirQualityPM2_5>e.dashboardData.PM2_5_HHSP||e.dashboardData.LabAirQualityPM10>e.dashboardData.PM10_HHSP||!1===e.dashboardData.MPEmergencyShutdownPB||!1===e.dashboardData.LabEmergency||e.dashboardData.TBTrip>0)("ngIfElse",t),a.xp6(5),a.Q6J("options",!1),a.xp6(1),a.Q6J("ngIf",e.testBenchData&&0!==(null==e.testBenchData?null:e.testBenchData.length))}}let sa=(()=>{class s{loadCard(){this.cards=[{background:"bg-c-blue",title:"Air Quality PM2.5",icon:"icon-wind",text:"Completed Orders",unit:"\xb5g/m<sup>3</sup>",warning:this.dashboardData.PM2_5_HSP,alarm:this.dashboardData.PM2_5_HHSP,value:this.dashboardData.LabAirQualityPM2_5,range:`${this.dashboardData.PM2_5_SMin}...${this.dashboardData.PM2_5_SMax}\xb5g/m<sup>3</sup>`},{background:"bg-c-green",title:"Air Quality PM10",icon:"icon-wind",text:"This Month",warning:this.dashboardData.PM10_HSP,alarm:this.dashboardData.PM10_HHSP,value:this.dashboardData.LabAirQualityPM10,unit:"\xb5g/m<sup>3</sup>",range:`${this.dashboardData.PM10_SMin}...${this.dashboardData.PM10_SMax}\xb5g/m<sup>3</sup>`},{background:"bg-c-yellow",title:"VOC",icon:"icon-cloud-snow",text:"This Month",warning:this.dashboardData.VOC_HSP,alarm:this.dashboardData.VOC_HHSP,value:this.dashboardData.LabAirQualityVOC,unit:"%",range:`${this.dashboardData.VOC_SMin}...${this.dashboardData.VOC_SMax}%`},{background:"bg-c-red",title:"Humidity",icon:"icon-droplet",text:"This Month",warning:this.dashboardData.Humi_HSP,alarm:this.dashboardData.Humi_HHSP,value:this.dashboardData.LabHumidity,unit:"%",range:`${this.dashboardData.Humi_SMin}...${this.dashboardData.Humi_SMax}%`},{background:"bg-c-purple",title:"Temperature",icon:"icon-thermometer",text:"This Month",warning:this.dashboardData.Temp_HSP,alarm:this.dashboardData.Temp_HHSP,value:this.dashboardData.LabTemp,unit:"&deg; C",range:`${this.dashboardData.Temp_SMin}&deg; C...${this.dashboardData.Temp_SMax}&deg; C`}]}constructor(t,e,i,o,n){this.modalService=t,this.headerService=e,this.dashService=i,this.cdr=o,this.spinner=n,this.width="100%",this.height="130",this.type="angulargauge",this.dataFormat="json",this.gaugeRadius=50,this.showChart=!1,this.showCharts=!1,this.dashboardData={TBTrip:0,ProjectId:"",DateTime:"",PLCName:"",MasterPanel_Status:"",Status:"",MasterPanel:"",LifeBit:"",updatedAt:"",startTime:"",LabAirQualityPM2_5:0,LabAirQualityPM10:0,LabAirQualityVOC:0,PM2_5_SMin:0,PM2_5_SMax:0,PM2_5_HSP:0,PM2_5_HHSP:0,PM10_SMin:0,PM10_SMax:0,PM10_HSP:0,PM10_HHSP:0,VOC_SMin:0,VOC_SMax:0,VOC_HSP:0,VOC_HHSP:0,Humi_SMin:0,Humi_SMax:0,Humi_HSP:0,Humi_HHSP:0,Humi_LSP:0,Humi_LLSP:0,Temp_SMin:0,Temp_SMax:0,Temp_HSP:0,Temp_HHSP:0,Temp_LSP:0,Temp_LLSP:0,totalRunTime:"",timeStamp:"",OilTank4Level:"0",WaterTankTemp:"0",Alarm4:!1,Alarm3:!1,Alarm2:!1,Alarm1:!1,Alarm5:!1,LabHumidity:0,OilTank3Temp:"0",TBEmergency3_Spare:!1,WaterTankLevel:"0",OilTank1Temp:"0",FineDustRoomSensor:"0",OilTank2Level:"0",OilTank3Level:"0",OilTank4Temp:"0",LabEmergency:!1,LabTemp:0,OilTank1Level:"0",MPEmergencyShutdownPB:!1,LabAirQuality:0,OilTank2Temp:"0",WT_Level_SP:0,WT_Level_W:0,WT_Level_A:0,WT_Temp_SP:0,WT_Temp_W:0,WT_Temp_A:0,OT1_Level_SP:0,OT1_Level_W:0,OT1_Level_A:0,OT1_Temp_SP:0,OT1_Temp_W:0,OT1_Temp_A:0,OT2_Level_SP:0,OT2_Level_W:0,OT2_Level_A:0,OT2_Temp_SP:0,OT2_Temp_W:0,OT2_Temp_A:0,OT3_Level_SP:0,OT3_Level_W:0,OT3_Level_A:0,OT3_Temp_SP:0,OT3_Temp_W:0,OT3_Temp_A:0,OT4_Level_SP:0,OT4_Level_W:0,OT4_Level_A:0,OT4_Temp_SP:0,OT4_Temp_W:0,OT4_Temp_A:0},this.tankStatus={WaterTank_S1:0,WaterTank_S2:0,WaterTank_S3:0,OilTank1_S1:0,OilTank1_S2:0,OilTank1_S3:0,OilTank2_S1:0,OilTank2_S2:0,OilTank2_S3:0,OilTank3_S1:0,OilTank3_S2:0,OilTank3_S3:0,OilTank4_S1:0,OilTank4_S2:0,OilTank4_S3:0},this.selectedTimeRange="1",this.chartData={LabAirQualitySPM:0,LabAirQualityVOC:0,LabAirQuality:0,LabTemp:0,LabHumidity:0},this.testBenchList=["TestBench 1","TestBench 2","TestBench 3","TestBench 4","TestBench 5","TestBench 6","TestBench 7"],this.cards=[{background:"bg-c-blue",title:"Air Quality PM2.5",icon:"icon-wind",text:"Completed Orders",warning:this.dashboardData.PM2_5_HSP,alarm:this.dashboardData.PM2_5_HHSP,value:this.dashboardData.LabAirQualityPM2_5,unit:"\xb5g/m<sup>3</sup>"},{background:"bg-c-green",title:"Air Quality PM10",icon:"icon-wind",text:"This Month",warning:this.dashboardData.PM10_HSP,alarm:this.dashboardData.PM10_HHSP,value:this.dashboardData.LabAirQualityPM10,unit:"\xb5g/m3"},{background:"bg-c-yellow",title:"VOC",icon:"icon-cloud-snow",text:"This Month",warning:this.dashboardData.VOC_HSP,alarm:this.dashboardData.VOC_HHSP,value:this.dashboardData.LabAirQualityVOC,unit:"\xb5g/m<sup>3</sup>"},{background:"bg-c-red",title:"Humidity",icon:"icon-droplet",text:"This Month",warning:this.dashboardData.Humi_HSP,alarm:this.dashboardData.Humi_HHSP,value:this.dashboardData.LabHumidity,unit:"%"},{background:"bg-c-purple",title:"Temperature",icon:"icon-thermometer",text:"This Month",warning:this.dashboardData.Temp_HSP,alarm:this.dashboardData.Temp_HHSP,value:this.dashboardData.LabTemp,unit:"&deg; C"}],this.cardsAvg=[],this.TempGaugeStyle={gaugefillmix:"{dark-0},{light+0},{dark-0}",theme:"fusion",labelFontSize:"7",pointerbghoveralpha:"20",pointerhoverradius:"0",pointerborderhoverthickness:"0",showTooltip:0,showValue:"0",pointerRadius:"7"},this.GaugeStyle={lowerLimit:"0",upperLimit:"100",showValue:"1",showTooltip:0,valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numbersuffix:"%"},this.spinner.show(),this.headerService.setHeaderName("NPD LAB OVERVIEW")}ngOnDestroy(){this.intervalSubscription?.unsubscribe()}ngOnInit(){this.size={height:180,width:"100%"},this.intervalSubscription=(0,w.F)(5e3).subscribe(t=>{this.getDashData(),this.initEnvironMentCharts(),this.loadGuageCharts(),this.getTestBenchData()})}openModal(t){const e={title:t},i=this.modalService.open(U,{size:"lg"});i.componentInstance.inputData=e,i.result.then(o=>{},o=>{console.log(`Modal dismissed with: ${JSON.stringify(o)}`)})}colorChnage(t,e,i,o){return t>e&&t<i?"#FF9898":t>i&&t<o?"#FFD12E":"#219653"}onTimeRangeChange(){this.initEnvironMentCharts()}getDashData(){this.dashService.getDashData().subscribe(t=>{this.dashboardData=t.dashData.rows[0],this.cdr.detectChanges(),this.loadCard(),this.loadGuageCharts()})}loadGuageCharts(){this.initWaterTankChart(),this.initOilTank1(),this.initOilTank2(),this.initOilTank3(),this.initOilTank4(),this.waterTempProgressbar(),this.oilTank1Progressbar(),this.oilTank2Progressbar(),this.oilTank3Progressbar(),this.oilTank4Progressbar(),this.getTankStatusData()}initWaterTankChart(){const e=parseFloat(this.dashboardData?.WaterTankLevel).toFixed(2),i={chart:this.GaugeStyle,annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.dashboardData.WT_Level_A,maxValue:this.dashboardData.WT_Level_W,code:"#FF9898"},{minValue:this.dashboardData.WT_Level_W,maxValue:this.dashboardData.WT_Level_SP,code:"#FFD12E"},{minValue:this.dashboardData.WT_Level_SP,maxValue:"100",code:"#219653"}]},dials:{dial:[{value:e+"%",tooltext:"Alarm: "+this.dashboardData.WT_Level_W.toFixed(2)+"<br/> Warning: "+this.dashboardData.WT_Level_SP.toFixed(2),bgColor:this.colorChnage(e,this.dashboardData.WT_Level_A,this.dashboardData.WT_Level_W,this.dashboardData.WT_Level_SP)}]},trendpoints:{point:[{startvalue:this.dashboardData.WT_Level_SP,displayvalue:" ",thickness:"0",color:"#165AF9",usemarker:"0",markerbordercolor:"#165AF9"}]}};this.dataSource=i}initOilTank1(){const e=parseFloat(this.dashboardData.OilTank1Level).toFixed(2),i={chart:this.GaugeStyle,annotations:{groups:[{items:[{id:"2",type:"text",text:`${e} %`,align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 45"}]}]},colorRange:{color:[{minValue:this.dashboardData.OT1_Level_A,maxValue:this.dashboardData.OT1_Level_W,code:"#FF9898"},{minValue:this.dashboardData.OT1_Level_W,maxValue:this.dashboardData.OT1_Level_SP,code:"#FFD12E"},{minValue:this.dashboardData.OT1_Level_SP,maxValue:"100",code:"#219653"}]},dials:{dial:[{value:e,tooltext:" ",bgColor:this.colorChnage(e,this.dashboardData.OT1_Level_A,this.dashboardData.OT1_Level_W,this.dashboardData.OT1_Level_SP)}]},trendpoints:{point:[{startvalue:this.dashboardData.OT1_Level_SP,displayvalue:" ",thickness:"0",height:"",color:"#165AF9",usemarker:"0",markerbordercolor:"#165AF9"}]}};this.dataSourceOilTank1=i}initOilTank2(){const e=parseFloat(this.dashboardData.OilTank2Level).toFixed(2),i={chart:this.GaugeStyle,annotations:{groups:[{items:[{id:"2",type:"text",text:`${e} %`,align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 45"}]}]},colorRange:{color:[{minValue:this.dashboardData.OT2_Level_A,maxValue:this.dashboardData.OT2_Level_W,code:"#FF9898"},{minValue:this.dashboardData.OT2_Level_W,maxValue:this.dashboardData.OT2_Level_SP,code:"#FFD12E"},{minValue:this.dashboardData.OT2_Level_SP,maxValue:"100",code:"#219653"}]},dials:{dial:[{value:e,tooltext:"Alarm: "+this.dashboardData.OT2_Level_W.toFixed(2)+"<br/> Warning: "+this.dashboardData.OT2_Level_SP.toFixed(2),bgColor:this.colorChnage(e,this.dashboardData.OT2_Level_A,this.dashboardData.OT2_Level_W,this.dashboardData.OT2_Level_SP)}]},trendpoints:{point:[{startvalue:this.dashboardData.OT2_Level_SP,displayvalue:" ",thickness:"0",height:"",color:"#165AF9",usemarker:"0",markerbordercolor:"#165AF9"}]}};this.dataSourceOilTank2=i}initOilTank3(){const t=parseFloat(this.dashboardData.OilTank3Level).toFixed(2),e={chart:this.GaugeStyle,annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 45"}]}]},colorRange:{color:[{minValue:this.dashboardData.OT3_Level_A,maxValue:this.dashboardData.OT3_Level_W,code:"#FF9898"},{minValue:this.dashboardData.OT3_Level_W,maxValue:this.dashboardData.OT3_Level_SP,code:"#FFD12E"},{minValue:this.dashboardData.OT3_Level_SP,maxValue:"100",code:"#219653"}]},dials:{dial:[{value:t,tooltext:"Alarm: "+this.dashboardData.OT3_Level_W.toFixed(2)+"<br/> Warning: "+this.dashboardData.OT3_Level_SP.toFixed(2),bgColor:this.colorChnage(t,this.dashboardData.OT3_Level_A,this.dashboardData.OT3_Level_W,this.dashboardData.OT3_Level_SP)}]},trendpoints:{point:[{startvalue:this.dashboardData.OT3_Level_SP,displayvalue:" ",thickness:"0",height:"",color:"#165AF9",usemarker:"0",markerbordercolor:"#165AF9"}]}};this.dataSourceOilTank3=e}initOilTank4(){const e=parseFloat(this.dashboardData.OilTank4Level).toFixed(2),i={chart:this.GaugeStyle,annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 45"}]}]},colorRange:{color:[{minValue:this.dashboardData.OT4_Level_A,maxValue:this.dashboardData.OT4_Level_W,code:"#FF9898"},{minValue:this.dashboardData.OT4_Level_W,maxValue:this.dashboardData.OT4_Level_SP,code:"#FFD12E"},{minValue:this.dashboardData.OT4_Level_SP,maxValue:"100",code:"#219653"}]},dials:{dial:[{value:e,tooltext:"Alarm: "+this.dashboardData.OT4_Level_W.toFixed(2)+"<br/> Warning: "+this.dashboardData.OT4_Level_SP.toFixed(2),bgColor:this.colorChnage(e,this.dashboardData.OT4_Level_A,this.dashboardData.OT4_Level_W,this.dashboardData.OT4_Level_SP)}]},trendpoints:{point:[{startvalue:this.dashboardData.OT4_Level_SP,displayvalue:" ",thickness:"0",color:"#165AF9",usemarker:"0",markerbordercolor:"#165AF9"}]}};this.dataSourceOilTank4=i}waterTempProgressbar(){const t=parseFloat(this.dashboardData.WaterTankTemp).toFixed(2),e={chart:this.TempGaugeStyle,colorrange:{color:[{minValue:0,maxValue:this.dashboardData.WT_Temp_W,code:"#219653"},{minValue:this.dashboardData.WT_Temp_W,maxValue:this.dashboardData.WT_Temp_A,code:"#FFD12E"},{minValue:this.dashboardData.WT_Temp_A,maxValue:"100",code:"#FF9898"}]},pointers:{pointer:[{value:t,tooltext:"Alarm: "+this.dashboardData.WT_Temp_W.toFixed(2)+"<br/> Warning: "+this.dashboardData.WT_Temp_SP.toFixed(2),usemarker:"0"}]},trendpoints:{point:[{startvalue:this.dashboardData.WT_Temp_SP,displayvalue:" ",thickness:"1",color:"#165AF9",usemarker:"0",pointerRadius:"1",markerbordercolor:"#165AF9"}]}};this.dataSourceWaterTemp=e}oilTank1Progressbar(){const t=parseFloat(this.dashboardData.OilTank1Temp).toFixed(2),e={chart:this.TempGaugeStyle,colorrange:{color:[{minValue:0,maxValue:this.dashboardData.OT1_Temp_W,code:"#219653"},{minValue:this.dashboardData.OT1_Temp_W,maxValue:this.dashboardData.OT1_Temp_A,code:"#FFD12E"},{minValue:this.dashboardData.OT1_Temp_A,maxValue:"100",code:"#FF9898"}]},pointers:{pointer:[{value:t,tooltext:"Alarm: "+this.dashboardData.OT1_Temp_W.toFixed(2)+"<br/> Warning: "+this.dashboardData.OT1_Temp_SP.toFixed(2),pointerRadius:"55"}]},trendpoints:{point:[{startvalue:this.dashboardData.OT1_Temp_SP,displayvalue:" ",thickness:"0",height:"",color:"#165AF9",usemarker:"0",markerbordercolor:"#165AF9"}]}};this.dataSourceOilTank1Temp=e}oilTank2Progressbar(){const t=parseFloat(this.dashboardData.OilTank2Temp).toFixed(2),e={chart:this.TempGaugeStyle,colorrange:{color:[{minValue:0,maxValue:this.dashboardData.OT2_Temp_W,code:"#219653"},{minValue:this.dashboardData.OT2_Temp_W,maxValue:this.dashboardData.OT2_Temp_A,code:"#FFD12E"},{minValue:this.dashboardData.OT2_Temp_A,maxValue:"100",code:"#FF9898"}]},pointers:{pointer:[{value:t,tooltext:"Alarm: "+this.dashboardData.OT2_Temp_W.toFixed(2)+"<br/> Warning: "+this.dashboardData.OT2_Temp_SP.toFixed(2),pointerRadius:"55"}]},trendpoints:{point:[{startvalue:this.dashboardData.OT2_Temp_SP,displayvalue:" ",thickness:"0",height:"",color:"#165AF9",usemarker:"0",markerbordercolor:"#165AF9"}]}};this.dataSourceOilTank2Temp=e}oilTank3Progressbar(){const t=parseFloat(this.dashboardData.OilTank3Temp).toFixed(2),e={chart:this.TempGaugeStyle,colorrange:{color:[{minValue:0,maxValue:this.dashboardData.OT3_Temp_W,code:"#219653"},{minValue:this.dashboardData.OT3_Temp_W,maxValue:this.dashboardData.OT3_Temp_A,code:"#FFD12E"},{minValue:this.dashboardData.OT3_Temp_A,maxValue:"100",code:"#FF9898"}]},pointers:{pointer:[{value:t,tooltext:"Alarm: "+this.dashboardData.OT3_Temp_W.toFixed(2)+"<br/> Warning: "+this.dashboardData.OT3_Temp_SP.toFixed(2),pointerRadius:"55"}]},trendpoints:{point:[{startvalue:this.dashboardData.OT3_Temp_SP,displayvalue:" ",thickness:"0",height:"",color:"#165AF9",usemarker:"0",markerbordercolor:"#165AF9"}]}};this.dataSourceOilTank3Temp=e}oilTank4Progressbar(){const t=parseFloat(this.dashboardData.OilTank4Temp).toFixed(2),e={chart:this.TempGaugeStyle,colorrange:{color:[{minValue:0,maxValue:this.dashboardData.OT4_Temp_W,code:"#219653"},{minValue:this.dashboardData.OT4_Temp_W,maxValue:this.dashboardData.OT4_Temp_A,code:"#FFD12E"},{minValue:this.dashboardData.OT4_Temp_A,maxValue:"100",code:"#FF9898"}]},pointers:{pointer:[{value:t,tooltext:"Alarm: "+this.dashboardData.OT4_Temp_W.toFixed(2)+"<br/> Warning: "+this.dashboardData.OT4_Temp_SP.toFixed(2),pointerRadius:"55"}]},trendpoints:{point:[{startvalue:this.dashboardData.OT4_Temp_SP,displayvalue:" ",thickness:"0",height:"",color:"#165AF9",usemarker:"0",markerbordercolor:"#165AF9"}]}};this.dataSourceOilTank4Temp=e}formatWaterTankData(){return`Warning: ${this.dashboardData.WT_Level_W.toFixed(2)}\nTrip: ${this.dashboardData.WT_Level_A.toFixed(2)}`}formatWaterTempData(){return`Warning: ${this.dashboardData.WT_Temp_W.toFixed(2)}\nTrip: ${this.dashboardData.WT_Temp_A.toFixed(2)}`}formatOilTank1Data(){return`Warning: ${this.dashboardData.OT1_Level_W.toFixed(2)}\nTrip: ${this.dashboardData.OT1_Level_A.toFixed(2)}`}formatOT1TempData(){return`Warning: ${this.dashboardData.OT1_Temp_W.toFixed(2)}\nTrip: ${this.dashboardData.OT1_Temp_A.toFixed(2)}`}formatOilTank2Data(){return`Warning: ${this.dashboardData.OT2_Level_W.toFixed(2)}\nTrip: ${this.dashboardData.OT2_Level_A.toFixed(2)}`}formatOT2TempData(){return`Warning: ${this.dashboardData.OT2_Temp_W.toFixed(2)}\nTrip: ${this.dashboardData.OT2_Temp_A.toFixed(2)}`}formatOilTank3Data(){return`Warning: ${this.dashboardData.OT3_Level_W.toFixed(2)}\nTrip: ${this.dashboardData.OT3_Level_A.toFixed(2)}`}formatOT3TempData(){return`Warning: ${this.dashboardData.OT3_Temp_W.toFixed(2)}\nTrip: ${this.dashboardData.OT3_Temp_A.toFixed(2)}`}formatOilTank4Data(){return`Warning: ${this.dashboardData.OT4_Level_W.toFixed(2)}\nTrip: ${this.dashboardData.OT4_Level_A.toFixed(2)}`}formatOT4TempData(){return`Warning: ${this.dashboardData.OT4_Temp_W.toFixed(2)}\nTrip: ${this.dashboardData.OT4_Temp_A.toFixed(2)}`}getTankStatusData(){this.dashService.getTankTestBenchConnect().subscribe(t=>{this.tankStatus=t[0],this.cdr.detectChanges(),this.showCharts=!0})}initEnvironMentCharts(){const t=new Date,e=this.calculateStartTime(t);t.setMinutes(t.getMinutes()+1),this.gStartTime=e;const i=(0,c.p6)(e,"YYYY-MM-dd HH:mm:ss","en_US"),o=(0,c.p6)(t,"YYYY-MM-dd HH:mm:ss","en_US");this.dashService.getChartData({starttime:i,endtime:o}).subscribe(n=>{this.dataForPM2_5=[],this.dataForPM10=[],this.dataForVoc=[],this.dataTemp=[],this.dataHumidity=[],this.time=[],this.chartData=n,n?(n.map((r,u)=>{this.dataForPM2_5.push({value:r.LabAirQualityPM2_5}),this.dataForPM10.push({value:r.LabAirQualityPM10}),this.dataForVoc.push({value:r.LabAirQualityVOC}),this.dataTemp.push({value:r.LabTemp}),this.dataHumidity.push({value:r.LabHumidity}),(0,c.p6)(r.DateTime,"dd/MM/yyyy HH:mm:ss","en-US","UTC"),this.time.push({label:new Date(r.DateTime)})}),this.dataForPM2_5.reverse(),this.dataForPM10.reverse(),this.dataForVoc.reverse(),this.dataTemp.reverse(),this.dataHumidity.reverse(),this.time.reverse(),this.cardsAvg.push(this.calculateAvg(this.dataForPM2_5)),this.cardsAvg.push(this.calculateAvg(this.dataForPM10)),this.cardsAvg.push(this.calculateAvg(this.dataForVoc)),this.cardsAvg.push(this.calculateAvg(this.dataHumidity)),this.cardsAvg.push(this.calculateAvg(this.dataTemp)),this.initChartAirQuality(this.dataForPM2_5,this.dataForPM10,this.dataForVoc,this.dataHumidity,this.dataTemp,this.dataForPM2_5.length,this.time)):console.error("Invalid data structure:",n)})}initChartAirQuality(t,e,i,o,n,l,r){const u=[{seriesname:"PM2.5",lineThickness:"3",data:t.slice(0,l)},{seriesname:"PM10",lineThickness:"3",data:e.slice(0,l)},{seriesname:"VOC",lineThickness:"3",data:i.slice(0,l)},{seriesname:"Humidity",lineThickness:"3",data:o.slice(0,l)},{seriesname:"Temperature",lineThickness:"3",data:n.slice(0,l)}];this.dataSourceAir=u;const T=this.gStartTime,p=[];u.forEach(b=>{const v=[],m=new Date(T);b.data.forEach((x,P)=>{const C=new Date(m);0!=P&&(C.setMinutes(C.getMinutes()+1),m.setMinutes(m.getMinutes()+1));const g=new Date(r[P].label);g.setHours(g.getHours()-5),g.setMinutes(g.getMinutes()-30),v.push({x:g,y:x.value})}),p.push({name:b.seriesname,dataPoints:v})}),this.timeSeriesData=p,this.dashService.timeSeriesData.next(p),this.showChart=!0,this.spinner.hide()}getTestBenchData(){this.dashService.getTestBenchData().pipe((0,H.U)(t=>t||[])).subscribe(t=>{t&&(this.testBenchData=t,this.cdr.detectChanges())})}calculateStartTime(t){const e=new Date(t.getTime());return"1"===this.selectedTimeRange?e.setHours(e.getHours()-1):"3"===this.selectedTimeRange?e.setHours(e.getHours()-3):"6"===this.selectedTimeRange?e.setHours(e.getHours()-6):"24"===this.selectedTimeRange&&e.setHours(e.getHours()-24),e.setMinutes(e.getMinutes()+1),e}calculateAvg(t){let e=0;for(const i of t)e+=i.value;return e/t.length}static#a=this.\u0275fac=function(e){return new(e||s)(a.Y36(O.FF),a.Y36(B.r),a.Y36(k.s),a.Y36(a.sBO),a.Y36(y.t2))};static#t=this.\u0275cmp=a.Xpm({type:s,selectors:[["app-dash-analytics"]],standalone:!0,features:[a.jDz],decls:2,vars:1,consts:[["type","ball-scale-multiple"],["class","dashboard",4,"ngIf"],[1,"dashboard"],[1,"row","dv-air-card","mt-3"],["class","col-12 col-md-2 cust-col-2",4,"ngFor","ngForOf"],[1,"col-md-12","mt-3"],["cardTitle","",1,"card-chart",3,"options"],[1,"row"],[1,"col-md-6"],[1,"title"],[1,"col-md-6","d-flex","justify-content-end"],["id","timeRangeSelect",1,"form-select","w-auto",3,"ngModel","ngModelChange","change"],["value","1"],["value","3"],["value","6"],["value","24"],[3,"_size"],[1,"row","flex-row","mt-3"],[1,"col-md-8"],["cardTitle","Tank Status",1,"tank-status",3,"options"],["class","row",4,"ngIf"],[1,"col-md-4"],[1,"lab-emergency-status"],["cardTitle","Lab Emergency Status",3,"options"],[1,"col-lg-6","dv-ui"],[1,"list"],[3,"ngClass"],[1,"col-lg-6","dv-circle-data"],[4,"ngIf","ngIfElse"],["abnormalText",""],[1,"row","mt-3"],[1,"col-md-12"],["cardTitle","Test Bench Status",3,"options"],[1,"col-12","col-md-2","cust-col-2"],[3,"hidHeader","cardClass"],[1,"text-white","d-flex","gap-2","align-items-center"],[1,"text-white"],[1,"f-card-value"],[1,"f-card-unit",3,"innerHTML"],[1,"fs-7",3,"innerHTML"],[1,"cardName","d-flex","rounded","dv-status"],[1,"warning",3,"ngStyle"],[1,"line-separator"],[1,"alarm","col",3,"ngStyle"],["class","feather icon-arrow-up",3,"style",4,"ngIf"],["class","feather icon-arrow-down",3,"style",4,"ngIf"],["class","fas fa-minus",3,"style",4,"ngIf"],[1,"feather","icon-arrow-up"],[1,"feather","icon-arrow-down"],[1,"fas","fa-minus"],[1,"col-lg-2","cust-col-2"],[1,"p-0","m-0","m-0","row","chart-gauge",3,"title"],["role","button",1,"fa","fa-chart-line","justify-content-end","end-0","overflow-hidden","d-flex","text-dark","fs-5",3,"click"],["width","100%","height","100",3,"type","dataFormat","dataSource"],[1,"p-0","m-0","m-0","row","chart-hlineargauge",3,"title"],["width","100%","height","70",3,"type","dataFormat","dataSource"],[1,"m-0","p-0","text-sm"],[1,"p-0","row","testBenchConnect"],[1,"d-flex"],[1,"card","border-0",2,"background-color","aliceblue","border-radius","5px","font-family","bold"],[1,"row","dv-connected-bench"],[1,"m-0","p-0","text-center"],[1,"p-0","m-0","m-0","row","dv-caption"],["width","100%","height","100",1,"fusionTank",3,"type","dataFormat","dataSource"],["height","100",3,"width","type","dataFormat","dataSource",4,"ngIf"],["height","100",3,"width","type","dataFormat","dataSource"],[1,"d-flex","align-items-center","justify-content-center","rounded-circle","border","border-15","dv-text-danger",2,"width","150px","height","150px","border-color","red !important"],[1,"d-flex","align-items-center","justify-content-center","rounded-circle","border","border-15","dv-text-green",2,"width","150px","height","150px","border-color","green !important"],["class","col-lg-3 mb-1",4,"ngFor","ngForOf"],[1,"col-lg-3","mb-1"],[1,"testBench","rounded","bg-light",3,"ngClass"],[1,"test-header","d-flex","justify-content-between"],[1,"left","fs-6"],[1,"feather","icon-bar-chart-2"],["class","right",4,"ngIf"],[1,"test-details","d-flex","justify-content-around"],[1,"test","d-flex","flex-column","align-items-center"],[1,"test-details-title"],[1,"fs-7","fw-bold"],["class","test-footer d-flex justify-content-end",4,"ngIf"],[1,"right"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],[1,"feather","icon-external-link"],[1,"test-footer","d-flex","justify-content-end"],[1,"btm-date","d-flex","flex-column","align-items-center"]],template:function(e,i){1&e&&(a._UZ(0,"ngx-spinner",0),a.YNc(1,ia,46,15,"div",1)),2&e&&(a.xp6(1),a.Q6J("ngIf",i.showChart))},dependencies:[c.ez,c.mk,c.sg,c.O5,c.PC,c.OU,c.JJ,c.uU,D.m,_.YN,_.Kr,_.EJ,_.JJ,_.On,Q.A,y.Ro,M.Z,S.Qf,S.PZ],styles:[".dashboard .f-card-value{font-size:2rem;font-weight:700}  .dashboard .f-card-unit{font-size:15px}  .dashboard .warning,   .dashboard .alarm{font-size:14px;font-weight:700}  .dashboard .order-card{margin-bottom:0}  .dashboard .order-card .card-body{padding:10px}  .dashboard .line-separator{margin:0 4px;color:#999}  .dashboard .cardName{background-color:#fff;box-shadow:0 0 10px #0000001a;padding:5px}  .dashboard .dv-status span{font-size:11px}  .dashboard .card-chart .card-header{display:none}  .dashboard .card-chart .card-body{padding-bottom:0}  .dashboard .test-details{padding:10px 0}  .dashboard .test-details div{padding:10px}  .dashboard .test-details .test{padding:8px}  .dashboard .test-details-title{font-size:11.5px}  .dashboard .testBench{padding:10px 0}  .dashboard .testBench .test-header{padding:0 10px}  .dashboard .border-15{border-width:15px!important}  .dashboard .card-Lab-es{min-height:348px}  .dashboard .card-Lab-es li{padding:15px 0;font-weight:700}  .dashboard .card-Lab-es .list{margin:0}  .dashboard .card-Lab-es .card-body{padding:10% 5px}  .dashboard .card-Lab-es .card-header{padding:10px}  .dashboard .card-Lab-es .dv-ui{padding-right:0}  .dashboard .testBenchConnect .card{margin-bottom:0;width:40px!important}  .dashboard .tankCard .card-body{min-height:260px;padding-left:0}  .dashboard .tankCard .testBenchConnect{margin:5px 0 0}  .dashboard .card-chart .title{margin-bottom:0;color:#222;font-size:14px;font-weight:700;margin-right:10px;line-height:1.1;position:relative}  .dashboard .form-select{font-size:11px}  .dashboard .li-text-danger{color:red}  .dashboard .dv-text-danger{width:150px;height:150px;color:red!important}  .dashboard .dv-text-green{width:150px;height:150px;color:green!important}@media only screen and (min-width: 769px){  .dashboard .cust-col-2{width:20%!important}  .dashboard .dv-air-card>.ng-star-inserted:first-child{padding-left:0}  .dashboard .dv-air-card>.ng-star-inserted:last-child{padding-right:0}  .dashboard .lab-emergency-status .card-body{margin-top:50px;padding:0!important}  .dashboard .lab-emergency-status{background:linear-gradient(45deg,#fff,#fff);box-shadow:0 0 10px #0000001a;background-clip:border-box;border:.8px;border-radius:5px;height:100%;padding:5px 20px}  .dashboard .lab-emergency-status .card-header,   .dashboard .lab-emergency-status .card-body{padding:20px 0}  .dashboard .lab-emergency-status .card{background:transparent;box-shadow:none;border:none}}@media only screen and (max-width: 768px){  .dashboard .lab-emergency-status .card{background:linear-gradient(45deg,#fff,#fff);box-shadow:0 0 10px #0000001a;background-clip:border-box;border:.8px;border-radius:5px}  .dashboard .dv-air-card .cust-col-2{padding:0;margin:5px 0}  .dashboard .lab-emergency-status{margin-top:1rem}  .dashboard .col-lg-6.dv-ui{width:50%}  .dashboard .col-lg-6.dv-circle-data{width:50%}}  .dashboard .btm-date{padding:0 5px}  .dashboard .list li{padding-bottom:15px;font-size:smaller;font-weight:700}  .dashboard .lab-emergency-status ul{padding-left:5px}  .dashboard .tank-status .card-body{padding-top:0}  .dashboard .testBenchActive{background-color:#8bee8680!important}  .dashboard .testBench{min-height:140px}  .dashboard .dv-air-card{margin:0}  .dashboard .dv-caption{white-space:nowrap;font-size:10px!important;font-weight:700;font-size:small;padding:2px!important;border-radius:5px;background-color:#bacefa}  .dashboard .dv-caption .text-sm{font-size:11px}  .dashboard .text-sm{text-align:center}  .dashboard .testBenchConnect p{left:unset!important}  .dashboard .testBenchConnect .d-flex{justify-content:center;align-items:center}  .dashboard .testBenchConnect .card{left:unset;transform:none;padding:4px 0}  .dashboard .dv-connected-bench{padding:4px 0}  .dashboard .dv-connected-bench p{font-size:10px}  .dashboard .flex-row.row{display:flex;flex-wrap:wrap;padding-left:0;padding-right:0}  .dashboard .flex-row.row>[class*=col-]{display:flex;flex-direction:column}  .dashboard .flex-row.row:after,   .dashboard .flex-row.row:before{display:flex}  .dashboard .flex-row app-card .card{margin-bottom:0}  .dashboard .chart-gauge{position:relative}  .dashboard .chart-gauge fusioncharts{padding:0}  .dashboard .chart-hlineargauge{position:relative}  .dashboard .chart-hlineargauge fusioncharts{padding:0}  .dashboard .chart-hlineargauge p{position:absolute;top:62px;left:50%;transform:translate(-50%)}"],changeDetection:0})}return s})()}}]);