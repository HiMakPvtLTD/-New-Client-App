"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[558],{3182:(U,A,h)=>{h.d(A,{Z:()=>d});var P=h(6814),t=h(3185),i=h(7818),S=h(9468),b=h(5026),j=h(2561);const v=["chart"],M=function(u,_){return{width:u,height:_}};let d=(()=>{class u{set _customRangeSelector(l){this.customRangeSelector=l}set _size(l){this.size=l}constructor(l,m){this.dashService=l,this.chartService=m,this.showChart=!1,this.customRangeSelector=!1,this.stopZoom=!1,this.timeSeriesLegendState={},this.tempSchema=[{name:"Time",type:"date",format:"%d-%b-%Y %H:%M:%S"},{name:"Type",type:"string"},{name:"Value",type:"number"}],this.handleLegendItemClick=a=>{a.preventDefault();const p=a.dataObj.datasetName;this.timeSeriesLegendState[p]=+!this.timeSeriesLegendState[p]},this.type="timeseries",this.width="100%",this.height="500",this.dashService.timeSeriesData.subscribe(a=>{this.data=a,this.data?.length&&(this.loadLegendItems(),this.formatData(),this.showChart=!0)})}setChart(){this.dashService.timeSeriesData.subscribe(l=>{this.data=l,this.data?.length&&(this.loadLegendItems(),this.formatData(),this.showChart=!0)})}ngOnInit(){this.height=`${this.size.height}px`,this.width=this.size.width,this.chartService.resetChart$.subscribe(()=>{})}loadLegendItems(){const l=0==Object.keys(this.timeSeriesLegendState).length;this.data?.map(m=>{const{name:a}=m;l&&(this.timeSeriesLegendState[a]=1)})}formatData(){if(!this.data)return;const l=this.data.map(a=>({type:"line",showInLegend:!0,visible:this.timeSeriesLegendState[a.name],...a})).flat();this.tempData=l;const m=(a,p)=>{this.timeSeriesLegendState[a]=p};this.chartOptions={zoomEnabled:!0,animationEnabled:!0,theme:"light2",title:{text:""},axisX:{valueFormatString:"HH:mm:ss"},axisY:{title:"Value",suffix:""},toolTip:{shared:!0,content:function(a){let p="";p+=(0,P.p6)(a.entries[0].dataPoint.x,"dd/MM/YYYY HH:mm:ss","en_US")+"<br/><br/>";for(let o=0;o<a.entries.length;o++)p+="PM2.5"==a.entries[o].dataSeries.name||"PM10"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(1)+" (\xb5g/m3)<br/>":"VOC"==a.entries[o].dataSeries.name||"Humidity"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(1)+" (%)<br/>":"Pump RPM"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (RPM)<br/>":"Motor Current"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (A)<br/>":"Discharge Press PV"==a.entries[o].dataSeries.name||"Discharge Press SP"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (BAR)<br/>":"Discharge Flow"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (LPM)<br/>":"Motor Power"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (KW)<br/>":"Stroke Rate"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (SCPM)<br/>":"Inlet Air Press PV"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (BAR)<br/>":"Air Valve Output"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (%)<br/>":"PumpRPM"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (RPM)<br/>":"Discharge Control Valve Cmd"==a.entries[o].dataSeries.name||"Discharge Control Valve Position"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (%)<br/>":"Suction Pressure"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (BAR)<br/>":"Gravimetric Flow"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (kG/Min)<br/>":"Gravimetric Weight"==a.entries[o].dataSeries.name||"WeightScaleRead"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (Kg)<br/>":"MotorAMP"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (A)<br/>":"Discharge Pressure"==a.entries[o].dataSeries.name||"Discharge Pressure Setpoint"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (BAR)<br/>":"DischargeFlow"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (LPM)<br/>":"MotorKW"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (KW)<br/>":"MotorKWH"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (kWh)<br/>":"Test Stroke Count"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+"<br/>":"Stroke Count Rate"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (SCPM)<br/>":"In Air Pressure"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+"<br/>":"Air Valve Output"==a.entries[o].dataSeries.name?a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(2)+" (%)<br/>":a.entries[o].dataSeries.name+": "+a.entries[o].dataPoint.y.toFixed(1)+" (\xb0C)<br/>";return p}},legend:{cursor:"pointer",itemclick:function(a){typeof a.dataSeries.visible>"u"||a.dataSeries.visible?(m(a.dataSeries.name,!1),a.dataSeries.visible=!1):(m(a.dataSeries.name,!0),a.dataSeries.visible=!0),a.chart.render()}},data:l}}static#t=this.\u0275fac=function(m){return new(m||u)(S.Y36(b.s),S.Y36(j.C))};static#e=this.\u0275cmp=S.Xpm({type:u,selectors:[["app-time-series"]],viewQuery:function(m,a){if(1&m&&S.Gf(v,5),2&m){let p;S.iGM(p=S.CRH())&&(a.chart=p.first)}},inputs:{_customRangeSelector:"_customRangeSelector",_size:"_size"},standalone:!0,features:[S.jDz],decls:2,vars:5,consts:[["id","chartContainer",3,"options","styles"],["chart",""]],template:function(m,a){1&m&&S._UZ(0,"canvasjs-chart",0,1),2&m&&S.Q6J("options",a.chartOptions)("styles",S.WLB(2,M,a.width,a.height))},dependencies:[P.ez,i.m,t.n,t.x],encapsulation:2})}return u})()},2558:(U,A,h)=>{h.r(A),h.d(A,{NgbdSortableHeaderDirective:()=>k,default:()=>Rt});var P=h(6814),t=h(9468),i=h(1043),S=h(8856),b=h(8351),j=h(3182),v=h(7818),M=h(8193),d=h(814),u=h(7844),_=h(8837),l=h(1486),m=h(6990),p=h(6655),o=h(9074),E=h(7911),R=h(5399),I=h(8672),L=h(5026),V=h(589),Y=h(7635),q=h(8642),B=h(4143),J=h(6686),w=h(6223),K=h(220);const H=["confirmationModal"];function $(n,D){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit,s=t.oxw(2);t.xp6(1),t.Oqu(s.projectDetails[e.property])}}function W(n,D){if(1&n&&(t.TgZ(0,"app-card",51)(1,"label",52),t._UZ(2,"i"),t._uU(3),t.qZA(),t.TgZ(4,"label",53),t.YNc(5,$,2,1,"span",54),t.qZA()()),2&n){const e=t.oxw().$implicit,s=t.oxw(2);t.s9C("cardClass",e.background),t.Q6J("hidHeader",!0),t.xp6(2),t.Gre("feather float-start ",e.icon,""),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Q6J("ngIf",s.projectDetails)}}function z(n,D){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit,s=t.oxw(2);t.xp6(1),t.Oqu(s.projectDetails[e.property])}}function Q(n,D){if(1&n&&(t.TgZ(0,"app-card",51)(1,"label",52),t._UZ(2,"i"),t._uU(3),t.qZA(),t.TgZ(4,"label",53),t.YNc(5,z,2,1,"span",54),t.qZA()()),2&n){const e=t.oxw().$implicit,s=t.oxw(2);t.s9C("cardClass","Running"===s.projectDetails[e.property]?"bg-c-green":"Stop"===s.projectDetails[e.property]?"bg-c-red":"bg-secondary"),t.Q6J("hidHeader",!0),t.xp6(2),t.Gre("feather float-start ",e.icon,""),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Q6J("ngIf",s.projectDetails)}}function G(n,D){if(1&n&&(t.TgZ(0,"div",49),t.YNc(1,W,6,7,"app-card",50),t.YNc(2,Q,6,7,"app-card",50),t.qZA()),2&n){const e=D.last;t.xp6(1),t.Q6J("ngIf",!e),t.xp6(1),t.Q6J("ngIf",e)}}const X=function(n){return{"bg-secondary":n}};function tt(n,D){if(1&n){const e=t.EpF();t.TgZ(0,"tr",57),t.NdJ("click",function(){const r=t.CHM(e),c=r.$implicit,f=r.index,g=t.oxw(3);return t.KtG(g.handleRowClick(c.TestNo,f))}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"number"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"number"),t.qZA()()}if(2&n){const e=D.$implicit,s=D.index,r=t.oxw(3);t.Q6J("ngClass",t.VKq(29,X,s===r.selectedRow)),t.xp6(2),t.Oqu(null==e?null:e.TestNo),t.xp6(2),t.Oqu(t.Dn7(5,9,null==e?null:e.StartDateTime,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(t.Dn7(8,13,null==e?null:e.EndDateTime,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(t.xi3(11,17,null==e?null:e.PumpRPM,"1.2-2")),t.xp6(3),t.Oqu(null==e?null:e.endurance),t.xp6(2),t.Oqu(t.xi3(16,20,null==e?null:e.DischargePressureSP,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(19,23,null==e?null:e.Set_MotorRPM,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(22,26,null==e?null:e.MotorKW,"1.1-1"))}}function et(n,D){if(1&n&&(t.TgZ(0,"table",55)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Test Run"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Test Start Time"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Test End Time"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Main Motor RPM"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Test Run Time (Min)"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Discharge Pressure (SP)"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Motor HZ"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Motor Power"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,tt,23,31,"tr",56),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(20),t.Q6J("ngForOf",e.selectedProjectTestRunsList)}}const at=function(n){return{selectedRowColor:n}};function it(n,D){if(1&n){const e=t.EpF();t.TgZ(0,"tr",57),t.NdJ("click",function(){const r=t.CHM(e),c=r.$implicit,f=r.index,g=t.oxw(3);return t.KtG(g.handleRowClick(c.TestNo,f))}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"number"),t.qZA()()}if(2&n){const e=D.$implicit,s=D.index,r=t.oxw(3);t.Q6J("ngClass",t.VKq(21,at,s===r.selectedRow)),t.xp6(2),t.Oqu(null==e?null:e.TestNo),t.xp6(2),t.Oqu(t.Dn7(5,7,null==e?null:e.StartDateTime,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(t.Dn7(8,11,null==e?null:e.EndDateTime,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(null==e?null:e.endurance),t.xp6(2),t.Oqu(t.xi3(13,15,null==e?null:e.DischargePressureSP,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(16,18,null==e?null:e.InAirPressSP,"1.1-1"))}}function st(n,D){if(1&n&&(t.TgZ(0,"table",55)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Test Run"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Test Start Time"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Test End Time"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Test Run Time (Min)"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Discharge Pressure (SP)"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Air Valve output"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,it,17,23,"tr",56),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(16),t.Q6J("ngForOf",e.selectedProjectTestRunsList)}}function nt(n,D){if(1&n){const e=t.EpF();t.TgZ(0,"a",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.openModal("Favourite"))}),t._uU(1,"Mark as Favourite "),t._UZ(2,"i",58),t.qZA()}}function rt(n,D){if(1&n){const e=t.EpF();t.TgZ(0,"a",59),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.deletFav())}),t._uU(1,"Favourite "),t._UZ(2,"i",58),t.qZA()}}function ot(n,D){1&n&&(t.TgZ(0,"div",65),t._uU(1," Pump RPM "),t.qZA())}function ct(n,D){1&n&&(t.TgZ(0,"div",65),t._uU(1," Inlet Air Pressure "),t.qZA())}function lt(n,D){if(1&n&&(t.TgZ(0,"div",66),t._UZ(1,"fusioncharts",67),t.TgZ(2,"div",68)(3,"div",69)(4,"p",70),t._uU(5),t.qZA()()()()),2&n){const e=t.oxw(3);t.Q6J("title",e.formatPumpRPM()),t.xp6(1),t.Q6J("width",e.width)("height",e.height)("type","angulargauge")("dataFormat",e.dataFormat)("dataSource",e.dataSourcePumpRPM),t.xp6(4),t.hij(" Motor Hz SP: ",e.dash.Set_MotorRPM||0," Hz ")}}function dt(n,D){if(1&n&&(t.TgZ(0,"div",66),t._UZ(1,"fusioncharts",67)(2,"div",82),t.qZA()),2&n){const e=t.oxw(3);t.Q6J("title",e.formatPumpRPMAirPress()),t.xp6(1),t.Q6J("width",e.width)("height",e.height)("type","angulargauge")("dataFormat",e.dataFormat)("dataSource",e.dataSourcePumpRPMAirPressure)}}function ht(n,D){if(1&n&&(t.TgZ(0,"div")(1,"div",83)(2,"div",84),t._UZ(3,"img",85),t.qZA(),t.TgZ(4,"div",86)(5,"div",87)(6,"p",88),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"div",89)(10,"p",79),t._uU(11,"Motor Power"),t.qZA()()()()(),t.TgZ(12,"div",90)(13,"div",86)(14,"div",87)(15,"p",88),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"div",89)(19,"p",79),t._uU(20,"Motor AMP"),t.qZA()()()()()()),2&n){const e=t.oxw(3);t.xp6(7),t.hij("",t.xi3(8,2,e.dash.MotorKW||0,"1.1-1")," kW"),t.xp6(9),t.hij("",t.xi3(17,5,e.dash.MotorAMP||0,"1.1-1")," AMP")}}function pt(n,D){if(1&n&&(t.TgZ(0,"div")(1,"div",91)(2,"div",92)(3,"div",93)(4,"div",87)(5,"div",94)(6,"p",79),t._uU(7,"Inlet Air Flow"),t.qZA()(),t.TgZ(8,"p",88),t._uU(9),t.ALo(10,"number"),t.qZA()()()(),t.TgZ(11,"div",92)(12,"div",86)(13,"div",87)(14,"div",94)(15,"p",79),t._uU(16,"Stroke Count / Min"),t.qZA()(),t.TgZ(17,"p",88),t._uU(18),t.qZA()()()(),t.TgZ(19,"div",92)(20,"div",86)(21,"div",87)(22,"div",94)(23,"p",79),t._uU(24,"Air Valve Output"),t.qZA()(),t.TgZ(25,"p",88),t._uU(26),t.ALo(27,"number"),t.qZA()()()()()()),2&n){const e=t.oxw(3);t.xp6(9),t.hij("",t.xi3(10,3,e.chartData.AoddInAirSCFMPV||0,"1.1-1")," SCFM"),t.xp6(9),t.hij("",e.chartData.StrokeCountRate||0," "),t.xp6(8),t.hij("",t.xi3(27,6,e.chartData.InAirPressSP||0,"1.1-2"),"% ")}}function ut(n,D){1&n&&(t.TgZ(0,"h6",79),t._uU(1,"Project Kwh"),t.qZA())}function mt(n,D){1&n&&(t.TgZ(0,"h6",79),t._uU(1,"Project Stroke Count"),t.qZA())}function gt(n,D){if(1&n&&(t.TgZ(0,"h5",78),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,e.dash.MotorKwhProject||"0","1.1-3"),"")}}function _t(n,D){if(1&n&&(t.TgZ(0,"h5",78),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,e.dash.aoddProjStrokeCount||"0","1.0-3"),"")}}function ft(n,D){1&n&&(t.TgZ(0,"h6",79),t._uU(1,"Test Running Time"),t.qZA())}function Pt(n,D){1&n&&(t.TgZ(0,"h6",79),t._uU(1,"Last Run Time"),t.qZA())}function Dt(n,D){1&n&&(t.TgZ(0,"h6",79),t._uU(1,"Project Kwh"),t.qZA())}function Tt(n,D){1&n&&(t.TgZ(0,"h6",79),t._uU(1,"Test Stroke Count"),t.qZA())}function vt(n,D){if(1&n&&(t.TgZ(0,"h5",78),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(t.xi3(2,1,e.dash.MotorKwhTest||"0","1.1-3"))}}function xt(n,D){if(1&n&&(t.TgZ(0,"h5",78),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(t.xi3(2,1,e.dash.StrokeCount||"0","1.0-3"))}}const St=function(n){return{color:n}};function Mt(n,D){if(1&n&&(t.TgZ(0,"div",60)(1,"div",61)(2,"div",62),t.YNc(3,ot,2,0,"div",63),t.YNc(4,ct,2,0,"div",63),t.YNc(5,lt,6,7,"div",64),t.YNc(6,dt,3,6,"div",64),t.qZA(),t.TgZ(7,"div",62)(8,"div",65),t._uU(9," Discharge Pressure "),t.qZA(),t.TgZ(10,"div",66),t._UZ(11,"fusioncharts",67),t.TgZ(12,"div",68)(13,"div",69)(14,"p",70),t._uU(15),t.ALo(16,"number"),t.qZA()()()()(),t.TgZ(17,"div",62)(18,"div",65),t._uU(19," Discharge Flow "),t.qZA(),t.TgZ(20,"div",66),t._UZ(21,"fusioncharts",67),t.qZA()(),t.TgZ(22,"div",62),t.YNc(23,ht,21,8,"div",54),t.YNc(24,pt,28,9,"div",54),t.qZA(),t.TgZ(25,"div",71)(26,"div",25)(27,"div",72),t._uU(28),t.ALo(29,"date"),t.qZA()(),t.TgZ(30,"div",73)(31,"div",74)(32,"div",75)(33,"div",76)(34,"h6",77),t._uU(35,"Project RunTime"),t.qZA()(),t.TgZ(36,"h5",78),t._uU(37),t.qZA()()(),t.TgZ(38,"div",74)(39,"div",75)(40,"div",76)(41,"h6",79),t._uU(42,"Project Production"),t.qZA()(),t.TgZ(43,"h5",78),t._uU(44),t.ALo(45,"number"),t.qZA()()(),t.TgZ(46,"div",74)(47,"div",75)(48,"div",76),t.YNc(49,ut,2,0,"h6",80),t.YNc(50,mt,2,0,"h6",80),t.qZA(),t.YNc(51,gt,3,4,"h5",81),t.YNc(52,_t,3,4,"h5",81),t.qZA()(),t.TgZ(53,"div",74)(54,"div",75)(55,"div",76),t.YNc(56,ft,2,0,"h6",80),t.YNc(57,Pt,2,0,"h6",80),t.qZA(),t.TgZ(58,"h5",78),t._uU(59),t.qZA()()(),t.TgZ(60,"div",74)(61,"div",75)(62,"div",76)(63,"h6",79),t._uU(64,"Test Production"),t.qZA()(),t.TgZ(65,"h5",78),t._uU(66),t.ALo(67,"number"),t.qZA()()(),t.TgZ(68,"div",74)(69,"div",75)(70,"div",76),t.YNc(71,Dt,2,0,"h6",80),t.YNc(72,Tt,2,0,"h6",80),t.qZA(),t.YNc(73,vt,3,4,"h5",81),t.YNc(74,xt,3,4,"h5",81),t.qZA()()()()()()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","AODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","AODD"===e.projectDetails.ProjectType),t.xp6(4),t.Q6J("title",e.formatDischargePress()),t.xp6(1),t.Q6J("width",e.width)("height",e.height)("type","angulargauge")("dataFormat",e.dataFormat)("dataSource",e.dataSourceDischargePressure),t.xp6(4),t.hij(" SP: ",t.xi3(16,35,e.dash.DischargePressureSP||0,"1.1-2")," BAR"),t.xp6(5),t.Q6J("title",e.formatDischargeFlow()),t.xp6(1),t.Q6J("width",e.width)("height",e.height)("type","angulargauge")("dataFormat",e.dataFormat)("dataSource",e.dataSourceDischargeFlow),t.xp6(2),t.Q6J("ngIf","AODD"!==e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType),t.xp6(3),t.Q6J("ngStyle",t.VKq(48,St,"Running"===e.projectDetails.Status||"Starting"===e.projectDetails.Status?"gray":"red")),t.xp6(1),t.hij(" Last Data Timestamp : ",t.Dn7(29,38,e.dash.DateTime,"dd/MM/yyyy, HH:mm:ss","UTC")," "),t.xp6(9),t.Oqu(e.Time),t.xp6(7),t.hij("",t.xi3(45,42,e.dash.ProjectTotalizer||"0","1.1-1")," L"),t.xp6(5),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType),t.xp6(4),t.Q6J("ngIf","Running"===e.projectDetails.Status),t.xp6(1),t.Q6J("ngIf","Running"!==e.projectDetails.Status),t.xp6(2),t.Oqu(e.calTime||0),t.xp6(7),t.hij("",t.xi3(67,45,e.dash.TestTotalizer||"0","1.1-1")," L"),t.xp6(5),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType)}}function At(n,D){if(1&n&&(t.TgZ(0,"option",95),t._uU(1),t.qZA()),2&n){const e=D.$implicit,s=t.oxw(2);t.Q6J("value",e)("disabled",s.isDisabledColSelect(e)),t.xp6(1),t.hij("",s.showColumns[e]," ")}}function bt(n,D){if(1&n){const e=t.EpF();t.TgZ(0,"div",96),t._uU(1),t.TgZ(2,"span",97),t.NdJ("click",function(){const c=t.CHM(e).$implicit,f=t.oxw(2);return t.KtG(f.removeTag(c))}),t._UZ(3,"i",98),t.qZA()()}if(2&n){const e=D.$implicit,s=t.oxw(2);t.xp6(1),t.hij(" ",s.showColumns[e]," ")}}function yt(n,D){if(1&n){const e=t.EpF();t.TgZ(0,"div",25),t._UZ(1,"app-time-series",99),t.TgZ(2,"button",100),t.NdJ("click",function(r){t.CHM(e);const c=t.oxw(2);return t.KtG(c.handleAnnotationModal(r))}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("_size",e.size)}}function jt(n,D){if(1&n&&(t.TgZ(0,"th",111),t._uU(1),t.qZA()),2&n){const e=D.$implicit;t.xp6(1),t.Oqu(e)}}function Ct(n,D){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&n){const e=D.$implicit,s=t.oxw().$implicit;t.xp6(1),t.Oqu(s[e])}}function Zt(n,D){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,Ct,2,1,"td",110),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.displayedColumns)}}function wt(n,D){if(1&n){const e=t.EpF();t.TgZ(0,"div",101)(1,"app-card",102)(2,"div",25)(3,"div",103)(4,"div",104),t._uU(5,"Statistical Data"),t.qZA()(),t.TgZ(6,"div",105)(7,"button",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.exportToCSV())}),t._UZ(8,"i",10),t._uU(9," Export "),t.qZA()()(),t.TgZ(10,"div",11)(11,"table",106)(12,"thead")(13,"tr",107),t.YNc(14,jt,2,1,"th",108),t.qZA()(),t.TgZ(15,"tbody",109),t.YNc(16,Zt,2,1,"tr",110),t.qZA()()()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("options",!0),t.xp6(13),t.Q6J("ngForOf",e.displayedColumns),t.xp6(2),t.Q6J("ngForOf",e.tableData)}}function Ft(n,D){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t.YNc(2,G,3,2,"div",4),t.qZA(),t.TgZ(3,"div")(4,"app-card",5),t._UZ(5,"fusioncharts",6),t.qZA()(),t.TgZ(6,"div")(7,"app-card",7)(8,"div",8)(9,"button",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.exportToCSV1())}),t._UZ(10,"i",10),t._uU(11," Export "),t.qZA()(),t.TgZ(12,"div",11),t.YNc(13,et,21,1,"table",12),t.YNc(14,st,17,1,"table",12),t.TgZ(15,"div",13)(16,"span"),t._uU(17),t.qZA(),t.TgZ(18,"ngb-pagination",14),t.NdJ("pageChange",function(r){t.CHM(e);const c=t.oxw();return t.KtG(c.handlePageChange(r))})("pageChange",function(r){t.CHM(e);const c=t.oxw();return t.KtG(c.page=r)}),t.qZA()()()()(),t.TgZ(19,"div",15)(20,"ul",16)(21,"li",17)(22,"a",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openMaintenanceModal())}),t._uU(23,"Maintenance Log "),t._UZ(24,"i",19),t.qZA()(),t.TgZ(25,"li",17)(26,"a",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openModal("User Notes"))}),t._uU(27,"User Notes "),t._UZ(28,"i",20),t.qZA()(),t.TgZ(29,"li",17),t.YNc(30,nt,3,0,"a",21),t.YNc(31,rt,3,0,"a",22),t.qZA()()(),t.TgZ(32,"div",23)(33,"app-card",24)(34,"div",25),t.YNc(35,Mt,75,50,"div",26),t.qZA()()(),t.TgZ(36,"div",27)(37,"app-card",28)(38,"div",29)(39,"div",30)(40,"div",31)(41,"select",32),t.NdJ("ngModelChange",function(r){t.CHM(e);const c=t.oxw();return t.KtG(c.toppings=r)})("change",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onColSelectChange())}),t.TgZ(42,"option",33),t._uU(43,"Select Column names"),t.qZA(),t.YNc(44,At,2,3,"option",34),t.qZA()()(),t.TgZ(45,"div",35)(46,"div",36)(47,"label",37),t._uU(48," Annotation : "),t.qZA(),t.TgZ(49,"input",38),t.NdJ("ngModelChange",function(r){t.CHM(e);const c=t.oxw();return t.KtG(c.isChecked=r)})("change",function(r){t.CHM(e);const c=t.oxw();return t.KtG(c.OnChangeAnno(r))}),t.qZA()(),t.TgZ(50,"div",39)(51,"span",40),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openDateTimeModal())}),t._UZ(52,"i",41),t._uU(53),t.qZA()(),t.TgZ(54,"button",42),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSelectionChange())}),t._uU(55,"Apply"),t.qZA()()(),t.TgZ(56,"div",43)(57,"div",44)(58,"div",45),t.YNc(59,bt,4,1,"div",46),t.qZA()()(),t.YNc(60,yt,3,1,"div",47),t.qZA()(),t.YNc(61,wt,17,3,"div",48),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tempData),t.xp6(2),t.Q6J("cardTitle","AODD"!==e.projectDetails.ProjectType?"Test Run vs Discharge Pressure , Motor Hz":"Test Run vs Discharge Pressure, Air Valve output")("options",!1),t.xp6(1),t.Q6J("width","100%")("height","300")("dataSource",e.dataSourceChart),t.xp6(2),t.Q6J("hidHeader",!0)("options",!1),t.xp6(6),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","AODD"===e.projectDetails.ProjectType),t.xp6(3),t.AsE("Page ",(e.page-1)*e.pageSize," - ",e.page*e.pageSize>e.projectTestRunsList.length?e.projectTestRunsList.length:e.page*e.pageSize," "),t.xp6(1),t.Q6J("pageSize",e.pageSize)("collectionSize",null==e.projectTestRunsList?null:e.projectTestRunsList.length)("page",e.page),t.xp6(12),t.Q6J("ngIf",!e.favSelect),t.xp6(1),t.Q6J("ngIf",e.favSelect),t.xp6(2),t.Q6J("options",!1),t.xp6(2),t.Q6J("ngIf",e.showChart),t.xp6(2),t.Q6J("options",!1),t.xp6(4),t.Q6J("ngModel",e.toppings),t.xp6(3),t.Q6J("ngForOf",e.b),t.xp6(5),t.Q6J("ngModel",e.isChecked),t.xp6(4),t.hij(" ",e.formattedDateTimeRange," "),t.xp6(6),t.Q6J("ngForOf",e.selectedValues),t.xp6(1),t.Q6J("ngIf",e.showTimeChart),t.xp6(1),t.Q6J("ngIf",1==e.tableview)}}const Ut={asc:"desc",desc:"","":"asc"},O=(n,D)=>n<D?-1:n>D?1:0;let k=(()=>{class n{constructor(){this.appSortable="",this.direction="",this.sort=new t.vpe}rotate(){this.direction=Ut[this.direction],this.sort.emit({column:this.appSortable,direction:this.direction})}static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275dir=t.lG2({type:n,selectors:[["th","appSortable",""]],hostVars:4,hostBindings:function(s,r){1&s&&t.NdJ("click",function(){return r.rotate()}),2&s&&t.ekj("asc","asc"===r.direction)("desc","desc"===r.direction)},inputs:{appSortable:"appSortable",direction:"direction"},outputs:{sort:"sort"},standalone:!0})}return n})(),Rt=(()=>{class n{constructor(e,s,r,c,f,g,x,T,F,y){this.headerService=e,this.toastService=s,this.modalService=r,this.spinner=c,this.dashService=f,this.projectService=g,this.authService=x,this.route=T,this.dataAnalyticsService=F,this.idleTimerService=y,this.showChart=!1,this.showTimeChart=!1,this.favSelect=!1,this.selectedRow=0,this.page=1,this.pageSize=10,this.guageRadius=40,this.tableView=!1,this.toppings="",this.selectedValues=[],this.dataSet=[],this.dataSet1=[],this.category=[],this.height="120",this.width="145",this.type="angulargauge",this.dataFormat="json",this.Time="",this.click=0,this.testsource=[],this.chartSource=[],this.col=["act_testruntime","DischargePressureSP","Set_MotorRPM","TestNo","InAirPressSP"],this.col1=["endurance","act_testruntime","DischargePressureSP","InAirPressSP","TestNo"],this.dataSet2=[],this.Set_MotorRPM=[],this.InAirPressSP=[],this.testRunTime=[],this.dischPressure=[],this.chartTestxAxis=[],this.tempData=[{background:"bg-secondary",title:"Name",icon:"icon-edit",property:"ProjectName"},{background:"bg-secondary",title:"Number",icon:"icon-tag",property:"ProjectNo"},{background:"bg-secondary",title:"Owner",icon:"icon-user",property:"ProjectOwner"},{background:"bg-secondary",title:"Type",icon:"icon-grid",property:"ProjectType"},{background:"bg-secondary",title:"Test Runs",icon:"icon-aperture",property:"TestNo"},{background:"bg-secondary",title:"Configuration",icon:"icon-sliders",property:"ProjectConfig"}],this.dash={DischargePressureSP:0,MotorKW:0,MotorKWH:0,StrokeCountRate:0,StrokeCount:0,Time:0,MotorAMP:0,ProjectTotalizer:0,MotorKwhProject:0,Act_TestRunTime:0,TestTotalizer:0,MotorKwhTest:0,PumpRPM:0,AoddInAirPressPV:0,DischargePressurePV:0,DischargeFlow:0,caltime:"",DateTime:"",Set_MotorRPM:0,DischargePTScaleMin:0,DischargePTScaleMax:0,FlowScaleMin:0,FlowScaleMax:0,InAirPressureSP:0,PumpRPMMin:0,PumpRPMMax:0,DischargePThhSP:0,DischargePThSP:0,DischargePThhEn:!1,inAirPTScaleMin:0,inAirPTScaleMax:0,inAirFTScaleMin:0,inAirFTScaleMax:0,aoddProjStrokeCount:0,AoddInAirSCFMPV:0},this.chartData={DischargePressureSP:0,MotorKW:0,MotorKWH:0,StrokeCountRate:0,StrokeCount:0,Time:0,ProjectTotalizer:0,MotorKwhProject:0,Act_TestRunTime:0,TestTotalizer:0,MotorKwhTest:0,PumpRPM:0,PumpRPMMin:0,PumpRPMMax:0,DischargePressurePV:0,DischargePTScaleMin:0,DischargePTScaleMax:0,DischargeFlow:0,FlowScaleMin:0,FlowScaleMax:0,caltime:"",DateTime:"",MotorAMP:0,Set_MotorRPM:0,InAirPressSP:0,AoddInAirPressPV:0,DischargePThhEn:!1,DischargePThSP:0,DischargePThhSP:0,inAirPTScaleMin:0,inAirPTScaleMax:0,inAirFTScaleMin:0,inAirFTScaleMax:0,aoddProjStrokeCount:0,AoddInAirSCFMPV:0,a:0},this.showColumns=_[0],this.AoodItem=["SelectAll","StrokeCount","FcvSP","FlowGrav","WeightScaleRead","DischargeFlow","StrokeCountRate","DischargePressureSP","InAirPressSP","FcvPos","DischargePressurePV","AoddInAirPressPV","SuctionPressurePV"],this.EoddItem=["SelectAll","MotorKWH","FcvSP","Act_MotorRPM","MotorAMP","MotorKW","FlowGrav","WeightScaleRead","DischargeFlow","Set_MotorRPM","DischargePressureSP","FcvPos","DischargePressurePV","SuctionPressurePV","PumpRPM"],this.textCheck="Show",this.isChecked=!1,this.count=0,this.coutdowns=0,this.idleState="Not started.",this.timedOut=!1,this.lastPing=null,this.title="angular-idle-timeout",this.ProjectId=this.route.snapshot.params.id,this.testno=this.route.snapshot.params.no,this.click=this.testno,this.headerService.setHeaderName("Project Analysis");const C=this.authService.getFullNameFromToken();this.uid=C.uid,this.spinner.show()}ngOnInit(){this.size={height:300,width:"100%"},this.getProjectAnalysis(),this.idleTimerService.setupIdle(),this.idleTimerService.resetIdleTimer()}handlePageChange(e){this.sliceProjects(e)}handleRowClick(e,s){this.selectedRow=s,this.click=e,this.getTimeSeriesDetails(),this.dataSet1=[],this.getFavorite()}getProjectAnalysis(){this.projectService.getProjectAnalysis(this.ProjectId,this.testno).subscribe(e=>{this.projectDetails=e[0],"EODD"==this.projectDetails.ProjectType?this.b=this.EoddItem:"AODD"==this.projectDetails.ProjectType&&(this.b=this.AoodItem),this.getTimeSeriesDetails(),this.getProjectRunTimeData(),this.getTableData()})}getProjectRunTimeData(){this.projectService.getProjectRunTime(this.ProjectId,this.testno).subscribe(e=>{this.Time=e.Time})}getTimeSeriesDetails(){const e=this.click==this.testno?this.testno:this.click;this.projConfig=this.projectDetails.ProjectConfig,this.getFavorite(),this.projectService.getTimeSeriesById(this.projConfig,this.ProjectId,e).subscribe(s=>{this.dash=s[0],this.chartData=s[0],this.calTime=s[0].caltime;const r=new Date(this.chartData.DateTime),c=new Date(this.chartData.DateTime);r.setMinutes(r.getMinutes()+1),r.setHours(r.getHours()-5),c.setHours(c.getHours()-5),r.setMinutes(r.getMinutes()-30),c.setMinutes(c.getMinutes()-30),c.setHours(c.getHours()-24),this.jsStartDate=this.formatDate(c),this.jsEndDate=this.formatDate(r),this.fromDate=c,this.toDate=r,this.formatTimeModalDate(),this.pumpRPM(),this.pumpRPMAirPressure(),this.dischargePressure(),this.dischargeFlow(),this.selectedValues.length&&this.onSelectionChange()})}getFavorite(){const e={uid:this.uid,projectid:this.ProjectId,testno:this.click};this.favSelect=!1,this.headerService.SelectFav(e).subscribe(s=>{this.fid=s[0]?.fid,this.favSelect=s[0]?.status})}getTableData(){this.projectService.getTimeSeriesById(this.projConfig,this.ProjectId,0).subscribe(e=>{this.projectTestRunsList=e,this.tempProjectTestRunsList=e,this.sliceProjects(this.page),this.testsource=e,this.testsource2=e,this.getChartData()})}getStatisticalTableData(){const e=(0,P.p6)(this.jsEndDate,"YYYY-MM-dd HH:mm","en_US"),s=(0,P.p6)(this.jsStartDate,"YYYY-MM-dd HH:mm","en_US");this.projectService.getTableData(this.ProjectId,this.click==this.testno?this.testno:this.click,s,e).subscribe(c=>{this.tableData=c,0==c.length&&(this.tableView=!1),c&&c.length&&(this.displayedColumns=Object.keys(c[0]))})}exportToCSV(){const e=this.tableData.map(g=>Object.values(g)),s=Object.keys(this.tableData[0]);e.unshift(s);const r=l.P6.aoa_to_sheet(e),c=l.P6.decode_range(r["!ref"]);for(let g=c.s.r;g<=c.e.r;++g)for(let x=c.s.c;x<=c.e.c;++x){const T=l.P6.encode_cell({r:g,c:x});r[T]&&(r[T].s||(r[T].s={}),r[T].s.alignment={horizontal:"center",vertical:"center"})}const f=l.P6.book_new();l.P6.book_append_sheet(f,r,"Sheet1"),l.NC(f,"Statistical.xlsx")}exportToCSV1(){var e=[],s=[];this.projectTestRunsList.map(g=>{"AODD"==this.projectDetails.ProjectType?e.push([g.TestNo,g.StartDateTime,g.EndDateTime,g.endurance,g.DischargePressureSP,g.InAirPressSP]):"EODD"==this.projectDetails.ProjectType&&e.push([g.TestNo,g.StartDateTime,g.EndDateTime,g.PumpRPM,g.act_testruntime,g.DischargePressureSP,g.Set_MotorRPM,g.MotorKW])}),"AODD"==this.projectDetails.ProjectType?s=["Test Run","Test Start Time","Test End Time","Test Run Time (Min)","Discharge Pressure (SP)","Air Valve output"]:"EODD"==this.projectDetails.ProjectType&&(s=["Test Run","Test Start Time","Test End Time","Main Motor RPM","Test Run Time (Min)","Discharge Pressure (SP)","Motor HZ","Motor Power"]),e.unshift(s);const r=l.P6.aoa_to_sheet(e),c=l.P6.decode_range(r["!ref"]);for(let g=c.s.r;g<=c.e.r;++g)for(let x=c.s.c;x<=c.e.c;++x){const T=l.P6.encode_cell({r:g,c:x});r[T]&&(r[T].s||(r[T].s={}),r[T].s.alignment={horizontal:"center",vertical:"center"})}const f=l.P6.book_new();l.P6.book_append_sheet(f,r,"Sheet1"),l.NC(f,"ProjectTestRunData.xlsx")}pumpRPM(){this.cureentValueforGuage=this.chartData.PumpRPM.toFixed(2);const e=this.chartData.PumpRPMMax.toFixed(2),s={chart:{lowerLimit:this.chartData.PumpRPMMin.toString(),upperLimit:e.toString(),showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numberSuffix:" RPM",numberSuffixFontSize:"40"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.chartData.PumpRPMMin.toString(),maxValue:this.cureentValueforGuage.toString(),code:"#219653"},{minValue:this.cureentValueforGuage.toString(),maxValue:Number(e),code:"#D3D3D3"}]},dials:{dial:[{value:this.cureentValueforGuage+"RPM",bgHoverColor:"#cccccc",color:this.getNeedleColor_PumpRPM(this.cureentValueforGuage)}]}};this.dataSourcePumpRPM=s}formatPumpRPM(){return`Warning: ${this.chartData.PumpRPMMax.toFixed(2)}\nTrip: ${this.chartData.PumpRPMMin.toFixed(2)}`}getNeedleColor_PumpRPM(e){return e>=this.chartData.PumpRPMMin?"#219653":"#D3D3D3"}pumpRPMAirPressure(){this.cureentValueforGuage=this.chartData.AoddInAirPressPV.toFixed(2);const e={chart:{lowerLimit:this.chartData.inAirPTScaleMin.toString(),upperLimit:this.chartData.inAirPTScaleMax.toString(),showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numberSuffix:" BAR",numberSuffixFontSize:"20"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.chartData.inAirPTScaleMin.toString(),maxValue:this.cureentValueforGuage.toString(),code:"#219653"},{minValue:this.cureentValueforGuage.toString(),maxValue:this.chartData.inAirPTScaleMax.toString(),code:"#D3D3D3"}]},dials:{dial:[{value:this.cureentValueforGuage,bgHoverColor:"#cccccc",color:this.getNeedleColor_RPMAirPress(this.cureentValueforGuage)}]}};this.dataSourcePumpRPMAirPressure=e}formatPumpRPMAirPress(){return`Warning: ${this.chartData.inAirPTScaleMax.toFixed(2)}\nTrip: ${this.chartData.inAirPTScaleMin.toFixed(2)}`}getNeedleColor_RPMAirPress(e){return e>=this.chartData.inAirPTScaleMin?"#219653":"#D3D3D3"}dischargePressure(){this.cureentValueforGuage=(this.chartData.DischargePressurePV||0).toFixed(2);const e=this.chartData.DischargePTScaleMax.toFixed(2),s={chart:{lowerLimit:this.chartData.DischargePTScaleMin.toString(),upperLimit:e.toString(),showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numberSuffix:" BAR",numberSuffixFontColor:"#808080",numberSuffixFontSize:"20"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.chartData.DischargePTScaleMin.toString(),maxValue:this.chartData.DischargePThSP.toString(),code:"#219653"},{minValue:this.chartData.DischargePThSP.toString(),maxValue:this.chartData.DischargePThhSP.toString(),code:"#FFD12E"},{minValue:this.chartData.DischargePThhSP.toString(),maxValue:this.chartData.DischargePTScaleMax.toString(),code:"#FF9898"}]},dials:{dial:[{value:this.cureentValueforGuage+"%",bgHoverColor:"#cccccc",bgColor:this.colorChangeNeedle(this.cureentValueforGuage,this.chartData.DischargePTScaleMin,this.chartData.DischargePThSP,this.chartData.DischargePThhSP,e)}]}};this.dataSourceDischargePressure=s}formatDischargePress(){return`Warning: ${this.chartData.DischargePTScaleMax.toFixed(2)}\nTrip: ${this.chartData.DischargePTScaleMin.toFixed(2)}`}colorChangeNeedle(e,s,r,c,f){return 1!=this.chartData.DischargePThhEn?e>f?"#D3D3D3":"#219653":e>=s&&e<=r?"#219653":e>=r&&e<=c?"#FFD12E":e>=c&&e<=f?"#FF9898":""}dischargeFlow(){this.cureentValueforGuage=(this.chartData.DischargeFlow||0).toFixed(2);const e=this.chartData.FlowScaleMax.toFixed(2),s={chart:{lowerLimit:this.chartData.FlowScaleMin.toString(),upperLimit:e.toString(),showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numbersuffix:" L"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.chartData.FlowScaleMin.toString(),maxValue:this.cureentValueforGuage.toString(),code:"#219653"},{minValue:this.cureentValueforGuage.toString(),maxValue:this.chartData.FlowScaleMax.toString(),code:"#D3D3D3"}]},dials:{dial:[{value:this.cureentValueforGuage+"%",bgHoverColor:"#cccccc",color:this.getNeedleColor_DischargeFlow(this.cureentValueforGuage)}]}};this.dataSourceDischargeFlow=s}formatDischargeFlow(){return`Warning: ${this.chartData.FlowScaleMax.toFixed(2)}\nTrip: ${this.chartData.FlowScaleMin.toFixed(2)}`}getNeedleColor_DischargeFlow(e){return e<=this.chartData.FlowScaleMax?"#219653":"#FF9898"}getNeedleColor_InAirFT(e){return e<=this.chartData.inAirFTScaleMax?"#219653":"#FF9898"}getChartData(){this.dataSet2=[],"Endurance"==this.projectDetails.ProjectConfig?(this.col=["act_testruntime","DischargePressureSP","Set_MotorRPM","TestNo","InAirPressSP","endurance"],this.col1=["act_testruntime","DischargePressureSP","InAirPressSP","TestNo","endurance"]):(this.col=["act_testruntime","DischargePressureSP","Set_MotorRPM","TestNo","InAirPressSP","endurance"],this.col1=["act_testruntime","DischargePressureSP","InAirPressSP","TestNo"]),this.col.forEach(e=>{this.dataSet2.push({seriesname:e,data:[]})}),this.testsource2.forEach(e=>{Object.keys(e).forEach(s=>{const r=this.dataSet2.find(c=>c.seriesname==s);r&&r.data.push({value:e[s]})}),this.testRunTime=this.dataSet2[0].data}),this.dataSet2[3].data.map(e=>{this.chartTestxAxis.push({label:String(e.value)})}),this.dischPressure=this.dataSet2[1].data,this.Set_MotorRPM=this.dataSet2[2].data,this.InAirPressSP=this.dataSet2[4].data,this.testRunTime=this.dataSet2[5].data,"EODD"==this.projectDetails.ProjectType?(this.text="Motor Hz",this.chartDataset=[{seriesname:"Test Run Time (Min)",showValues:"1",data:this.testRunTime,numbersuffix:"Time"},{seriesname:"Motor Freq SP (Hz)",renderAs:"line",parentYAxis:"S",showValues:"0",data:this.Set_MotorRPM,numbersuffix:"Hz"},{seriesname:"Discharge Pressure (BAR)",renderAs:"line",parentYAxis:"S",showValues:"0",data:this.dischPressure}]):(this.text="Air Valve output",this.chartDataset=[{seriesname:"Test Run Time (Min)",showValues:"1",numbersuffix:" Time",data:this.testRunTime},{seriesname:"Air Valve output (%)",renderAs:"line",parentYAxis:"S",showValues:"0",data:this.InAirPressSP},{seriesname:"Discharge Pressure (BAR)",renderAs:"line",parentYAxis:"S",showValues:"0",data:this.dischPressure}]),this.barLineChart()}barLineChart(){this.dataSourceChart={chart:{xAxisname:"Test Run",pYAxisName:"Actual Test Time (In Minute)",sYAxisName:`${this.text} / Discharge Pressure`,plottooltext:"<b>$seriesname : </b>$dataValue",divlineColor:"#999999",divLineIsDashed:"1",divLineDashLen:"1",divLineGapLen:"1",toolTipColor:"white",toolTipBorderThickness:"0",toolTipBgColor:"#000000",toolTipBgAlpha:"80",toolTipBorderRadius:"2",toolTipPadding:"5",pnumbersuffix:" (BAR)",sYAxisMaxValue:"auto",showLabels:1,marginTop:20,theme:"fusion",exportEnabled:"1",formatNumberScale:"1",numberScaleValue:"1",numberScaleUnit:" (min)",rotateValues:"1"},categories:[{category:this.chartTestxAxis}],dataset:this.chartDataset},this.spinner.hide(),this.showChart=!0}isDisabledColSelect(e){return this.selectedValues.includes(e)}onSelectionChange1(e){this.selectedValues=e.value,this.dataSet.push(this.selectedValues)}onColSelectChange(){this.selectedValues.includes(this.toppings)||this.selectedValues.push(this.toppings),"SelectAll"==this.toppings&&(this.selectedValues=this.b)}removeTag(e){this.selectedValues=this.selectedValues.filter(s=>s!==e),"SelectAll"==e&&(this.selectedValues=[])}OnChangeAnno(e){console.log(e.target.checked,"event"),this.textCheck=1==this.isChecked?"Hide":"Show",this.isChecked=e.target.checked,this.getAnnotations(this.click),this.selectedDataChart()}onSelectionChange(){this.dataSet1=[],this.category=[];const e=this.click==this.testno?this.testno:this.click;this.showTimeChart=!1,this.selectedValues.length<=0?this.toastService.show({template:"Please Select the Parameteres!!",classname:"bg-warning",delay:3e3}):this.projectService.getTimeSeriesByIdForRunPro(this.ProjectId,e,this.jsStartDate,this.jsEndDate).subscribe(s=>{this.tableview=s.length>0,this.chartSource=s,s&&s.length?(this.selectedValues.forEach(r=>{this.dataSet1.push({seriesname:this.showColumns[r],noname:r,data:[]})}),this.time={label:"DateTime",data:[]},this.chartSource.forEach(r=>{Object.keys(r).forEach(c=>{const f=this.dataSet1.find(g=>g.noname===c);f&&f.data.push({value:r[c]}),"DateTime"==c&&this.time.data.push(r.DateTime)})}),this.selectedDataChart(),this.getAnnotations(e),this.getStatisticalTableData()):this.toastService.show({template:"No data for selected dates!!",classname:"bg-warning",delay:3e3})})}selectedDataChart(){const e={chart:{theme:"fusion"},categories:[{category:this.testsource.slice(1).map(r=>({label:r.label}))}],dataset:this.dataSet1};this.spinner.hide();const s=[];e.dataset.forEach(r=>{const c=[];r.data.forEach((g,x)=>{const T=new Date(this.time.data[x]);T.setHours(T.getHours()-5),T.setMinutes(T.getMinutes()-30);const F={projectid:this.ProjectId,testno:+this.click,paraname:r.seriesname,paratimestamp:this.formatDate(new Date(T))},y=this.checkExistObject(F),C={x:T,y:g.value,click:function(N){const Z=document.querySelector(".open-annotation");Z.dataset.seriesName=N.dataSeries.name,Z.dataset.x=N.dataPoint.x,y?(Z.dataset.anid=y.anid,Z.dataset.remark=y.remark):(Z.dataset.anid="",Z.dataset.remark=""),Z.click()}};1==this.isChecked&&y&&(C.indexLabel=y.remark,C.indexLabelMaxWidth="100",C.markerType="triangle",C.markerSize=20),c.push(C)}),s.push({name:r.seriesname,dataPoints:c})}),this.dashService.timeSeriesData.next(s),this.showTimeChart=!0}getAnnotations(e){this.dataAnalyticsService.selectAnnotation({projectid:this.ProjectId,testno:e,uid:this.uid}).subscribe(s=>{this.annotations=s,this.selectedDataChart()})}openDateTimeModal(){const r={startDate:this.fromDate,endDate:this.toDate},c=this.modalService.open(M.Z);c.componentInstance.inputData=r,c.result.then(f=>{const x=new Intl.DateTimeFormat("en-GB",{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),T=new Date(f.dateData.startDate.year,f.dateData.startDate.month-1,f.dateData.startDate.day,f.dateData.startTime.hour,f.dateData.startTime.minute,0),F=x.format(T),y=new Date(f.dateData.endDate.year,f.dateData.endDate.month-1,f.dateData.endDate.day,f.dateData.endTime.hour,f.dateData.endTime.minute,0),C=x.format(y);this.formattedDateTimeRange=F+" - "+C,this.jsStartDate=T,this.jsEndDate=y,this.jsStartDate=(0,P.p6)(this.jsStartDate,"YYYY-MM-dd HH:mm:ss","en_US"),this.jsEndDate=(0,P.p6)(this.jsEndDate,"YYYY-MM-dd HH:mm:ss","en_US")},f=>{console.log(`Modal dismissed with: ${f}`)})}openModal(e){const s={title:e,projectId:this.ProjectId,testId:this.click,mode:"add"},r=this.modalService.open(d._,{size:"lg"});r.componentInstance.inputData=s,r.result.then(c=>{this.getFavorite()},c=>{console.log(`Modal dismissed with: ${JSON.stringify(c)}`)})}handleAnnotationModal(e){const s=e.target,{seriesName:r,x:c,anid:f,remark:g}=s.dataset,x={projectid:this.ProjectId,testno:this.click,paraname:r,paratimestamp:this.formatDate(new Date(c)),createdbyuid:this.uid,createdbydate:this.formatDate(new Date),updatedbyid:this.uid,updatedbydate:this.formatDate(new Date),anid:f,remark:g},T=this.modalService.open(p.c,{size:"lg"});T.componentInstance.inputData=x,T.result.then(()=>{this.getAnnotations(this.click),this.selectedDataChart()},()=>{this.getAnnotations(this.click),this.selectedDataChart()})}openMaintenanceModal(){const e={projectId:this.ProjectId,testId:this.click,mode:"add"},s=this.modalService.open(u.l,{size:"lg"});s.componentInstance.inputData=e,s.result.then(r=>{},r=>{console.log(`Modal dismissed with: ${JSON.stringify(r)}`)})}deletFav(){confirm("Are you sure you want to remove from favorite?")&&this.projectService.deleteFav(this.fid).subscribe({next:()=>{this.toastService.show({template:"Removed from Favorite!!",classname:"bg-success",delay:3e3}),this.favSelect=!1},error:s=>{console.warn(s),this.toastService.show({template:"Failed to remove from favorite!!",classname:"bg-danger",delay:3e3})}})}onSort({column:e,direction:s},r=""){if(this.headers)for(const c of this.headers)c.appSortable!==e&&(c.direction="");""===s||""===e?(this.projectTestRunsList=this.tempProjectTestRunsList,this.sliceProjects(this.page)):(this.projectTestRunsList="number"==r?[...this.tempProjectTestRunsList].sort((c,f)=>{const g=O(+c[e],+f[e]);return"asc"===s?g:-g}):"date"==r?[...this.tempProjectTestRunsList].sort((c,f)=>{const g=O(+new Date(c[e]),+new Date(f[e]));return"asc"===s?g:-g}):[...this.tempProjectTestRunsList].sort((c,f)=>{const g=O(c[e],f[e]);return"asc"===s?g:-g}),this.sliceProjects(this.page))}formatTimeModalDate(){const s=new Intl.DateTimeFormat("en-GB",{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),c=s.format(this.toDate),g=s.format(this.fromDate);this.formattedDateTimeRange=g+" - "+c}getCurrentDateTime(){return this.formatDate(new Date)}formatDate(e){return`${e.getFullYear()}-${this.padZero(e.getMonth()+1)}-${this.padZero(e.getDate())}T${this.padZero(e.getHours())}:${this.padZero(Math.abs(e.getMinutes()))}:${this.padZero(e.getSeconds())}.000Z`}padZero(e){return e<10?`0${e}`:`${e}`}sliceProjects(e){this.selectedProjectTestRunsList=this.projectTestRunsList.slice((e-1)*this.pageSize,e*this.pageSize)}checkExistObject(e){if(!this.annotations)return"";let s;return this.annotations.some(r=>{const{projectid:c,testno:f,paratimestamp:g,paraname:x}=r;(0,m.isEqual)({projectid:c,testno:f,paratimestamp:g,paraname:x},e)&&(s=r)}),s}static#t=this.\u0275fac=function(s){return new(s||n)(t.Y36(o.r),t.Y36(E.k),t.Y36(R.FF),t.Y36(I.t2),t.Y36(L.s),t.Y36(V.Y),t.Y36(Y.u),t.Y36(q.gz),t.Y36(B._),t.Y36(J.p))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-project-analysis"]],viewQuery:function(s,r){if(1&s&&(t.Gf(H,5),t.Gf(k,5)),2&s){let c;t.iGM(c=t.CRH())&&(r.confirmationModal=c.first),t.iGM(c=t.CRH())&&(r.headers=c)}},standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[["type","ball-scale-multiple"],["class","project-analysis",4,"ngIf"],[1,"project-analysis"],[1,"row","sec-first","mt-3"],["class","top-card col-12 col-md-2",4,"ngFor","ngForOf"],[3,"cardTitle","options"],["type","mscombidy2d",3,"width","height","dataSource"],[3,"hidHeader","options"],[1,"col-md-12","d-flex","justify-content-end","px-3","mb-1"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-file-csv","fw-bolder"],[1,"table-responsive"],["class","table table-styling",4,"ngIf"],[1,"d-flex","justify-content-end","align-items-center","gap-3"],[1,"m-0",3,"pageSize","collectionSize","page","pageChange"],[1,"dv-favourite","mt-3"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["role","button",1,"btn","btn-info",3,"click"],[1,"fas","fa-history"],[1,"far","fa-file-alt"],["class","btn btn-info","role","button",3,"click",4,"ngIf"],["class","btn btn-warning","role","button",3,"click",4,"ngIf"],[1,"col-md-12","kpiCharts","mt-3"],["cardTitle","",3,"options"],[1,"row"],["class","overflow-hidden",4,"ngIf"],[1,"col-md-12","parameterTrendView","mt-3"],["cardTitle","Parameter Trend View",3,"options"],[1,"row","d-flex","align-items-start","justify-content-between"],[1,"col-md-4","col-sm-12"],[1,"form-group"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","","disabled","","selected",""],["style","font-weight: bold;",3,"value","disabled",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-12","d-flex","align-items-center","justify-content-end"],[1,"form-check","px-2","d-flex","justify-content-start"],["for","defaultCheck1",1,"form-check-label"],["type","checkbox","value","","id","flexCheckChecked",1,"form-check-input",3,"ngModel","ngModelChange","change"],[1,"d-flex","justify-content-end","dateRangePicker"],[1,"custom-datetime-range-span",3,"click"],[1,"fas","fa-calendar"],["type","button",1,"btn","btn-primary","p-1","px-3","text-center","btn-apply",2,"font-size","13px",3,"click"],[1,"col-12","col-sm-12","d-flex","align-items-start"],[1,"col-md-12"],[1,"tag-input"],["class","tag",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["class","mt-3 col-md-12 parameterTrendView",4,"ngIf"],[1,"top-card","col-12","col-md-2"],["blockClass","project-analysis-top-card",3,"hidHeader","cardClass",4,"ngIf"],["blockClass","project-analysis-top-card",3,"hidHeader","cardClass"],[1,"text-white","d-flex","gap-2","align-items-center","first-label"],[1,"text-white","sec-label"],[4,"ngIf"],[1,"table","table-styling"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"fas","fa-star"],["role","button",1,"btn","btn-warning",3,"click"],[1,"overflow-hidden"],[1,"row","align-items-end","pt-0"],[1,"col-md-2","card-rt-br","kpi-chart-card-mh"],["class","liveTest-heading heading-style mb-1 text-center",4,"ngIf"],["class","position-relative d-flex flex-column align-items-center justify-content-center",3,"title",4,"ngIf"],[1,"liveTest-heading","heading-style","mb-1","text-center"],[1,"position-relative","d-flex","flex-column","align-items-center","justify-content-center",3,"title"],[3,"width","height","type","dataFormat","dataSource"],[1,"dv-p-main"],[1,"text-center","gauge-chart-bt-title"],[2,"font-weight","600","text-align","center"],[1,"col-md-4","projectDetails"],[1,"liveTest-heading","date-time-title","heading-style","mb-1",3,"ngStyle"],[1,"row","m-rl-5"],[1,"col-md-4"],[1,"card","mycard"],[1,"d-flex","align-items-start","pe-4"],[1,"text-nowrap","text-white"],[1,"p-1","fw-bold","text-white"],[1,"text-nowrap"],["class","text-nowrap",4,"ngIf"],["class","p-1 fw-bold text-white",4,"ngIf"],[1,"text-center"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mb-3"],[2,"height","40px","margin-bottom","15px"],["src","../../../assets/images/motor.ico","height","40px","width","30px",1,"apply-filter"],[1,"d-flex","align-items-center","justify-content-center","fw-bold"],[2,"text-align","center"],[1,"text-nowrap","mb-1"],[2,"color","gray"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mb-2"],[1,"position-relative","d-flex","flex-column","align-items-center","justify-content-center"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mb-1","testtt"],[1,"d-flex","align-items-center","justify-content-center","fw-bold","mt-2"],[2,"color","gray","margin-bottom","-10px"],[2,"font-weight","bold",3,"value","disabled"],[1,"tag"],[1,"remove",3,"click"],[1,"fas","fa-times"],[3,"_size"],["data-ss","sda",1,"open-annotation","d-none",3,"click"],[1,"mt-3","col-md-12","parameterTrendView"],["cardTitle","Statistical Data",3,"options"],[1,"col-md-6"],[1,"title","fw-bold"],[1,"col-md-6","d-flex","justify-content-end","dateRangePicker","px-3","mb-1"],[1,"table","table-styling","text-center"],[2,"background-color","lightgray"],["scope","col",4,"ngFor","ngForOf"],[2,"font-size","13px"],[4,"ngFor","ngForOf"],["scope","col"]],template:function(s,r){1&s&&(t._UZ(0,"ngx-spinner",0),t.YNc(1,Ft,62,27,"div",1)),2&s&&(t.xp6(1),t.Q6J("ngIf",r.showChart))},dependencies:[P.ez,P.mk,P.sg,P.O5,P.PC,P.JJ,P.uU,v.m,w.YN,w.Kr,w.Wl,w.EJ,w.JJ,w.On,K.A,R.N9,I.Ro,b.Qf,b.PZ,j.Z,i.lN,S.LD],styles:[".project-analysis .top-card{padding:0 5px!important}  .project-analysis .test-card{padding:0 10px;font-size:11px;font-weight:500;display:grid;place-items:center;min-height:65px;margin:0}  .project-analysis .test-card+svg{width:25px;margin:0 5px}  .project-analysis .sec-first{padding:0 15px}  .project-analysis .sec-first .card-body{height:110px!important}  .project-analysis .testtt{border:2px solid rgba(0,0,0,.116);width:155px;border-radius:5px}  .project-analysis .mycard{background-color:#5072a7;border:.2px gray;box-shadow:0 4px 8px #0003,0 6px 20px #00000030;margin-bottom:10px;font-size:11px;padding:5px;color:#fff}  .project-analysis .mycard h5{font-size:12px}  .project-analysis .mycard h6{color:#fff;font-size:10px}  .project-analysis .projectDetails .col-md-4{padding:3px}  .project-analysis .test-bench-sequence .test-card{border-radius:5px;color:#fff}  .project-analysis .test-bench-sequence .card .card-header{padding:10px}  .project-analysis .test-bench-sequence .card-body{height:unset!important}  .project-analysis .kpiCharts .card-header{display:none}  .project-analysis .parameterTrendView .card-header{display:none}  .project-analysis .card-body{height:unset!important}  .project-analysis .liveTest-heading{margin-bottom:20px!important;text-align:center}  .project-analysis .liveTest-heading.date-time-title{margin-bottom:30px!important}  .project-analysis .card-rt-br{border-right:1px solid rgba(51,51,51,.2)}  .project-analysis .kpi-chart-card-mh{min-height:197px}  .project-analysis .gauge-chart-bt-title{min-height:20px}  .project-analysis .pt40{padding-top:40px}  .project-analysis .mt20{margin-top:20px}  .project-analysis .pb20{padding-bottom:20px}  .project-analysis .m-rl-5{margin:0 5px}  .project-analysis .custom-datetime-range-span{padding:2px 8px;border:solid 1px rgb(206,212,218);border-radius:20px}  .project-analysis .custom-datetime-range-span i{margin-right:15px}  .project-analysis .card .card-body{padding:10px 8px!important}  .project-analysis .btn-apply{padding:2px 8px!important;margin-left:5px}@media only screen and (min-width: 769px){  .project-analysis .top-card:first-child{padding-left:0!important}  .project-analysis .top-card:last-child{padding-right:0!important}  .project-analysis .cust-col-1{width:11%!important;margin:0;display:flex;padding:0}  .project-analysis .cust-col-1:first-child{margin-left:10px}  .project-analysis .test-card{width:130px}  .project-analysis .project-analysis-top-card{position:relative;padding:10px!important}  .project-analysis .project-analysis-top-card .first-label{padding:10px 0;position:absolute;top:0;font-size:15px}  .project-analysis .project-analysis-top-card .sec-label{position:absolute;bottom:0;font-size:15px;font-weight:700}  .project-analysis .arrow-down{display:none!important}  .project-analysis .arrow-right{display:grid;place-items:center;margin:0}  .project-analysis .breadcrumb .breadcrumb-item:last-child{padding-right:0}}@media only screen and (max-width: 768px){  .project-analysis .top-card{padding:5px!important}  .project-analysis .project-analysis-top-card{position:relative;padding:10px!important}  .project-analysis .project-analysis-top-card .first-label{padding:10px 0;position:absolute;top:0;font-size:12px}  .project-analysis .project-analysis-top-card .sec-label{position:absolute;bottom:0;font-size:16px}  .project-analysis .arrow-right{display:none!important}  .project-analysis .arrow-down{text-align:center;margin:15px 0}  .project-analysis .breadcrumb-item{padding:2px 10px 4px;width:100%}  .project-analysis .breadcrumb-item a{float:right}  .project-analysis .breadcrumb-item{padding-right:0}}  .project-analysis ul.breadcrumb{padding-right:0}  .project-analysis .breadcrumb-item+.breadcrumb-item:before{content:none!important}  .project-analysis .breadcrumb-item{padding:2px 10px}  .project-analysis select.form-control{background-color:#e4e4e4!important;line-height:15px}  .project-analysis select.form-control option:disabled{color:#878787}  .project-analysis .tag-input{display:flex;flex-wrap:wrap;align-items:center;margin:0}  .project-analysis .tag{background-color:#6c757d;color:#fff;padding:6px 8px;margin:0 4px;display:flex;align-items:center;border-radius:20px;font-size:10px}  .project-analysis .remove{cursor:pointer;margin-left:4px;font-weight:700}  .selectedRowColor{background-color:#d3d3d3}  option:disabled{background-color:#eef075}  .form-check label{cursor:pointer;margin-right:25px}"]})}return n})()},589:(U,A,h)=>{h.d(A,{Y:()=>j});var P=h(5449),t=h(6814),i=h(9468),S=h(9862),b=h(7635);let j=(()=>{class v{constructor(d,u){this.http=d,this.authService=u}getLastRunData(){return this.http.get(`${P.N.apiUrl}/getLastRunData`)}getListView(d,u){return this.http.post(`${P.N.apiUrl}/getListView`,{fromDate:d,toDate:u})}getProjectDetails(d){return this.http.post(`${P.N.apiUrl}/getProjectDetails`,{id:d})}getCurrentBenchDetails(d){return this.http.post(`${P.N.apiUrl}/getCurrentBenchDetails`,{id:d})}getTableData(d,u,_,l){return this.http.post(`${P.N.apiUrl}/getRunningStats`,{id:d,no:u,start:_,end:l})}getProjectAnalysis(d,u){return this.http.post(`${P.N.apiUrl}/getProjectAnalysis`,{id:d,no:u})}getTestBenchSequence(d,u){return this.http.post(`${P.N.apiUrl}/getTestBenchseq`,{id:d,no:u})}getTimeSeriesById(d,u,_){return this.http.post(`${P.N.apiUrl}/getTimeSeriesbyid`,{projectConfig:d,id:u,no:_})}getTimeSeriesByIdForRunPro(d,u,_,l){return this.http.post(`${P.N.apiUrl}/getTimeSeriesDatabyid`,{id:d,no:u,start:_,end:l})}getProjectRunTime(d,u){return this.http.post(`${P.N.apiUrl}/getProjectTime`,{id:d,no:u})}getUpdatePanelStatus(d,u,_,l,m,a){const p=this.authService.getFullNameFromToken();return this.http.post(`${P.N.apiUrl}/UpdatePanelStatus`,{group:d,status:u,date:_,message:l,uid:p.uid,projectid:m,no:a})}getAnalysisData(d,u,_,l){return this.http.post(`${P.N.apiUrl}/getAnalysisData`,{id:d,start:u,end:_,data:l})}createMaintenance(d,u,_,l,m){const a=this.authService.getFullNameFromToken(),p=(0,t.p6)(new Date,"YYYY-MM-dd HH:mm:ss","en_US"),o=(0,t.p6)(new Date,"YYYY-MM-dd HH:mm:ss","en_US"),E=(0,t.p6)(new Date(m),"YYYY-MM-dd HH:mm:ss","en_US");return this.http.post(`${P.N.apiUrl}/CreateMaintenance`,{data:{projectid:d,testno:u,reason:_,desc:l,createuid:a.uid,updateid:a.uid,createdate:p,updatedate:o,issuecreateddate:E}})}selectUpdateMaintenance(d,u,_,l){const m=this.authService.getFullNameFromToken(),a=(0,t.p6)(new Date(l),"YYYY-MM-dd HH:mm:ss","en_US"),p=(0,t.p6)(new Date,"YYYY-MM-dd HH:mm:ss","en_US");return this.http.post(`${P.N.apiUrl}/UpdateMaintenance`,{mid:d,data:[`reason='${u}'`,`description='${_}'`,`updatedbyid=${m.uid}`,`updateddate='${p}'`,`issuecreateddate='${a}'`]})}deleteMaintenance(d){return this.http.post(`${P.N.apiUrl}/deleteMaintenance`,{mid:d})}createNote(d,u,_,l,m){const p={uid:this.authService.getFullNameFromToken().uid,projectid:d,testno:u,remarks:_,updateddate:m,createddate:l};return this.http.post(`${P.N.apiUrl}/CreateNote`,{data:p})}createFav(d,u,_,l){const a={uid:this.authService.getFullNameFromToken().uid,projectid:d,testno:u,favremark:_,updatedate:l,status:!0};return this.http.post(`${P.N.apiUrl}/CreateFav`,{data:a})}updateUserNote(d,u){const _=(0,t.p6)(new Date,"YYYY-MM-dd HH:mm:ss","en_US");return this.http.post(`${P.N.apiUrl}/UpdateNote`,{id:d,data:[`remarks='${u}'`,`updateddate='${_}'`]})}deleteUserNote(d){return this.http.post(`${P.N.apiUrl}/deleteNote`,{id:d})}deleteFav(d){return this.http.post(`${P.N.apiUrl}/deleteFav`,{fid:d})}getAttach(d,u,_,l,m,a){return this.http.post(`${P.N.apiUrl}/getSeriesReport`,{projectId:d,headers:u,value:_,match:l,fromDate:m,toDate:a},{responseType:"blob"})}getAmbientData(d,u,_){return this.http.post(`${P.N.apiUrl}/getAmbiantData`,{data:_,start:d,end:u})}getAmbientReport(d,u,_){return this.http.post(`${P.N.apiUrl}/getAmbiantReport`,{data:_,start:d,end:u},{responseType:"blob"})}getGroupCReport(d,u){return this.http.post(`${P.N.apiUrl}/getGroupCReport`,{start:d,end:u},{responseType:"blob"})}getAlarmReport(d,u){return this.http.post(`${P.N.apiUrl}/getAlarmReport`,{start:d,end:u},{responseType:"blob"})}getTankReport(d,u,_){return this.http.post(`${P.N.apiUrl}/getTankReport`,{data:_,start:d,end:u},{responseType:"blob"})}getAlarmData(d,u){return this.http.post(`${P.N.apiUrl}/getAlarmData`,{start:d,end:u})}getGroupCData(d,u){return this.http.post(`${P.N.apiUrl}/getAllGroupC`,{start:d,end:u})}static#t=this.\u0275fac=function(u){return new(u||v)(i.LFG(S.eN),i.LFG(b.u))};static#e=this.\u0275prov=i.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},7844:(U,A,h)=>{h.d(A,{l:()=>M});var P=h(6814),t=h(7818),i=h(9468),S=h(5399),b=h(589),j=h(7911),v=h(6223);let M=(()=>{class d{constructor(_,l,m){this.activeModal=_,this.projectService=l,this.toastService=m,this.reason=""}ngOnInit(){console.log(this.inputData),this.inputData.reason&&(this.reason=this.inputData.reason),this.inputData.description&&(this.remark=this.inputData.description),this.currrentDate=this.formateDate(),console.log(this.currrentDate)}createMaintenance(){this.projectService.createMaintenance(this.inputData.projectId,this.inputData.testId,this.reason,this.remark,this.currrentDate).subscribe({next:_=>{console.log(_),this.toastService.show({template:"Inserted Succesfully!!",classname:"bg-success",delay:3e3})},error:()=>{this.toastService.show({template:"Something went wrong",classname:"bg-danger",delay:3e3})}})}updateMaintenance(){console.log(this.reason,this.remark),this.projectService.selectUpdateMaintenance(this.inputData.mid,this.reason,this.remark,this.currrentDate).subscribe({next:_=>{console.log(_),this.toastService.show({template:"Updated Succesfully!!",classname:"bg-success",delay:3e3})},error:()=>{this.toastService.show({template:"Something went wrong!!",classname:"bg-danger",delay:3e3})}})}selectDataAndClose(){this.reason?this.remark?("add"==this.inputData.mode?this.createMaintenance():this.updateMaintenance(),this.activeModal.close({isSearch:!1,isSuccess:!0})):this.toastService.show({template:"Please enter the description",classname:"bg-danger",delay:3e3}):this.toastService.show({template:"Please select the reason",classname:"bg-danger",delay:3e3})}closeModal(){this.activeModal.dismiss({isSearch:!1})}formateDate(){let _=new Date;this.inputData.issuecreateddate&&(_=new Date(this.inputData.issuecreateddate));const l=_.getMonth()+1,m=_.getDate(),a=_.getHours(),p=_.getMinutes();return`${_.getFullYear()}-${this.padding10(l)}-${this.padding10(m)}T${this.padding10(a)}:${this.padding10(p)}`}padding10(_){return _>=10?_:`0${_}`}static#t=this.\u0275fac=function(l){return new(l||d)(i.Y36(S.Kz),i.Y36(b.Y),i.Y36(j.k))};static#e=this.\u0275cmp=i.Xpm({type:d,selectors:[["app-project-maintenance-log-modal"]],inputs:{inputData:"inputData"},standalone:!0,features:[i.jDz],decls:48,vars:6,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"form-group"],["for",""],["type","text","disabled","",1,"form-control",3,"value"],["type","datetime-local","name","date","id","",1,"form-control",3,"ngModel","ngModelChange"],["name","reason",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected",""],["value","Calibration"],["value","Mechanical"],["value","Electrical"],["value","Others"],["name","remark",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","justify-content-end"],[1,"col-xl-2","col-md-2"],["type","button","ngbAutofocus","",1,"btn","btn-block","d-flex","align-items-center","gap-2","btn-primary","mb-4","custom-btn",3,"click"],[1,"fas","fa-check"],["type","button",1,"btn","btn-block","btn-primary","mb-4","custom-btn",3,"click"],[1,"fas","fa-times"]],template:function(l,m){1&l&&(i.TgZ(0,"div",0)(1,"h6",1),i._uU(2,"Add Maintenance log"),i.qZA(),i.TgZ(3,"button",2),i.NdJ("click",function(){return m.closeModal()}),i.TgZ(4,"span",3),i._uU(5,"\xd7"),i.qZA()()(),i.TgZ(6,"div",4)(7,"div",5)(8,"form")(9,"div",6)(10,"label",7),i._uU(11,"Project ID:"),i.qZA(),i._UZ(12,"input",8),i.qZA(),i.TgZ(13,"div",6)(14,"label",7),i._uU(15,"Test No:"),i.qZA(),i._UZ(16,"input",8),i.qZA(),i.TgZ(17,"div",6)(18,"label",7),i._uU(19,"Issue Created Date"),i.qZA(),i.TgZ(20,"input",9),i.NdJ("ngModelChange",function(p){return m.currrentDate=p}),i.qZA()(),i.TgZ(21,"div",6)(22,"label"),i._uU(23,"Select Reason"),i.qZA(),i.TgZ(24,"select",10),i.NdJ("ngModelChange",function(p){return m.reason=p}),i.TgZ(25,"option",11),i._uU(26,"Select Reason"),i.qZA(),i.TgZ(27,"option",12),i._uU(28,"Calibration"),i.qZA(),i.TgZ(29,"option",13),i._uU(30,"Mechanical"),i.qZA(),i.TgZ(31,"option",14),i._uU(32,"Electrical"),i.qZA(),i.TgZ(33,"option",15),i._uU(34,"Others"),i.qZA()()(),i.TgZ(35,"div",6)(36,"label",7),i._uU(37,"Description:"),i.qZA(),i.TgZ(38,"textarea",16),i.NdJ("ngModelChange",function(p){return m.remark=p}),i.qZA()()()(),i.TgZ(39,"div",17)(40,"div",18)(41,"button",19),i.NdJ("click",function(){return m.selectDataAndClose()}),i._UZ(42,"i",20),i._uU(43),i.qZA()(),i.TgZ(44,"div",18)(45,"button",21),i.NdJ("click",function(){return m.closeModal()}),i._UZ(46,"i",22),i._uU(47," Cancel "),i.qZA()()()()),2&l&&(i.xp6(12),i.Q6J("value",m.inputData.projectId),i.xp6(4),i.Q6J("value",m.inputData.testId),i.xp6(4),i.Q6J("ngModel",m.currrentDate),i.xp6(4),i.Q6J("ngModel",m.reason),i.xp6(14),i.Q6J("ngModel",m.remark),i.xp6(5),i.hij(" ","add"===m.inputData.mode?"Add":"Update"," "))},dependencies:[P.ez,t.m,v._Y,v.YN,v.Kr,v.Fj,v.EJ,v.JJ,v.JL,v.On,v.F],styles:[".modal-header[_ngcontent-%COMP%]{padding:10px;justify-content:space-between}"]})}return d})()},814:(U,A,h)=>{h.d(A,{_:()=>d});var P=h(6814),t=h(7818),i=h(9468),S=h(5766),b=h(5399),j=h(589),v=h(7911),M=h(6223);let d=(()=>{class u{constructor(l,m,a,p){this.navigationService=l,this.activeModal=m,this.projectService=a,this.toastService=p,this.remark=""}ngOnInit(){console.log(this.inputData),this.inputData.remark&&(this.remark=this.inputData.remark)}createNote(){const l=new Date;this.projectService.createNote(this.inputData.projectId,this.inputData.testId,this.remark,l.toLocaleString(),l.toLocaleString()).subscribe(m=>{console.log(m),this.toastService.show(200===m.Status?{template:"User note inserted!!",classname:"bg-success",delay:3e3}:{template:"Something went wrong, Please try again",classname:"bg-danger",delay:3e3})})}createFav(){this.projectService.createFav(this.inputData.projectId,this.inputData.testId,this.remark,new Date).subscribe(m=>{console.log(m),200===m.Status?(this.navigationService.notifyNavbarFunction(),this.toastService.show({template:"Favorites remark inserted!!",classname:"bg-success",delay:3e3})):this.toastService.show({template:"Something went wrong, Please try again",classname:"bg-danger",delay:3e3})})}updateNote(){this.projectService.updateUserNote(this.inputData.nid,this.remark).subscribe(l=>{console.log(l),this.toastService.show(200===l.Status?{template:"User note updated!!",classname:"bg-success",delay:3e3}:{template:"Something went wrong, Please try again",classname:"bg-danger",delay:3e3})})}selectDataAndClose(){"favourite"===this.inputData.title.toLowerCase()?"add"==this.inputData.mode&&this.createFav():"add"==this.inputData.mode?this.createNote():this.updateNote(),console.log("here"),this.activeModal.close({isSearch:!0,data:"successs"})}closeModal(){this.activeModal.dismiss({isSearch:!1})}static#t=this.\u0275fac=function(m){return new(m||u)(i.Y36(S.f),i.Y36(b.Kz),i.Y36(j.Y),i.Y36(v.k))};static#e=this.\u0275cmp=i.Xpm({type:u,selectors:[["app-project-note-fav-modal"]],inputs:{inputData:"inputData"},standalone:!0,features:[i.jDz],decls:30,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"form-group"],["for",""],["type","text","disabled","",1,"form-control",3,"value"],["name","remark",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","justify-content-end"],[1,"col-xl-2","col-md-2","px-0"],["type","button","ngbAutofocus","",1,"btn","btn-block","btn-primary","mb-4","custom-btn",3,"click"],[1,"fas","fa-check"],[1,"col-xl-2","col-md-2"],["type","button",1,"btn","btn-block","btn-primary","mb-4","custom-btn",3,"click"],[1,"fas","fa-times"]],template:function(m,a){1&m&&(i.TgZ(0,"div",0)(1,"h6",1),i._uU(2),i.qZA(),i.TgZ(3,"button",2),i.NdJ("click",function(){return a.closeModal()}),i.TgZ(4,"span",3),i._uU(5,"\xd7"),i.qZA()()(),i.TgZ(6,"div",4)(7,"div",5)(8,"form")(9,"div",6)(10,"label",7),i._uU(11,"Project ID:"),i.qZA(),i._UZ(12,"input",8),i.qZA(),i.TgZ(13,"div",6)(14,"label",7),i._uU(15,"Test ID:"),i.qZA(),i._UZ(16,"input",8),i.qZA(),i.TgZ(17,"div",6)(18,"label",7),i._uU(19,"Remarks:"),i.qZA(),i.TgZ(20,"textarea",9),i.NdJ("ngModelChange",function(o){return a.remark=o}),i.qZA()()()(),i.TgZ(21,"div",10)(22,"div",11)(23,"button",12),i.NdJ("click",function(){return a.selectDataAndClose()}),i._UZ(24,"i",13),i._uU(25),i.qZA()(),i.TgZ(26,"div",14)(27,"button",15),i.NdJ("click",function(){return a.closeModal()}),i._UZ(28,"i",16),i._uU(29," Cancel "),i.qZA()()()()),2&m&&(i.xp6(2),i.Oqu(a.inputData.title),i.xp6(10),i.Q6J("value",a.inputData.projectId),i.xp6(4),i.Q6J("value",a.inputData.testId),i.xp6(4),i.Q6J("ngModel",a.remark),i.xp6(5),i.hij(" ","add"===a.inputData.mode?"Add":"Update"," "))},dependencies:[P.ez,t.m,M._Y,M.Fj,M.JJ,M.JL,M.On,M.F],styles:[".modal-header[_ngcontent-%COMP%]{padding:10px;justify-content:space-between}"]})}return u})()}}]);