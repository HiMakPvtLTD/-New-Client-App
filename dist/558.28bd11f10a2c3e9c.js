"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[558],{2558:(wt,P,l)=>{l.r(P),l.d(P,{NgbdSortableHeaderDirective:()=>j,default:()=>Zt});var u=l(6814),t=l(9468),y=l(1043),b=l(8856),D=l(8351),C=l(3182),Z=l(7818),w=l(8193),F=l(814),R=l(7844),E=l(8837),p=l(1486),v=l(6990),k=l(6655),U=l(9074),O=l(7911),A=l(5399),S=l(8672),I=l(5026),V=l(589),q=l(7635),N=l(8642),L=l(4143),f=l(6223),J=l(220);function H(i,c){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,a=t.oxw(2);t.xp6(1),t.Oqu(a.projectDetails[e.property])}}function Y(i,c){if(1&i&&(t.TgZ(0,"app-card",51)(1,"label",52),t._UZ(2,"i"),t._uU(3),t.qZA(),t.TgZ(4,"label",53),t.YNc(5,H,2,1,"span",54),t.qZA()()),2&i){const e=t.oxw().$implicit,a=t.oxw(2);t.s9C("cardClass",e.background),t.Q6J("hidHeader",!0),t.xp6(2),t.Gre("feather float-start ",e.icon,""),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Q6J("ngIf",a.projectDetails)}}function B(i,c){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,a=t.oxw(2);t.xp6(1),t.Oqu(a.projectDetails[e.property])}}function K(i,c){if(1&i&&(t.TgZ(0,"app-card",51)(1,"label",52),t._UZ(2,"i"),t._uU(3),t.qZA(),t.TgZ(4,"label",53),t.YNc(5,B,2,1,"span",54),t.qZA()()),2&i){const e=t.oxw().$implicit,a=t.oxw(2);t.s9C("cardClass","Running"===a.projectDetails[e.property]?"bg-c-green":"Stop"===a.projectDetails[e.property]?"bg-c-red":"bg-secondary"),t.Q6J("hidHeader",!0),t.xp6(2),t.Gre("feather float-start ",e.icon,""),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Q6J("ngIf",a.projectDetails)}}function Q(i,c){if(1&i&&(t.TgZ(0,"div",49),t.YNc(1,Y,6,7,"app-card",50),t.YNc(2,K,6,7,"app-card",50),t.qZA()),2&i){const e=c.last;t.xp6(1),t.Q6J("ngIf",!e),t.xp6(1),t.Q6J("ngIf",e)}}const z=function(i){return{"bg-secondary":i}};function G(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr",57),t.NdJ("click",function(){const s=t.CHM(e),o=s.$implicit,n=s.index,r=t.oxw(3);return t.KtG(r.handleRowClick(o.TestNo,n))}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"number"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"number"),t.qZA()()}if(2&i){const e=c.$implicit,a=c.index,s=t.oxw(3);t.Q6J("ngClass",t.VKq(29,z,a===s.selectedRow)),t.xp6(2),t.Oqu(null==e?null:e.TestNo),t.xp6(2),t.Oqu(t.Dn7(5,9,null==e?null:e.StartDateTime,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(t.Dn7(8,13,null==e?null:e.EndDateTime,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(t.xi3(11,17,null==e?null:e.PumpRPM,"1.2-2")),t.xp6(3),t.Oqu(null==e?null:e.endurance),t.xp6(2),t.Oqu(t.xi3(16,20,null==e?null:e.DischargePressureSP,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(19,23,null==e?null:e.Set_MotorRPM,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(22,26,null==e?null:e.MotorKW,"1.1-1"))}}function W(i,c){if(1&i&&(t.TgZ(0,"table",55)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Test Run"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Test Start Time"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Test End Time"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Main Motor RPM"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Test Run Time (Min)"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Discharge Pressure (SP)"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Motor HZ"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Motor Power"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,G,23,31,"tr",56),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(20),t.Q6J("ngForOf",e.selectedProjectTestRunsList)}}const $=function(i){return{selectedRowColor:i}};function X(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr",57),t.NdJ("click",function(){const s=t.CHM(e),o=s.$implicit,n=s.index,r=t.oxw(3);return t.KtG(r.handleRowClick(o.TestNo,n))}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"number"),t.qZA()()}if(2&i){const e=c.$implicit,a=c.index,s=t.oxw(3);t.Q6J("ngClass",t.VKq(21,$,a===s.selectedRow)),t.xp6(2),t.Oqu(null==e?null:e.TestNo),t.xp6(2),t.Oqu(t.Dn7(5,7,null==e?null:e.StartDateTime,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(t.Dn7(8,11,null==e?null:e.EndDateTime,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(null==e?null:e.endurance),t.xp6(2),t.Oqu(t.xi3(13,15,null==e?null:e.DischargePressureSP,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(16,18,null==e?null:e.InAirPressSP,"1.1-1"))}}function tt(i,c){if(1&i&&(t.TgZ(0,"table",55)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Test Run"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Test Start Time"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Test End Time"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Test Run Time (Min)"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Discharge Pressure (SP)"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Air Valve output"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,X,17,23,"tr",56),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(16),t.Q6J("ngForOf",e.selectedProjectTestRunsList)}}function et(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"a",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.openModal("Favourite"))}),t._uU(1,"Mark as Favourite "),t._UZ(2,"i",58),t.qZA()}}function at(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"a",59),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deletFav())}),t._uU(1,"Favourite "),t._UZ(2,"i",58),t.qZA()}}function it(i,c){1&i&&(t.TgZ(0,"div",65),t._uU(1," Pump RPM "),t.qZA())}function st(i,c){1&i&&(t.TgZ(0,"div",65),t._uU(1," Inlet Air Pressure "),t.qZA())}function ot(i,c){if(1&i&&(t.TgZ(0,"div",66),t._UZ(1,"fusioncharts",67),t.TgZ(2,"div",68)(3,"div",69)(4,"p",70),t._uU(5),t.qZA()()()()),2&i){const e=t.oxw(3);t.Q6J("title",e.formatPumpRPM()),t.xp6(1),t.Q6J("width",e.width)("height",e.height)("type","angulargauge")("dataFormat",e.dataFormat)("dataSource",e.dataSourcePumpRPM),t.xp6(4),t.hij(" Motor Hz SP: ",e.dash.Set_MotorRPM||0," Hz ")}}function rt(i,c){if(1&i&&(t.TgZ(0,"div",66),t._UZ(1,"fusioncharts",67)(2,"div",82),t.qZA()),2&i){const e=t.oxw(3);t.Q6J("title",e.formatPumpRPMAirPress()),t.xp6(1),t.Q6J("width",e.width)("height",e.height)("type","angulargauge")("dataFormat",e.dataFormat)("dataSource",e.dataSourcePumpRPMAirPressure)}}function nt(i,c){if(1&i&&(t.TgZ(0,"div")(1,"div",83)(2,"div",84),t._UZ(3,"img",85),t.qZA(),t.TgZ(4,"div",86)(5,"div",87)(6,"p",88),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"div",89)(10,"p",79),t._uU(11,"Motor Power"),t.qZA()()()()(),t.TgZ(12,"div",90)(13,"div",86)(14,"div",87)(15,"p",88),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"div",89)(19,"p",79),t._uU(20,"Motor AMP"),t.qZA()()()()()()),2&i){const e=t.oxw(3);t.xp6(7),t.hij("",t.xi3(8,2,e.dash.MotorKW||0,"1.1-1")," kW"),t.xp6(9),t.hij("",t.xi3(17,5,e.dash.MotorAMP||0,"1.1-1")," AMP")}}function ct(i,c){if(1&i&&(t.TgZ(0,"div")(1,"div",91)(2,"div",92)(3,"div",93)(4,"div",87)(5,"div",94)(6,"p",79),t._uU(7,"Inlet Air Flow"),t.qZA()(),t.TgZ(8,"p",88),t._uU(9),t.ALo(10,"number"),t.qZA()()()(),t.TgZ(11,"div",92)(12,"div",86)(13,"div",87)(14,"div",94)(15,"p",79),t._uU(16,"Stroke Count / Min"),t.qZA()(),t.TgZ(17,"p",88),t._uU(18),t.qZA()()()(),t.TgZ(19,"div",92)(20,"div",86)(21,"div",87)(22,"div",94)(23,"p",79),t._uU(24,"Air Valve Output"),t.qZA()(),t.TgZ(25,"p",88),t._uU(26),t.ALo(27,"number"),t.qZA()()()()()()),2&i){const e=t.oxw(3);t.xp6(9),t.hij("",t.xi3(10,3,e.chartData.AoddInAirSCFMPV||0,"1.1-1")," SCFM"),t.xp6(9),t.hij("",e.chartData.StrokeCountRate||0," "),t.xp6(8),t.hij("",t.xi3(27,6,e.chartData.InAirPressSP||0,"1.1-2"),"% ")}}function lt(i,c){1&i&&(t.TgZ(0,"h6",79),t._uU(1,"Project Kwh"),t.qZA())}function dt(i,c){1&i&&(t.TgZ(0,"h6",79),t._uU(1,"Project Stroke Count"),t.qZA())}function ht(i,c){if(1&i&&(t.TgZ(0,"h5",78),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,e.dash.MotorKwhProject||"0","1.1-3"),"")}}function pt(i,c){if(1&i&&(t.TgZ(0,"h5",78),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,e.dash.aoddProjStrokeCount||"0","1.0-3"),"")}}function ut(i,c){1&i&&(t.TgZ(0,"h6",79),t._uU(1,"Test Running Time"),t.qZA())}function gt(i,c){1&i&&(t.TgZ(0,"h6",79),t._uU(1,"Last Run Time"),t.qZA())}function _t(i,c){1&i&&(t.TgZ(0,"h6",79),t._uU(1,"Project Kwh"),t.qZA())}function mt(i,c){1&i&&(t.TgZ(0,"h6",79),t._uU(1,"Test Stroke Count"),t.qZA())}function ft(i,c){if(1&i&&(t.TgZ(0,"h5",78),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Oqu(t.xi3(2,1,e.dash.MotorKwhTest||"0","1.1-3"))}}function xt(i,c){if(1&i&&(t.TgZ(0,"h5",78),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Oqu(t.xi3(2,1,e.dash.StrokeCount||"0","1.0-3"))}}const Tt=function(i){return{color:i}};function Pt(i,c){if(1&i&&(t.TgZ(0,"div",60)(1,"div",61)(2,"div",62),t.YNc(3,it,2,0,"div",63),t.YNc(4,st,2,0,"div",63),t.YNc(5,ot,6,7,"div",64),t.YNc(6,rt,3,6,"div",64),t.qZA(),t.TgZ(7,"div",62)(8,"div",65),t._uU(9," Discharge Pressure "),t.qZA(),t.TgZ(10,"div",66),t._UZ(11,"fusioncharts",67),t.TgZ(12,"div",68)(13,"div",69)(14,"p",70),t._uU(15),t.ALo(16,"number"),t.qZA()()()()(),t.TgZ(17,"div",62)(18,"div",65),t._uU(19," Discharge Flow "),t.qZA(),t.TgZ(20,"div",66),t._UZ(21,"fusioncharts",67),t.qZA()(),t.TgZ(22,"div",62),t.YNc(23,nt,21,8,"div",54),t.YNc(24,ct,28,9,"div",54),t.qZA(),t.TgZ(25,"div",71)(26,"div",25)(27,"div",72),t._uU(28),t.ALo(29,"date"),t.qZA()(),t.TgZ(30,"div",73)(31,"div",74)(32,"div",75)(33,"div",76)(34,"h6",77),t._uU(35,"Project RunTime"),t.qZA()(),t.TgZ(36,"h5",78),t._uU(37),t.qZA()()(),t.TgZ(38,"div",74)(39,"div",75)(40,"div",76)(41,"h6",79),t._uU(42,"Project Production"),t.qZA()(),t.TgZ(43,"h5",78),t._uU(44),t.ALo(45,"number"),t.qZA()()(),t.TgZ(46,"div",74)(47,"div",75)(48,"div",76),t.YNc(49,lt,2,0,"h6",80),t.YNc(50,dt,2,0,"h6",80),t.qZA(),t.YNc(51,ht,3,4,"h5",81),t.YNc(52,pt,3,4,"h5",81),t.qZA()(),t.TgZ(53,"div",74)(54,"div",75)(55,"div",76),t.YNc(56,ut,2,0,"h6",80),t.YNc(57,gt,2,0,"h6",80),t.qZA(),t.TgZ(58,"h5",78),t._uU(59),t.qZA()()(),t.TgZ(60,"div",74)(61,"div",75)(62,"div",76)(63,"h6",79),t._uU(64,"Test Production"),t.qZA()(),t.TgZ(65,"h5",78),t._uU(66),t.ALo(67,"number"),t.qZA()()(),t.TgZ(68,"div",74)(69,"div",75)(70,"div",76),t.YNc(71,_t,2,0,"h6",80),t.YNc(72,mt,2,0,"h6",80),t.qZA(),t.YNc(73,ft,3,4,"h5",81),t.YNc(74,xt,3,4,"h5",81),t.qZA()()()()()()),2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","AODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","AODD"===e.projectDetails.ProjectType),t.xp6(4),t.Q6J("title",e.formatDischargePress()),t.xp6(1),t.Q6J("width",e.width)("height",e.height)("type","angulargauge")("dataFormat",e.dataFormat)("dataSource",e.dataSourceDischargePressure),t.xp6(4),t.hij(" SP: ",t.xi3(16,35,e.dash.DischargePressureSP||0,"1.1-2")," BAR"),t.xp6(5),t.Q6J("title",e.formatDischargeFlow()),t.xp6(1),t.Q6J("width",e.width)("height",e.height)("type","angulargauge")("dataFormat",e.dataFormat)("dataSource",e.dataSourceDischargeFlow),t.xp6(2),t.Q6J("ngIf","AODD"!==e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType),t.xp6(3),t.Q6J("ngStyle",t.VKq(48,Tt,"Running"===e.projectDetails.Status||"Starting"===e.projectDetails.Status?"gray":"red")),t.xp6(1),t.hij(" Last Data Timestamp : ",t.Dn7(29,38,e.dash.DateTime,"dd/MM/yyyy, HH:mm:ss","UTC")," "),t.xp6(9),t.Oqu(e.Time),t.xp6(7),t.hij("",t.xi3(45,42,e.dash.ProjectTotalizer||"0","1.1-1")," L"),t.xp6(5),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType),t.xp6(4),t.Q6J("ngIf","Running"===e.projectDetails.Status),t.xp6(1),t.Q6J("ngIf","Running"!==e.projectDetails.Status),t.xp6(2),t.Oqu(e.calTime||0),t.xp6(7),t.hij("",t.xi3(67,45,e.dash.TestTotalizer||"0","1.1-1")," L"),t.xp6(5),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType)}}function Dt(i,c){if(1&i&&(t.TgZ(0,"option",95),t._uU(1),t.qZA()),2&i){const e=c.$implicit,a=t.oxw(2);t.Q6J("value",e)("disabled",a.isDisabledColSelect(e)),t.xp6(1),t.hij("",a.showColumns[e]," ")}}function vt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",96),t._uU(1),t.TgZ(2,"span",97),t.NdJ("click",function(){const o=t.CHM(e).$implicit,n=t.oxw(2);return t.KtG(n.removeTag(o))}),t._UZ(3,"i",98),t.qZA()()}if(2&i){const e=c.$implicit,a=t.oxw(2);t.xp6(1),t.hij(" ",a.showColumns[e]," ")}}function At(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",25),t._UZ(1,"app-time-series",99),t.TgZ(2,"button",100),t.NdJ("click",function(s){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleAnnotationModal(s))}),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("_size",e.size)}}function St(i,c){if(1&i&&(t.TgZ(0,"th",111),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.xp6(1),t.Oqu(e)}}function jt(i,c){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=c.$implicit,a=t.oxw().$implicit;t.xp6(1),t.Oqu(a[e])}}function Mt(i,c){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,jt,2,1,"td",110),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.displayedColumns)}}function yt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",101)(1,"app-card",102)(2,"div",25)(3,"div",103)(4,"div",104),t._uU(5,"Statistical Data"),t.qZA()(),t.TgZ(6,"div",105)(7,"button",9),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.exportToCSV())}),t._UZ(8,"i",10),t._uU(9," Export "),t.qZA()()(),t.TgZ(10,"div",11)(11,"table",106)(12,"thead")(13,"tr",107),t.YNc(14,St,2,1,"th",108),t.qZA()(),t.TgZ(15,"tbody",109),t.YNc(16,Mt,2,1,"tr",110),t.qZA()()()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("options",!0),t.xp6(13),t.Q6J("ngForOf",e.displayedColumns),t.xp6(2),t.Q6J("ngForOf",e.tableData)}}function bt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t.YNc(2,Q,3,2,"div",4),t.qZA(),t.TgZ(3,"div")(4,"app-card",5),t._UZ(5,"fusioncharts",6),t.qZA()(),t.TgZ(6,"div")(7,"app-card",7)(8,"div",8)(9,"button",9),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.exportToCSV1())}),t._UZ(10,"i",10),t._uU(11," Export "),t.qZA()(),t.TgZ(12,"div",11),t.YNc(13,W,21,1,"table",12),t.YNc(14,tt,17,1,"table",12),t.TgZ(15,"div",13)(16,"span"),t._uU(17),t.qZA(),t.TgZ(18,"ngb-pagination",14),t.NdJ("pageChange",function(s){t.CHM(e);const o=t.oxw();return t.KtG(o.handlePageChange(s))})("pageChange",function(s){t.CHM(e);const o=t.oxw();return t.KtG(o.page=s)}),t.qZA()()()()(),t.TgZ(19,"div",15)(20,"ul",16)(21,"li",17)(22,"a",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.openMaintenanceModal())}),t._uU(23,"Maintenance Log "),t._UZ(24,"i",19),t.qZA()(),t.TgZ(25,"li",17)(26,"a",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.openModal("User Notes"))}),t._uU(27,"User Notes "),t._UZ(28,"i",20),t.qZA()(),t.TgZ(29,"li",17),t.YNc(30,et,3,0,"a",21),t.YNc(31,at,3,0,"a",22),t.qZA()()(),t.TgZ(32,"div",23)(33,"app-card",24)(34,"div",25),t.YNc(35,Pt,75,50,"div",26),t.qZA()()(),t.TgZ(36,"div",27)(37,"app-card",28)(38,"div",29)(39,"div",30)(40,"div",31)(41,"select",32),t.NdJ("ngModelChange",function(s){t.CHM(e);const o=t.oxw();return t.KtG(o.toppings=s)})("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onColSelectChange())}),t.TgZ(42,"option",33),t._uU(43,"Select Column names"),t.qZA(),t.YNc(44,Dt,2,3,"option",34),t.qZA()()(),t.TgZ(45,"div",35)(46,"div",36)(47,"label",37),t._uU(48," Annotation : "),t.qZA(),t.TgZ(49,"input",38),t.NdJ("ngModelChange",function(s){t.CHM(e);const o=t.oxw();return t.KtG(o.isChecked=s)})("change",function(s){t.CHM(e);const o=t.oxw();return t.KtG(o.OnChangeAnno(s))}),t.qZA()(),t.TgZ(50,"div",39)(51,"span",40),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.openDateTimeModal())}),t._UZ(52,"i",41),t._uU(53),t.qZA()(),t.TgZ(54,"button",42),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onSelectionChange())}),t._uU(55,"Apply"),t.qZA()()(),t.TgZ(56,"div",43)(57,"div",44)(58,"div",45),t.YNc(59,vt,4,1,"div",46),t.qZA()()(),t.YNc(60,At,3,1,"div",47),t.qZA()(),t.YNc(61,yt,17,3,"div",48),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tempData),t.xp6(2),t.Q6J("cardTitle","AODD"!==e.projectDetails.ProjectType?"Test Run vs Discharge Pressure , Motor Hz":"Test Run vs Discharge Pressure, Air Valve output")("options",!1),t.xp6(1),t.Q6J("width","100%")("height","300")("dataSource",e.dataSourceChart),t.xp6(2),t.Q6J("hidHeader",!0)("options",!1),t.xp6(6),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","AODD"===e.projectDetails.ProjectType),t.xp6(3),t.AsE("Page ",(e.page-1)*e.pageSize," - ",e.page*e.pageSize>e.projectTestRunsList.length?e.projectTestRunsList.length:e.page*e.pageSize," "),t.xp6(1),t.Q6J("pageSize",e.pageSize)("collectionSize",null==e.projectTestRunsList?null:e.projectTestRunsList.length)("page",e.page),t.xp6(12),t.Q6J("ngIf",!e.favSelect),t.xp6(1),t.Q6J("ngIf",e.favSelect),t.xp6(2),t.Q6J("options",!1),t.xp6(2),t.Q6J("ngIf",e.showChart),t.xp6(2),t.Q6J("options",!1),t.xp6(4),t.Q6J("ngModel",e.toppings),t.xp6(3),t.Q6J("ngForOf",e.b),t.xp6(5),t.Q6J("ngModel",e.isChecked),t.xp6(4),t.hij(" ",e.formattedDateTimeRange," "),t.xp6(6),t.Q6J("ngForOf",e.selectedValues),t.xp6(1),t.Q6J("ngIf",e.showTimeChart),t.xp6(1),t.Q6J("ngIf",1==e.tableview)}}const Ct={asc:"desc",desc:"","":"asc"},T=(i,c)=>i<c?-1:i>c?1:0;let j=(()=>{class i{constructor(){this.appSortable="",this.direction="",this.sort=new t.vpe}rotate(){this.direction=Ct[this.direction],this.sort.emit({column:this.appSortable,direction:this.direction})}static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275dir=t.lG2({type:i,selectors:[["th","appSortable",""]],hostVars:4,hostBindings:function(a,s){1&a&&t.NdJ("click",function(){return s.rotate()}),2&a&&t.ekj("asc","asc"===s.direction)("desc","desc"===s.direction)},inputs:{appSortable:"appSortable",direction:"direction"},outputs:{sort:"sort"},standalone:!0})}return i})(),Zt=(()=>{class i{constructor(e,a,s,o,n,r,h,d,x){this.headerService=e,this.toastService=a,this.modalService=s,this.spinner=o,this.dashService=n,this.projectService=r,this.authService=h,this.route=d,this.dataAnalyticsService=x,this.showChart=!1,this.showTimeChart=!1,this.favSelect=!1,this.selectedRow=0,this.page=1,this.pageSize=10,this.guageRadius=40,this.tableView=!1,this.toppings="",this.selectedValues=[],this.dataSet=[],this.dataSet1=[],this.category=[],this.height="120",this.width="145",this.type="angulargauge",this.dataFormat="json",this.Time="",this.click=0,this.testsource=[],this.chartSource=[],this.col=["act_testruntime","DischargePressureSP","Set_MotorRPM","TestNo","InAirPressSP"],this.col1=["endurance","act_testruntime","DischargePressureSP","InAirPressSP","TestNo"],this.dataSet2=[],this.Set_MotorRPM=[],this.InAirPressSP=[],this.testRunTime=[],this.dischPressure=[],this.chartTestxAxis=[],this.tempData=[{background:"bg-secondary",title:"Name",icon:"icon-edit",property:"ProjectName"},{background:"bg-secondary",title:"Number",icon:"icon-tag",property:"ProjectNo"},{background:"bg-secondary",title:"Owner",icon:"icon-user",property:"ProjectOwner"},{background:"bg-secondary",title:"Type",icon:"icon-grid",property:"ProjectType"},{background:"bg-secondary",title:"Test Runs",icon:"icon-aperture",property:"TestNo"},{background:"bg-secondary",title:"Configuration",icon:"icon-sliders",property:"ProjectConfig"}],this.dash={DischargePressureSP:0,MotorKW:0,MotorKWH:0,StrokeCountRate:0,StrokeCount:0,Time:0,MotorAMP:0,ProjectTotalizer:0,MotorKwhProject:0,Act_TestRunTime:0,TestTotalizer:0,MotorKwhTest:0,PumpRPM:0,AoddInAirPressPV:0,DischargePressurePV:0,DischargeFlow:0,caltime:"",DateTime:"",Set_MotorRPM:0,DischargePTScaleMin:0,DischargePTScaleMax:0,FlowScaleMin:0,FlowScaleMax:0,InAirPressureSP:0,PumpRPMMin:0,PumpRPMMax:0,DischargePThhSP:0,DischargePThSP:0,DischargePThhEn:!1,inAirPTScaleMin:0,inAirPTScaleMax:0,inAirFTScaleMin:0,inAirFTScaleMax:0,aoddProjStrokeCount:0,AoddInAirSCFMPV:0},this.chartData={DischargePressureSP:0,MotorKW:0,MotorKWH:0,StrokeCountRate:0,StrokeCount:0,Time:0,ProjectTotalizer:0,MotorKwhProject:0,Act_TestRunTime:0,TestTotalizer:0,MotorKwhTest:0,PumpRPM:0,PumpRPMMin:0,PumpRPMMax:0,DischargePressurePV:0,DischargePTScaleMin:0,DischargePTScaleMax:0,DischargeFlow:0,FlowScaleMin:0,FlowScaleMax:0,caltime:"",DateTime:"",MotorAMP:0,Set_MotorRPM:0,InAirPressSP:0,AoddInAirPressPV:0,DischargePThhEn:!1,DischargePThSP:0,DischargePThhSP:0,inAirPTScaleMin:0,inAirPTScaleMax:0,inAirFTScaleMin:0,inAirFTScaleMax:0,aoddProjStrokeCount:0,AoddInAirSCFMPV:0,a:0},this.showColumns=E[0],this.AoodItem=["SelectAll","StrokeCount","FcvSP","FlowGrav","WeightScaleRead","DischargeFlow","StrokeCountRate","DischargePressureSP","InAirPressSP","FcvPos","DischargePressurePV","AoddInAirPressPV","SuctionPressurePV"],this.EoddItem=["SelectAll","MotorKWH","FcvSP","Act_MotorRPM","MotorAMP","MotorKW","FlowGrav","WeightScaleRead","DischargeFlow","Set_MotorRPM","DischargePressureSP","FcvPos","DischargePressurePV","SuctionPressurePV","PumpRPM"],this.textCheck="Show",this.isChecked=!1,this.ProjectId=this.route.snapshot.params.id,this.testno=this.route.snapshot.params.no,this.click=this.testno,this.headerService.setHeaderName("Project Analysis");const g=this.authService.getFullNameFromToken();this.uid=g.uid,this.spinner.show()}ngOnInit(){this.size={height:300,width:"100%"},this.getProjectAnalysis()}handlePageChange(e){this.sliceProjects(e)}handleRowClick(e,a){this.selectedRow=a,this.click=e,this.getTimeSeriesDetails(),this.dataSet1=[],this.getFavorite()}getProjectAnalysis(){this.projectService.getProjectAnalysis(this.ProjectId,this.testno).subscribe(e=>{this.projectDetails=e[0],"EODD"==this.projectDetails.ProjectType?this.b=this.EoddItem:"AODD"==this.projectDetails.ProjectType&&(this.b=this.AoodItem),this.getTimeSeriesDetails(),this.getProjectRunTimeData(),this.getTableData()})}getProjectRunTimeData(){this.projectService.getProjectRunTime(this.ProjectId).subscribe(e=>{this.Time=e.Time})}getTimeSeriesDetails(){const e=this.click==this.testno?this.testno:this.click;this.getFavorite(),this.projectService.getTimeSeriesById(this.ProjectId,e).subscribe(a=>{this.dash=a[1],this.chartData=a[1],this.calTime=a[0].caltime;const s=new Date(this.chartData.DateTime),o=new Date(this.chartData.DateTime);s.setMinutes(s.getMinutes()+1),s.setHours(s.getHours()-5),o.setHours(o.getHours()-5),s.setMinutes(s.getMinutes()-30),o.setMinutes(o.getMinutes()-30),o.setHours(o.getHours()-24),this.jsStartDate=this.formatDate(o),this.jsEndDate=this.formatDate(s),this.fromDate=o,this.toDate=s,this.formatTimeModalDate(),this.pumpRPM(),this.pumpRPMAirPressure(),this.dischargePressure(),this.dischargeFlow(),this.selectedValues.length&&this.onSelectionChange()})}getFavorite(){const e={uid:this.uid,projectid:this.ProjectId,testno:this.click};this.favSelect=!1,this.headerService.SelectFav(e).subscribe(a=>{this.fid=a[0]?.fid,this.favSelect=a[0]?.status})}getTableData(){this.projectService.getTimeSeriesById(this.ProjectId,0).subscribe(e=>{this.projectTestRunsList=e,this.tempProjectTestRunsList=e,this.sliceProjects(this.page),this.testsource=e,this.testsource2=e,this.getChartData()})}getStatisticalTableData(){const e=(0,u.p6)(this.jsEndDate,"YYYY-MM-dd HH:mm","en_US"),a=(0,u.p6)(this.jsStartDate,"YYYY-MM-dd HH:mm","en_US");this.projectService.getTableData(this.ProjectId,this.click==this.testno?this.testno:this.click,a,e).subscribe(o=>{this.tableData=o,0==o.length&&(this.tableView=!1),o&&o.length&&(this.displayedColumns=Object.keys(o[0]))})}exportToCSV(){const e=this.tableData.map(r=>Object.values(r)),a=Object.keys(this.tableData[0]);e.unshift(a);const s=p.P6.aoa_to_sheet(e),o=p.P6.decode_range(s["!ref"]);for(let r=o.s.r;r<=o.e.r;++r)for(let h=o.s.c;h<=o.e.c;++h){const d=p.P6.encode_cell({r,c:h});s[d]&&(s[d].s||(s[d].s={}),s[d].s.alignment={horizontal:"center",vertical:"center"})}const n=p.P6.book_new();p.P6.book_append_sheet(n,s,"Sheet1"),p.NC(n,"Statistical.xlsx")}exportToCSV1(){var e=[],a=[];this.projectTestRunsList.map(r=>{"AODD"==this.projectDetails.ProjectType?e.push([r.TestNo,r.StartDateTime,r.EndDateTime,r.endurance,r.DischargePressureSP,r.InAirPressSP]):"EODD"==this.projectDetails.ProjectType&&e.push([r.TestNo,r.StartDateTime,r.EndDateTime,r.PumpRPM,r.act_testruntime,r.DischargePressureSP,r.Set_MotorRPM,r.MotorKW])}),"AODD"==this.projectDetails.ProjectType?a=["Test Run","Test Start Time","Test End Time","Test Run Time (Min)","Discharge Pressure (SP)","Air Valve output"]:"EODD"==this.projectDetails.ProjectType&&(a=["Test Run","Test Start Time","Test End Time","Main Motor RPM","Test Run Time (Min)","Discharge Pressure (SP)","Motor HZ","Motor Power"]),e.unshift(a);const s=p.P6.aoa_to_sheet(e),o=p.P6.decode_range(s["!ref"]);for(let r=o.s.r;r<=o.e.r;++r)for(let h=o.s.c;h<=o.e.c;++h){const d=p.P6.encode_cell({r,c:h});s[d]&&(s[d].s||(s[d].s={}),s[d].s.alignment={horizontal:"center",vertical:"center"})}const n=p.P6.book_new();p.P6.book_append_sheet(n,s,"Sheet1"),p.NC(n,"ProjectTestRunData.xlsx")}pumpRPM(){this.cureentValueforGuage=this.chartData.PumpRPM.toFixed(2);const e=this.chartData.PumpRPMMax.toFixed(2),a={chart:{lowerLimit:this.chartData.PumpRPMMin.toString(),upperLimit:e.toString(),showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numberSuffix:" RPM",numberSuffixFontSize:"40"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.chartData.PumpRPMMin.toString(),maxValue:this.cureentValueforGuage.toString(),code:"#219653"},{minValue:this.cureentValueforGuage.toString(),maxValue:Number(e),code:"#D3D3D3"}]},dials:{dial:[{value:this.cureentValueforGuage+"RPM",bgHoverColor:"#cccccc",color:this.getNeedleColor_PumpRPM(this.cureentValueforGuage)}]}};this.dataSourcePumpRPM=a}formatPumpRPM(){return`Warning: ${this.chartData.PumpRPMMax.toFixed(2)}\nTrip: ${this.chartData.PumpRPMMin.toFixed(2)}`}getNeedleColor_PumpRPM(e){return e>=this.chartData.PumpRPMMin?"#219653":"#D3D3D3"}pumpRPMAirPressure(){this.cureentValueforGuage=this.chartData.AoddInAirPressPV.toFixed(2);const e={chart:{lowerLimit:this.chartData.inAirPTScaleMin.toString(),upperLimit:this.chartData.inAirPTScaleMax.toString(),showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numberSuffix:" BAR",numberSuffixFontSize:"20"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.chartData.inAirPTScaleMin.toString(),maxValue:this.cureentValueforGuage.toString(),code:"#219653"},{minValue:this.cureentValueforGuage.toString(),maxValue:this.chartData.inAirPTScaleMax.toString(),code:"#D3D3D3"}]},dials:{dial:[{value:this.cureentValueforGuage,bgHoverColor:"#cccccc",color:this.getNeedleColor_RPMAirPress(this.cureentValueforGuage)}]}};this.dataSourcePumpRPMAirPressure=e}formatPumpRPMAirPress(){return`Warning: ${this.chartData.inAirPTScaleMax.toFixed(2)}\nTrip: ${this.chartData.inAirPTScaleMin.toFixed(2)}`}getNeedleColor_RPMAirPress(e){return e>=this.chartData.inAirPTScaleMin?"#219653":"#D3D3D3"}dischargePressure(){this.cureentValueforGuage=(this.chartData.DischargePressurePV||0).toFixed(2);const e=this.chartData.DischargePTScaleMax.toFixed(2),a={chart:{lowerLimit:this.chartData.DischargePTScaleMin.toString(),upperLimit:e.toString(),showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numberSuffix:" BAR",numberSuffixFontColor:"#808080",numberSuffixFontSize:"20"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.chartData.DischargePTScaleMin.toString(),maxValue:this.chartData.DischargePThSP.toString(),code:"#219653"},{minValue:this.chartData.DischargePThSP.toString(),maxValue:this.chartData.DischargePThhSP.toString(),code:"#FFD12E"},{minValue:this.chartData.DischargePThhSP.toString(),maxValue:this.chartData.DischargePTScaleMax.toString(),code:"#FF9898"}]},dials:{dial:[{value:this.cureentValueforGuage+"%",bgHoverColor:"#cccccc",bgColor:this.colorChangeNeedle(this.cureentValueforGuage,this.chartData.DischargePTScaleMin,this.chartData.DischargePThSP,this.chartData.DischargePThhSP,e)}]}};this.dataSourceDischargePressure=a}formatDischargePress(){return`Warning: ${this.chartData.DischargePTScaleMax.toFixed(2)}\nTrip: ${this.chartData.DischargePTScaleMin.toFixed(2)}`}colorChangeNeedle(e,a,s,o,n){return 1!=this.chartData.DischargePThhEn?e>n?"#D3D3D3":"#219653":e>=a&&e<=s?"#219653":e>=s&&e<=o?"#FFD12E":e>=o&&e<=n?"#FF9898":""}dischargeFlow(){this.cureentValueforGuage=(this.chartData.DischargeFlow||0).toFixed(2);const e=this.chartData.FlowScaleMax.toFixed(2),a={chart:{lowerLimit:this.chartData.FlowScaleMin.toString(),upperLimit:e.toString(),showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numbersuffix:" L"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.chartData.FlowScaleMin.toString(),maxValue:this.cureentValueforGuage.toString(),code:"#219653"},{minValue:this.cureentValueforGuage.toString(),maxValue:this.chartData.FlowScaleMax.toString(),code:"#D3D3D3"}]},dials:{dial:[{value:this.cureentValueforGuage+"%",bgHoverColor:"#cccccc",color:this.getNeedleColor_DischargeFlow(this.cureentValueforGuage)}]}};this.dataSourceDischargeFlow=a}formatDischargeFlow(){return`Warning: ${this.chartData.FlowScaleMax.toFixed(2)}\nTrip: ${this.chartData.FlowScaleMin.toFixed(2)}`}getNeedleColor_DischargeFlow(e){return e<=this.chartData.FlowScaleMax?"#219653":"#FF9898"}getNeedleColor_InAirFT(e){return e<=this.chartData.inAirFTScaleMax?"#219653":"#FF9898"}getChartData(){this.dataSet2=[],"Endurance"==this.projectDetails.ProjectConfig?(this.col=["act_testruntime","DischargePressureSP","Set_MotorRPM","TestNo","InAirPressSP","endurance"],this.col1=["act_testruntime","DischargePressureSP","InAirPressSP","TestNo","endurance"]):(this.col=["act_testruntime","DischargePressureSP","Set_MotorRPM","TestNo","InAirPressSP","endurance"],this.col1=["act_testruntime","DischargePressureSP","InAirPressSP","TestNo"]),this.col.forEach(e=>{this.dataSet2.push({seriesname:e,data:[]})}),this.testsource2.forEach(e=>{Object.keys(e).forEach(a=>{const s=this.dataSet2.find(o=>o.seriesname==a);s&&s.data.push({value:e[a]})}),this.testRunTime=this.dataSet2[0].data}),this.dataSet2[3].data.map(e=>{this.chartTestxAxis.push({label:String(e.value)})}),this.dischPressure=this.dataSet2[1].data,this.Set_MotorRPM=this.dataSet2[2].data,this.InAirPressSP=this.dataSet2[4].data,this.testRunTime=this.dataSet2[5].data,"EODD"==this.projectDetails.ProjectType?(this.text="Motor Hz",this.chartDataset=[{seriesname:"Test Run Time (Min)",showValues:"1",data:this.testRunTime,numbersuffix:"Time"},{seriesname:"Motor Freq SP (Hz)",renderAs:"line",parentYAxis:"S",showValues:"0",data:this.Set_MotorRPM,numbersuffix:"Hz"},{seriesname:"Discharge Pressure (BAR)",renderAs:"line",parentYAxis:"S",showValues:"0",data:this.dischPressure}]):(this.text="Air Valve output",this.chartDataset=[{seriesname:"Test Run Time (Min)",showValues:"1",numbersuffix:" Time",data:this.testRunTime},{seriesname:"Air Valve output (%)",renderAs:"line",parentYAxis:"S",showValues:"0",data:this.InAirPressSP},{seriesname:"Discharge Pressure (BAR)",renderAs:"line",parentYAxis:"S",showValues:"0",data:this.dischPressure}]),this.barLineChart()}barLineChart(){this.dataSourceChart={chart:{xAxisname:"Test Run",pYAxisName:"Actual Test Time (In Minute)",sYAxisName:`${this.text} / Discharge Pressure`,plottooltext:"<b>$seriesname : </b>$dataValue",divlineColor:"#999999",divLineIsDashed:"1",divLineDashLen:"1",divLineGapLen:"1",toolTipColor:"white",toolTipBorderThickness:"0",toolTipBgColor:"#000000",toolTipBgAlpha:"80",toolTipBorderRadius:"2",toolTipPadding:"5",pnumbersuffix:" (BAR)",sYAxisMaxValue:"auto",showLabels:1,marginTop:20,theme:"fusion",exportEnabled:"1",formatNumberScale:"1",numberScaleValue:"1",numberScaleUnit:" (min)",rotateValues:"1"},categories:[{category:this.chartTestxAxis}],dataset:this.chartDataset},this.spinner.hide(),this.showChart=!0}isDisabledColSelect(e){return this.selectedValues.includes(e)}onSelectionChange1(e){this.selectedValues=e.value,this.dataSet.push(this.selectedValues)}onColSelectChange(){this.selectedValues.includes(this.toppings)||this.selectedValues.push(this.toppings),"SelectAll"==this.toppings&&(this.selectedValues=this.b)}removeTag(e){this.selectedValues=this.selectedValues.filter(a=>a!==e),"SelectAll"==e&&(this.selectedValues=[])}OnChangeAnno(e){console.log(e.target.checked,"event"),this.textCheck=1==this.isChecked?"Hide":"Show",this.isChecked=e.target.checked,this.getAnnotations(this.click),this.selectedDataChart()}onSelectionChange(){this.dataSet1=[],this.category=[];const e=this.click==this.testno?this.testno:this.click;this.showTimeChart=!1,this.selectedValues.length<=0?this.toastService.show({template:"Please Select the Parameteres!!",classname:"bg-warning",delay:3e3}):this.projectService.getTimeSeriesByIdForRunPro(this.ProjectId,e,this.jsStartDate,this.jsEndDate).subscribe(a=>{this.tableview=a.length>0,this.chartSource=a,a&&a.length?(this.selectedValues.forEach(s=>{this.dataSet1.push({seriesname:this.showColumns[s],noname:s,data:[]})}),this.time={label:"DateTime",data:[]},this.chartSource.forEach(s=>{Object.keys(s).forEach(o=>{const n=this.dataSet1.find(r=>r.noname===o);n&&n.data.push({value:s[o]}),"DateTime"==o&&this.time.data.push(s.DateTime)})}),this.selectedDataChart(),this.getAnnotations(e),this.getStatisticalTableData()):this.toastService.show({template:"No data for selected dates!!",classname:"bg-warning",delay:3e3})})}selectedDataChart(){const e={chart:{theme:"fusion"},categories:[{category:this.testsource.slice(1).map(s=>({label:s.label}))}],dataset:this.dataSet1};this.spinner.hide();const a=[];e.dataset.forEach(s=>{const o=[];s.data.forEach((r,h)=>{const d=new Date(this.time.data[h]);d.setHours(d.getHours()-5),d.setMinutes(d.getMinutes()-30);const x={projectid:this.ProjectId,testno:+this.click,paraname:s.seriesname,paratimestamp:this.formatDate(new Date(d))},g=this.checkExistObject(x),_={x:d,y:r.value,click:function(M){const m=document.querySelector(".open-annotation");m.dataset.seriesName=M.dataSeries.name,m.dataset.x=M.dataPoint.x,g?(m.dataset.anid=g.anid,m.dataset.remark=g.remark):(m.dataset.anid="",m.dataset.remark=""),m.click()}};1==this.isChecked&&g&&(_.indexLabel=g.remark,_.indexLabelMaxWidth="100",_.markerType="triangle",_.markerSize=20),o.push(_)}),a.push({name:s.seriesname,dataPoints:o})}),this.dashService.timeSeriesData.next(a),this.showTimeChart=!0}getAnnotations(e){this.dataAnalyticsService.selectAnnotation({projectid:this.ProjectId,testno:e,uid:this.uid}).subscribe(a=>{this.annotations=a,this.selectedDataChart()})}openDateTimeModal(){const s={startDate:this.fromDate,endDate:this.toDate},o=this.modalService.open(w.Z);o.componentInstance.inputData=s,o.result.then(n=>{const h=new Intl.DateTimeFormat("en-GB",{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),d=new Date(n.dateData.startDate.year,n.dateData.startDate.month-1,n.dateData.startDate.day,n.dateData.startTime.hour,n.dateData.startTime.minute,0),x=h.format(d),g=new Date(n.dateData.endDate.year,n.dateData.endDate.month-1,n.dateData.endDate.day,n.dateData.endTime.hour,n.dateData.endTime.minute,0),_=h.format(g);this.formattedDateTimeRange=x+" - "+_,this.jsStartDate=d,this.jsEndDate=g,this.jsStartDate=(0,u.p6)(this.jsStartDate,"YYYY-MM-dd HH:mm:ss","en_US"),this.jsEndDate=(0,u.p6)(this.jsEndDate,"YYYY-MM-dd HH:mm:ss","en_US")},n=>{console.log(`Modal dismissed with: ${n}`)})}openModal(e){const a={title:e,projectId:this.ProjectId,testId:this.click,mode:"add"},s=this.modalService.open(F._,{size:"lg"});s.componentInstance.inputData=a,s.result.then(o=>{this.getFavorite()},o=>{console.log(`Modal dismissed with: ${JSON.stringify(o)}`)})}handleAnnotationModal(e){const a=e.target,{seriesName:s,x:o,anid:n,remark:r}=a.dataset,h={projectid:this.ProjectId,testno:this.click,paraname:s,paratimestamp:this.formatDate(new Date(o)),createdbyuid:this.uid,createdbydate:this.formatDate(new Date),updatedbyid:this.uid,updatedbydate:this.formatDate(new Date),anid:n,remark:r},d=this.modalService.open(k.c,{size:"lg"});d.componentInstance.inputData=h,d.result.then(()=>{this.getAnnotations(this.click),this.selectedDataChart()},()=>{this.getAnnotations(this.click),this.selectedDataChart()})}openMaintenanceModal(){const e={projectId:this.ProjectId,testId:this.click,mode:"add"},a=this.modalService.open(R.l,{size:"lg"});a.componentInstance.inputData=e,a.result.then(s=>{},s=>{console.log(`Modal dismissed with: ${JSON.stringify(s)}`)})}deletFav(){confirm("Are you sure you want to remove from favorite?")&&this.projectService.deleteFav(this.fid).subscribe({next:()=>{this.toastService.show({template:"Removed from Favorite!!",classname:"bg-success",delay:3e3}),this.favSelect=!1},error:a=>{console.warn(a),this.toastService.show({template:"Failed to remove from favorite!!",classname:"bg-danger",delay:3e3})}})}onSort({column:e,direction:a},s=""){if(this.headers)for(const o of this.headers)o.appSortable!==e&&(o.direction="");""===a||""===e?(this.projectTestRunsList=this.tempProjectTestRunsList,this.sliceProjects(this.page)):(this.projectTestRunsList="number"==s?[...this.tempProjectTestRunsList].sort((o,n)=>{const r=T(+o[e],+n[e]);return"asc"===a?r:-r}):"date"==s?[...this.tempProjectTestRunsList].sort((o,n)=>{const r=T(+new Date(o[e]),+new Date(n[e]));return"asc"===a?r:-r}):[...this.tempProjectTestRunsList].sort((o,n)=>{const r=T(o[e],n[e]);return"asc"===a?r:-r}),this.sliceProjects(this.page))}formatTimeModalDate(){const a=new Intl.DateTimeFormat("en-GB",{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),o=a.format(this.toDate),r=a.format(this.fromDate);this.formattedDateTimeRange=r+" - "+o}getCurrentDateTime(){return this.formatDate(new Date)}formatDate(e){return`${e.getFullYear()}-${this.padZero(e.getMonth()+1)}-${this.padZero(e.getDate())}T${this.padZero(e.getHours())}:${this.padZero(Math.abs(e.getMinutes()))}:${this.padZero(e.getSeconds())}.000Z`}padZero(e){return e<10?`0${e}`:`${e}`}sliceProjects(e){this.selectedProjectTestRunsList=this.projectTestRunsList.slice((e-1)*this.pageSize,e*this.pageSize)}checkExistObject(e){if(!this.annotations)return"";let a;return this.annotations.some(s=>{const{projectid:o,testno:n,paratimestamp:r,paraname:h}=s;(0,v.isEqual)({projectid:o,testno:n,paratimestamp:r,paraname:h},e)&&(a=s)}),a}static#t=this.\u0275fac=function(a){return new(a||i)(t.Y36(U.r),t.Y36(O.k),t.Y36(A.FF),t.Y36(S.t2),t.Y36(I.s),t.Y36(V.Y),t.Y36(q.u),t.Y36(N.gz),t.Y36(L._))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-project-analysis"]],viewQuery:function(a,s){if(1&a&&t.Gf(j,5),2&a){let o;t.iGM(o=t.CRH())&&(s.headers=o)}},standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[["type","ball-scale-multiple"],["class","project-analysis",4,"ngIf"],[1,"project-analysis"],[1,"row","sec-first","mt-3"],["class","top-card col-12 col-md-2",4,"ngFor","ngForOf"],[3,"cardTitle","options"],["type","mscombidy2d",3,"width","height","dataSource"],[3,"hidHeader","options"],[1,"col-md-12","d-flex","justify-content-end","px-3","mb-1"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-file-csv","fw-bolder"],[1,"table-responsive"],["class","table table-styling",4,"ngIf"],[1,"d-flex","justify-content-end","align-items-center","gap-3"],[1,"m-0",3,"pageSize","collectionSize","page","pageChange"],[1,"dv-favourite","mt-3"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["role","button",1,"btn","btn-info",3,"click"],[1,"fas","fa-history"],[1,"far","fa-file-alt"],["class","btn btn-info","role","button",3,"click",4,"ngIf"],["class","btn btn-warning","role","button",3,"click",4,"ngIf"],[1,"col-md-12","kpiCharts","mt-3"],["cardTitle","",3,"options"],[1,"row"],["class","overflow-hidden",4,"ngIf"],[1,"col-md-12","parameterTrendView","mt-3"],["cardTitle","Parameter Trend View",3,"options"],[1,"row","d-flex","align-items-start","justify-content-between"],[1,"col-md-4","col-sm-12"],[1,"form-group"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","","disabled","","selected",""],["style","font-weight: bold;",3,"value","disabled",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-12","d-flex","align-items-center","justify-content-end"],[1,"form-check","px-2","d-flex","justify-content-start"],["for","defaultCheck1",1,"form-check-label"],["type","checkbox","value","","id","flexCheckChecked",1,"form-check-input",3,"ngModel","ngModelChange","change"],[1,"d-flex","justify-content-end","dateRangePicker"],[1,"custom-datetime-range-span",3,"click"],[1,"fas","fa-calendar"],["type","button",1,"btn","btn-primary","p-1","px-3","text-center","btn-apply",2,"font-size","13px",3,"click"],[1,"col-12","col-sm-12","d-flex","align-items-start"],[1,"col-md-12"],[1,"tag-input"],["class","tag",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["class","mt-3 col-md-12 parameterTrendView",4,"ngIf"],[1,"top-card","col-12","col-md-2"],["blockClass","project-analysis-top-card",3,"hidHeader","cardClass",4,"ngIf"],["blockClass","project-analysis-top-card",3,"hidHeader","cardClass"],[1,"text-white","d-flex","gap-2","align-items-center","first-label"],[1,"text-white","sec-label"],[4,"ngIf"],[1,"table","table-styling"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"fas","fa-star"],["role","button",1,"btn","btn-warning",3,"click"],[1,"overflow-hidden"],[1,"row","align-items-end","pt-0"],[1,"col-md-2","card-rt-br","kpi-chart-card-mh"],["class","liveTest-heading heading-style mb-1 text-center",4,"ngIf"],["class","position-relative d-flex flex-column align-items-center justify-content-center",3,"title",4,"ngIf"],[1,"liveTest-heading","heading-style","mb-1","text-center"],[1,"position-relative","d-flex","flex-column","align-items-center","justify-content-center",3,"title"],[3,"width","height","type","dataFormat","dataSource"],[1,"dv-p-main"],[1,"text-center","gauge-chart-bt-title"],[2,"font-weight","600","text-align","center"],[1,"col-md-4","projectDetails"],[1,"liveTest-heading","date-time-title","heading-style","mb-1",3,"ngStyle"],[1,"row","m-rl-5"],[1,"col-md-4"],[1,"card","mycard"],[1,"d-flex","align-items-start","pe-4"],[1,"text-nowrap","text-white"],[1,"p-1","fw-bold","text-white"],[1,"text-nowrap"],["class","text-nowrap",4,"ngIf"],["class","p-1 fw-bold text-white",4,"ngIf"],[1,"text-center"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mb-3"],[2,"height","40px","margin-bottom","15px"],["src","../../../assets/images/motor.ico","height","40px","width","30px",1,"apply-filter"],[1,"d-flex","align-items-center","justify-content-center","fw-bold"],[2,"text-align","center"],[1,"text-nowrap","mb-1"],[2,"color","gray"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mb-2"],[1,"position-relative","d-flex","flex-column","align-items-center","justify-content-center"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mb-1","testtt"],[1,"d-flex","align-items-center","justify-content-center","fw-bold","mt-2"],[2,"color","gray","margin-bottom","-10px"],[2,"font-weight","bold",3,"value","disabled"],[1,"tag"],[1,"remove",3,"click"],[1,"fas","fa-times"],[3,"_size"],["data-ss","sda",1,"open-annotation","d-none",3,"click"],[1,"mt-3","col-md-12","parameterTrendView"],["cardTitle","Statistical Data",3,"options"],[1,"col-md-6"],[1,"title","fw-bold"],[1,"col-md-6","d-flex","justify-content-end","dateRangePicker","px-3","mb-1"],[1,"table","table-styling","text-center"],[2,"background-color","lightgray"],["scope","col",4,"ngFor","ngForOf"],[2,"font-size","13px"],[4,"ngFor","ngForOf"],["scope","col"]],template:function(a,s){1&a&&(t._UZ(0,"ngx-spinner",0),t.YNc(1,bt,62,27,"div",1)),2&a&&(t.xp6(1),t.Q6J("ngIf",s.showChart))},dependencies:[u.ez,u.mk,u.sg,u.O5,u.PC,u.JJ,u.uU,Z.m,f.YN,f.Kr,f.Wl,f.EJ,f.JJ,f.On,J.A,A.N9,S.Ro,D.Qf,D.PZ,C.Z,y.lN,b.LD],styles:[".project-analysis .top-card{padding:0 5px!important}  .project-analysis .test-card{padding:0 10px;font-size:11px;font-weight:500;display:grid;place-items:center;min-height:65px;margin:0}  .project-analysis .test-card+svg{width:25px;margin:0 5px}  .project-analysis .sec-first{padding:0 15px}  .project-analysis .sec-first .card-body{height:110px!important}  .project-analysis .testtt{border:2px solid rgba(0,0,0,.116);width:155px;border-radius:5px}  .project-analysis .mycard{background-color:#5072a7;border:.2px gray;box-shadow:0 4px 8px #0003,0 6px 20px #00000030;margin-bottom:10px;font-size:11px;padding:5px;color:#fff}  .project-analysis .mycard h5{font-size:12px}  .project-analysis .mycard h6{color:#fff;font-size:10px}  .project-analysis .projectDetails .col-md-4{padding:3px}  .project-analysis .test-bench-sequence .test-card{border-radius:5px;color:#fff}  .project-analysis .test-bench-sequence .card .card-header{padding:10px}  .project-analysis .test-bench-sequence .card-body{height:unset!important}  .project-analysis .kpiCharts .card-header{display:none}  .project-analysis .parameterTrendView .card-header{display:none}  .project-analysis .card-body{height:unset!important}  .project-analysis .liveTest-heading{margin-bottom:20px!important;text-align:center}  .project-analysis .liveTest-heading.date-time-title{margin-bottom:30px!important}  .project-analysis .card-rt-br{border-right:1px solid rgba(51,51,51,.2)}  .project-analysis .kpi-chart-card-mh{min-height:197px}  .project-analysis .gauge-chart-bt-title{min-height:20px}  .project-analysis .pt40{padding-top:40px}  .project-analysis .mt20{margin-top:20px}  .project-analysis .pb20{padding-bottom:20px}  .project-analysis .m-rl-5{margin:0 5px}  .project-analysis .custom-datetime-range-span{padding:2px 8px;border:solid 1px rgb(206,212,218);border-radius:20px}  .project-analysis .custom-datetime-range-span i{margin-right:15px}  .project-analysis .card .card-body{padding:10px 8px!important}  .project-analysis .btn-apply{padding:2px 8px!important;margin-left:5px}@media only screen and (min-width: 769px){  .project-analysis .top-card:first-child{padding-left:0!important}  .project-analysis .top-card:last-child{padding-right:0!important}  .project-analysis .cust-col-1{width:11%!important;margin:0;display:flex;padding:0}  .project-analysis .cust-col-1:first-child{margin-left:10px}  .project-analysis .test-card{width:130px}  .project-analysis .project-analysis-top-card{position:relative;padding:10px!important}  .project-analysis .project-analysis-top-card .first-label{padding:10px 0;position:absolute;top:0;font-size:15px}  .project-analysis .project-analysis-top-card .sec-label{position:absolute;bottom:0;font-size:15px;font-weight:700}  .project-analysis .arrow-down{display:none!important}  .project-analysis .arrow-right{display:grid;place-items:center;margin:0}  .project-analysis .breadcrumb .breadcrumb-item:last-child{padding-right:0}}@media only screen and (max-width: 768px){  .project-analysis .top-card{padding:5px!important}  .project-analysis .project-analysis-top-card{position:relative;padding:10px!important}  .project-analysis .project-analysis-top-card .first-label{padding:10px 0;position:absolute;top:0;font-size:12px}  .project-analysis .project-analysis-top-card .sec-label{position:absolute;bottom:0;font-size:16px}  .project-analysis .arrow-right{display:none!important}  .project-analysis .arrow-down{text-align:center;margin:15px 0}  .project-analysis .breadcrumb-item{padding:2px 10px 4px;width:100%}  .project-analysis .breadcrumb-item a{float:right}  .project-analysis .breadcrumb-item{padding-right:0}}  .project-analysis ul.breadcrumb{padding-right:0}  .project-analysis .breadcrumb-item+.breadcrumb-item:before{content:none!important}  .project-analysis .breadcrumb-item{padding:2px 10px}  .project-analysis select.form-control{background-color:#e4e4e4!important;line-height:15px}  .project-analysis select.form-control option:disabled{color:#878787}  .project-analysis .tag-input{display:flex;flex-wrap:wrap;align-items:center;margin:0}  .project-analysis .tag{background-color:#6c757d;color:#fff;padding:6px 8px;margin:0 4px;display:flex;align-items:center;border-radius:20px;font-size:10px}  .project-analysis .remove{cursor:pointer;margin-left:4px;font-weight:700}  .selectedRowColor{background-color:#d3d3d3}  option:disabled{background-color:#eef075}  .form-check label{cursor:pointer;margin-right:25px}"]})}return i})()}}]);