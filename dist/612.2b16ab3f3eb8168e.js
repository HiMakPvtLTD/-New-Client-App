"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[612],{2612:(Zt,T,h)=>{h.r(T),h.d(T,{default:()=>Ft});var u=h(6814),D=h(8351),S=h(1687),M=h(3182),F=h(7844),A=h(814),Z=h(239),w=h(7818),C=h(8193),f=h(1486),t=h(9468),P=h(3946),y=h(6593);let R=(()=>{class i{constructor(e,o){this.activeModal=e,this.sanitizer=o}ngOnInit(){console.log(this.cctvLink),this.safeCctvLink=this.sanitizer.bypassSecurityTrustResourceUrl(this.cctvLink)}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(P.Kz),t.Y36(y.H7))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-cctc-modal"]],inputs:{cctvLink:"cctvLink"},decls:11,vars:0,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["src","http://14.98.122.230/","width","100%","height","400px","frameborder","0"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"CCTV Camera Feed"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return a.activeModal.dismiss("Cross click")}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t._UZ(7,"iframe",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return a.activeModal.close("Close click")}),t._uU(10,"Close"),t.qZA()())}})}return i})();var k=h(6655),V=h(6990),I=h(7635),U=h(7911),q=h(9074),N=h(589),Y=h(5026),b=h(8672),O=h(8642),J=h(4143),L=h(220);function B(i,s){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);t.xp6(1),t.Oqu(o.projectDetails[e.property])}}function H(i,s){if(1&i&&(t.TgZ(0,"app-card",45)(1,"label",46),t._UZ(2,"i"),t._uU(3),t.qZA(),t.TgZ(4,"label",47),t.YNc(5,B,2,1,"span",48),t.qZA()()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.s9C("cardClass",e.background),t.Q6J("hidHeader",!0),t.xp6(2),t.Gre("feather float-start ",e.icon,""),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Q6J("ngIf",o.projectDetails)}}function z(i,s){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);t.xp6(1),t.Oqu(o.projectDetails[e.property])}}function Q(i,s){if(1&i&&(t.TgZ(0,"app-card",45)(1,"label",46),t._UZ(2,"i"),t._uU(3),t.qZA(),t.TgZ(4,"label",47),t.YNc(5,z,2,1,"span",48),t.qZA()()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.s9C("cardClass","Running"===o.projectDetails[e.property]?"bg-c-green":"Stop"===o.projectDetails[e.property]?"bg-c-red":"bg-secondary"),t.Q6J("hidHeader",!0),t.xp6(2),t.Gre("feather float-start ",e.icon,""),t.xp6(1),t.Oqu(e.title),t.xp6(2),t.Q6J("ngIf",o.projectDetails)}}function G(i,s){if(1&i&&(t.TgZ(0,"div",43),t.YNc(1,H,6,7,"app-card",44),t.YNc(2,Q,6,7,"app-card",44),t.qZA()),2&i){const e=s.last;t.xp6(1),t.Q6J("ngIf",!e),t.xp6(1),t.Q6J("ngIf",e)}}function $(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",49)(1,"label",50),t._uU(2,"Remote Stop"),t.qZA(),t.TgZ(3,"div",51)(4,"input",52),t.NdJ("click",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.toggleRemoteStop(a))}),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(4),t.Q6J("checked","Running"===e.projectDetails.Status)("disabled","Running"!==e.projectDetails.Status)}}function E(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"a",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openModal("Favourite"))}),t._uU(1,"Mark as Favourite "),t._UZ(2,"i",53),t.qZA()}}function K(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"a",54),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.deletFav())}),t._uU(1,"Favourite "),t._UZ(2,"i",53),t.qZA()}}function W(i,s){1&i&&(t.TgZ(0,"div",59),t.O4$(),t.TgZ(1,"svg",60),t._UZ(2,"path",61),t.qZA()())}function X(i,s){1&i&&(t.TgZ(0,"div",62),t.O4$(),t.TgZ(1,"svg",60),t._UZ(2,"path",63),t.qZA()())}const tt=function(i,s){return{"bg-c-green":i,"bg-secondary":s}};function et(i,s){if(1&i&&(t.TgZ(0,"div",55)(1,"div",56),t._uU(2),t.qZA(),t.YNc(3,W,3,0,"div",57),t.YNc(4,X,3,0,"div",58),t.qZA()),2&i){const e=s.$implicit,o=s.index,a=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(4,tt,e.status,!e.status||null===e.status)),t.xp6(1),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",o!==a.testBenchSequence.length-1),t.xp6(1),t.Q6J("ngIf",o!==a.testBenchSequence.length-1)}}function it(i,s){1&i&&(t.TgZ(0,"div")(1,"div",86),t._uU(2," Pump RPM "),t.qZA()())}function ot(i,s){1&i&&(t.TgZ(0,"div")(1,"div",86),t._uU(2," Inlet Air Pressure "),t.qZA()())}function at(i,s){if(1&i&&(t.TgZ(0,"div",69),t._UZ(1,"fusioncharts",70),t.TgZ(2,"div",71)(3,"div",72)(4,"p",73),t._uU(5),t.qZA()()()()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("width",e.width)("height",e.height)("type","angulargauge")("dataFormat",e.dataFormat)("dataSource",e.dataSourcePumpRPM1),t.xp6(4),t.hij(" Motor Hz SP: ",e.dash.Set_MotorRPM||0," Hz ")}}function nt(i,s){if(1&i&&(t.TgZ(0,"div",69),t._UZ(1,"fusioncharts",70)(2,"div",87),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("width",e.width)("height",e.height)("type","angulargauge")("dataFormat",e.dataFormat)("dataSource",e.dataSourcePumpRPMAirPressure)}}function rt(i,s){if(1&i&&(t.TgZ(0,"div")(1,"div",88)(2,"div",89),t._UZ(3,"img",90),t.qZA(),t.TgZ(4,"div",91)(5,"div",92)(6,"p",93),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"div",94)(10,"p",82),t._uU(11,"Motor Power"),t.qZA()()()()(),t.TgZ(12,"div",95)(13,"div",91)(14,"div",92)(15,"p",93),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"div",94)(19,"p",82),t._uU(20,"Motor AMP"),t.qZA()()()()()()),2&i){const e=t.oxw(3);t.xp6(7),t.hij("",t.xi3(8,2,e.dash.MotorKW||0,"1.1-1")," kW"),t.xp6(9),t.hij("",t.xi3(17,5,e.dash.MotorAMP||0,"1.1-1")," AMP")}}function st(i,s){if(1&i&&(t.TgZ(0,"div")(1,"div",88)(2,"div",89),t._UZ(3,"img",90),t.qZA(),t.TgZ(4,"div",91)(5,"div",92)(6,"p",93),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"div",94)(10,"p",82),t._uU(11,"Motor Power"),t.qZA()()()()(),t.TgZ(12,"div",95)(13,"div",91)(14,"div",92)(15,"p",93),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"div",94)(19,"p",82),t._uU(20,"Motor AMP"),t.qZA()()()()()()),2&i){const e=t.oxw(4);t.xp6(7),t.hij("",t.xi3(8,2,e.dash.MotorKW||0,"1.1-1")," kW"),t.xp6(9),t.hij("",t.xi3(17,5,e.dash.MotorAMP||0,"1.1-1")," AMP")}}function ct(i,s){if(1&i&&(t.TgZ(0,"div",69)(1,"div",96)(2,"div",91)(3,"div",92)(4,"div",97)(5,"p",82),t._uU(6,"Inlet Air Flow"),t.qZA()(),t.TgZ(7,"p",93),t._uU(8),t.ALo(9,"number"),t.qZA()()()(),t.TgZ(10,"div",98)(11,"div",91)(12,"div",92)(13,"div",97)(14,"p",82),t._uU(15,"Stroke Count / Min"),t.qZA()(),t.TgZ(16,"p",93),t._uU(17),t.qZA()()()(),t.TgZ(18,"div",98)(19,"div",91)(20,"div",92)(21,"div",97)(22,"p",82),t._uU(23,"Air Valve Output"),t.qZA()(),t.TgZ(24,"p",93),t._uU(25),t.ALo(26,"number"),t.qZA()()()()()),2&i){const e=t.oxw(5);t.xp6(8),t.hij("",t.xi3(9,3,e.dash.AoddInAirSCFMPV||0,"1.1-1")," SCFM"),t.xp6(9),t.hij("",e.dash.StrokeCountRate||0," "),t.xp6(8),t.hij("",t.xi3(26,6,e.dash.InAirPressSP||0,"1.1-2"),"% ")}}function dt(i,s){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ct,27,9,"div",67),t.qZA()),2&i){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType)}}function lt(i,s){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,st,21,8,"div",48),t.YNc(2,dt,2,1,"div",48),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf","AODD"!==e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType)}}function ht(i,s){1&i&&(t.TgZ(0,"h6",82),t._uU(1,"Project Kwh"),t.qZA())}function ut(i,s){1&i&&(t.TgZ(0,"h6",82),t._uU(1,"Project Stroke Count"),t.qZA())}function pt(i,s){if(1&i&&(t.TgZ(0,"h5",81),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,e.dash.MotorKwhProject||"0","1.1-3"),"")}}function gt(i,s){if(1&i&&(t.TgZ(0,"h5",81),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,e.dash.aoddProjStrokeCount||"0","1.0-3"),"")}}function mt(i,s){1&i&&(t.TgZ(0,"h6",82),t._uU(1,"Last RunTime"),t.qZA())}function ft(i,s){1&i&&(t.TgZ(0,"h6",82),t._uU(1,"Test Running Time"),t.qZA())}function vt(i,s){1&i&&(t.TgZ(0,"h6",82),t._uU(1,"Test Kwh"),t.qZA())}function _t(i,s){1&i&&(t.TgZ(0,"h6",82),t._uU(1,"Test Stroke Count"),t.qZA())}function xt(i,s){if(1&i&&(t.TgZ(0,"h5",81),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,e.dash.MotorKwhTest||0,"1.1-3"),"")}}function Tt(i,s){if(1&i&&(t.TgZ(0,"h5",81),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,e.dash.StrokeCount||0,"1.0-3"),"")}}const Dt=function(i){return{color:i}};function Pt(i,s){if(1&i&&(t.TgZ(0,"div",64)(1,"div",65)(2,"div",66),t.YNc(3,it,3,0,"div",48),t.YNc(4,ot,3,0,"div",48),t.YNc(5,at,6,6,"div",67),t.YNc(6,nt,3,5,"div",67),t.qZA(),t.TgZ(7,"div",66)(8,"div",68),t._uU(9," Discharge Pressure "),t.qZA(),t.TgZ(10,"div",69),t._UZ(11,"fusioncharts",70),t.TgZ(12,"div",71)(13,"div",72)(14,"p",73),t._uU(15),t.ALo(16,"number"),t.qZA()()()()(),t.TgZ(17,"div",66)(18,"div",68),t._uU(19," Discharge Flow "),t.qZA(),t.TgZ(20,"div",69),t._UZ(21,"fusioncharts",70),t.qZA()(),t.TgZ(22,"div",66),t.YNc(23,rt,21,8,"div",48),t.YNc(24,lt,3,2,"div",48),t.qZA(),t.TgZ(25,"div",74)(26,"div",19)(27,"div",75),t._uU(28),t.ALo(29,"date"),t.qZA()(),t.TgZ(30,"div",76)(31,"div",77)(32,"div",78)(33,"div",79)(34,"h6",80),t._uU(35,"Project RunTime"),t.qZA()(),t.TgZ(36,"h5",81),t._uU(37),t.qZA()()(),t.TgZ(38,"div",77)(39,"div",78)(40,"div",79)(41,"h6",82),t._uU(42,"Project Production"),t.qZA()(),t.TgZ(43,"h5",81),t._uU(44),t.ALo(45,"number"),t.qZA()()(),t.TgZ(46,"div",77)(47,"div",78)(48,"div",79),t.YNc(49,ht,2,0,"h6",83),t.YNc(50,ut,2,0,"h6",83),t.qZA(),t.YNc(51,pt,3,4,"h5",84),t.YNc(52,gt,3,4,"h5",84),t.qZA()(),t.TgZ(53,"div",77)(54,"div",78)(55,"div",85),t.YNc(56,mt,2,0,"h6",83),t.YNc(57,ft,2,0,"h6",83),t.qZA(),t.TgZ(58,"h5",81),t._uU(59),t.qZA()()(),t.TgZ(60,"div",77)(61,"div",78)(62,"div",79)(63,"h6",82),t._uU(64,"Test Production"),t.qZA()(),t.TgZ(65,"h5",81),t._uU(66),t.ALo(67,"number"),t.qZA()()(),t.TgZ(68,"div",77)(69,"div",78)(70,"div",85),t.YNc(71,vt,2,0,"h6",83),t.YNc(72,_t,2,0,"h6",83),t.qZA(),t.YNc(73,xt,3,4,"h5",84),t.YNc(74,Tt,3,4,"h5",84),t.qZA()()()()()()),2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf","EODD"==e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","AODD"==e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","AODD"===e.projectDetails.ProjectType),t.xp6(5),t.Q6J("width",e.width)("height",e.height)("type","angulargauge")("dataFormat",e.dataFormat)("dataSource",e.dataSourceDischargePressure),t.xp6(4),t.hij(" SP: ",t.xi3(16,33,e.dash.DischargePressureSP||0,"1.1-2")," BAR "),t.xp6(6),t.Q6J("width",e.width)("height",e.height)("type","angulargauge")("dataFormat",e.dataFormat)("dataSource",e.dataSourceDischargeFlow),t.xp6(2),t.Q6J("ngIf","AODD"!==e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"!==e.projectDetails.ProjectType),t.xp6(3),t.Q6J("ngStyle",t.VKq(46,Dt,"Running"===e.projectDetails.Status||"Starting"===e.projectDetails.Status?"gray":"red")),t.xp6(1),t.hij(" Last Data Timestamp : ",t.Dn7(29,36,e.dash.DateTime,"dd/MM/yyyy, HH:mm:ss","UTC")," "),t.xp6(9),t.Oqu(e.Time),t.xp6(7),t.hij("",t.xi3(45,40,e.dash.ProjectTotalizer||"0","1.1-1")," L"),t.xp6(5),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","AODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","AODD"===e.projectDetails.ProjectType),t.xp6(4),t.Q6J("ngIf","Running"!==e.projectDetails),t.xp6(1),t.Q6J("ngIf","Running"===e.projectDetails),t.xp6(2),t.Oqu(e.calTime||0),t.xp6(7),t.hij("",t.xi3(67,43,e.dash.TestTotalizer||"0","1.1-1")," L"),t.xp6(5),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","AODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","EODD"===e.projectDetails.ProjectType),t.xp6(1),t.Q6J("ngIf","AODD"===e.projectDetails.ProjectType)}}function bt(i,s){if(1&i&&(t.TgZ(0,"th",99),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function jt(i,s){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=s.$implicit,o=t.oxw().$implicit;t.xp6(1),t.Oqu(o[e])}}function St(i,s){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,jt,2,1,"td",42),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.displayedColumns)}}function Mt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t.YNc(2,G,3,2,"div",4),t.qZA(),t.TgZ(3,"div",5)(4,"ul",6)(5,"li",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.redirectCctv())}),t.TgZ(6,"a",8),t._uU(7,"CCTV "),t._UZ(8,"i",9),t.qZA()(),t.TgZ(9,"li",10),t.YNc(10,$,5,2,"div",11),t.qZA(),t.TgZ(11,"li",10)(12,"a",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openMaintenanceModal())}),t._uU(13,"Maintenance Log "),t._UZ(14,"i",13),t.qZA()(),t.TgZ(15,"li",10)(16,"a",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openModal("User Notes"))}),t._uU(17,"User Notes "),t._UZ(18,"i",14),t.qZA()(),t.TgZ(19,"li",10),t.YNc(20,E,3,0,"a",15),t.YNc(21,K,3,0,"a",16),t.qZA()()(),t.TgZ(22,"div",17)(23,"app-card",18)(24,"div",19),t.YNc(25,et,5,7,"div",20),t.qZA()()(),t.TgZ(26,"div",21)(27,"app-card",22)(28,"div",19),t.YNc(29,Pt,75,48,"div",23),t.qZA()()(),t.TgZ(30,"div",24)(31,"app-card",25)(32,"div",19)(33,"div",26)(34,"div",27),t._uU(35,"Parameter Trend View"),t.qZA()(),t.TgZ(36,"div",28)(37,"span",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openDateTimeModal())}),t._UZ(38,"i",30),t._uU(39),t.qZA(),t._uU(40,"\xa0 "),t.TgZ(41,"button",31),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onreset())}),t._UZ(42,"i",13),t.qZA()()(),t.TgZ(43,"div",19),t._UZ(44,"app-time-series",32),t.qZA()()(),t.TgZ(45,"div",33)(46,"app-card",22)(47,"div",19)(48,"div",26)(49,"div",27),t._uU(50,"Statistical Data"),t.qZA()(),t.TgZ(51,"div",34)(52,"button",35),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.exportToCSV())}),t._UZ(53,"i",36),t._uU(54," Export "),t.qZA()()(),t.TgZ(55,"div",37)(56,"table",38)(57,"thead")(58,"tr",39),t.YNc(59,bt,2,1,"th",40),t.qZA()(),t.TgZ(60,"tbody",41),t.YNc(61,St,2,1,"tr",42),t.qZA()()()()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tempData),t.xp6(8),t.Q6J("ngIf",1==e.rights.remoteoperation),t.xp6(10),t.Q6J("ngIf",!e.favSelect),t.xp6(1),t.Q6J("ngIf",e.favSelect),t.xp6(2),t.Q6J("options",!1),t.xp6(2),t.Q6J("ngForOf",e.testBenchSequence),t.xp6(2),t.Q6J("options",!1),t.xp6(2),t.Q6J("ngIf",e.showChart),t.xp6(2),t.Q6J("options",!1),t.xp6(8),t.hij(" ",e.formattedDateTimeRange," "),t.xp6(5),t.Q6J("_customRangeSelector",!0)("_size",e.size),t.xp6(2),t.Q6J("options",!1),t.xp6(13),t.Q6J("ngForOf",e.displayedColumns),t.xp6(2),t.Q6J("ngForOf",e.tableData)}}let Ft=(()=>{class i{constructor(e,o,a,r,c,n,d,l,v){this.authService=e,this.toastService=o,this.headerService=a,this.modalService=r,this.projectService=c,this.dashService=n,this.spinner=d,this.route=l,this.dataAnalyticsService=v,this.tempData=[{background:"bg-secondary",title:"Name",icon:"icon-edit",property:"ProjectName"},{background:"bg-secondary",title:"Number",icon:"icon-tag",property:"ProjectNo"},{background:"bg-secondary",title:"Owner",icon:"icon-user",property:"ProjectOwner"},{background:"bg-secondary",title:"Type",icon:"icon-grid",property:"ProjectType"},{background:"bg-secondary",title:"Test Runs",icon:"icon-aperture",property:"TestRunCount"},{background:"bg-secondary",title:"Configuration",icon:"icon-sliders",property:"ProjectConfig"},{background:"bg-secondary",title:"State",icon:"icon-activity",property:"Status"}],this.tableView=!0,this.storevalue=0,this.favSelect=!1,this.displayedColumns=[],this.height="120",this.width="145",this.type="angulargauge",this.dataFormat="json",this.showChart=!1,this.selectedTimeRange="1",this.Time="",this.time=[],this.dataForPumpRPM=[],this.dataForDisPre=[],this.dataForDisPreSP=[],this.dataForDisFlow=[],this.dataForMotorPower=[],this.dataForStrokeRate=[],this.dataForInAirPV=[],this.dataForInAirSP=[],this.dataForMotorKW=[],this.dataForMotorKWh=[],this.dataForMotorAMP=[],this.dataForMotorRPM=[],this.count=0,this.ProjectId=this.route.snapshot.params.id,this.headerService.setHeaderName("Running Projects");const g=this.authService.getFullNameFromToken();this.uid=g.uid;const p=localStorage.getItem("loggedUser");this.rights=JSON.parse(p),this.spinner.show()}ngOnInit(){this.size={height:300,width:"100%"},this.ProjectId?this.getProjectAnalytics():this.projectService.getLastRunData().subscribe(e=>{this.ProjectId=e[0].ProjectId,this.getProjectAnalytics()})}ngOnDestroy(){this.intervalSubscription?.unsubscribe(),this.intervalCharSubscription?.unsubscribe()}getProjectAnalytics(){this.intervalSubscription=(0,S.F)(5e3).subscribe(()=>{this.projectService.getProjectDetails(this.ProjectId).subscribe(e=>{this.projectDetails=e[0],this.headerService.setHeaderName(`${this.projectDetails.Status} Project - Test Bench ${this.projectDetails.TestBenchId}`),"Idle"!==this.projectDetails.Status?(this.getTimeSeriesDetails(),this.getTestBenchData(),this.count=0):0==this.count&&(this.getTimeSeriesDetails(),this.getTestBenchData(),this.count=1)})})}openModal(e){const o={title:e,projectId:this.ProjectId,testId:this.testno,mode:"add"},a=this.modalService.open(A._,{size:"lg"});a.componentInstance.inputData=o,a.result.then(r=>{1==r.isSearch&&this.getFavorite()},r=>{console.log(`Modal dismissed with: ${JSON.stringify(r)}`)})}openMaintenanceModal(){const e={projectId:this.ProjectId,testId:this.testno,mode:"add"},o=this.modalService.open(F.l,{size:"lg"});o.componentInstance.inputData=e,o.result.then(a=>{1==a.isSearch&&(this.getTimeSeriesDetails(),this.getTestBenchData())},a=>{console.log(`Modal dismissed with: ${JSON.stringify(a)}`)})}redirectCctv(){window.open("http://14.98.122.230/")}openCctvModal(){const o=this.modalService.open(R,{size:"lg"});o.componentInstance.cctvLink="http://14.98.122.230/",o.result.then(a=>{},a=>{console.log(`Modal dismissed with: ${JSON.stringify(a)}`)})}toggleRemoteStop(e){if(e.preventDefault(),"Running"!==this.projectDetails.Status)return;const o={group:this.projectDetails.Group,projectId:this.ProjectId,testId:this.testno},a=this.modalService.open(Z.A,{size:"lg"});a.componentInstance.inputData=o,a.result.then(r=>{},r=>{console.log(`Modal dismissed with: ${JSON.stringify(r)}`)})}onTimeRangeChange(){this.initEnvironMentCharts()}getTimeSeriesDetails(){this.testno=this.projectDetails.TestRunCount,this.getFavorite(),this.projectService.getTimeSeriesById(this.ProjectId,this.testno).subscribe(e=>{"Running"!=this.projectDetails.Status?(this.dash=e[1],this.calTime=e[0].caltime):(this.dash=e[0],this.calTime=e[0].caltime);let o=new Date(this.dash.DateTime),a=new Date(this.dash.DateTime);o.setHours(o.getHours()-5),o.setMinutes(o.getMinutes()-30),a.setHours(a.getHours()-5),a.setMinutes(a.getMinutes()-30),a.setHours(a.getHours()-24),"Running"===this.projectDetails.Status?(o=new Date,a=new Date,a.setHours(a.getHours()-1)):this.intervalCharSubscription?.unsubscribe(),o.setMinutes(o.getMinutes()+2),this.fromDate=a,this.toDate=o,this.pumpRPM(),this.dischargePressure(),this.dischargeFlow(),this.InAirFtChart(),1!=this.storevalue&&(this.initEnvironMentCharts(),this.formatTimeModalDate()),this.pumpRPMAirPressure(),this.getProjectRunTimeData()})}getTestBenchData(){this.projectService.getTestBenchSequence(this.ProjectId,this.testno).subscribe(e=>{const o=e[0];let a=!1;const c=["DischargeVOpen","ControlVOpen","SuctionVOpen","SuctionPTThreshold","MotorRunFeedback","TestStableTimeDone","TestStableTimeDone","MotorStopFeedback","SuctionDischargeVClose"].map(n=>{let d;if(o.hasOwnProperty(n)){let l="";return"DischargeVOpen"==n?l="Discharge on/off Valve Open (Mag/Grav)":"ControlVOpen"==n?l="Control Valve > 90%":"SuctionVOpen"==n?l="Suction Valve Open":"SuctionPTThreshold"==n?l=" Suction PT value > Threshold":"MotorRunFeedback"==n?(l="Motor Run Feedback","AODD"===this.projectDetails.ProjectType&&(l="In Air Pressure > Threshold")):"TestStableTimeDone"==n?a?(l="Test Run",d=o[n]&&"Running"==this.projectDetails.Status):(a=!0,l="Test Stabilized"):"MotorStopFeedback"==n?(l="Motor Stopped","AODD"===this.projectDetails.ProjectType&&(l="In Air Pressure < Threshold")):"SuctionDischargeVClose"==n&&(l=" Suction & Discharge Valve Close"),{title:l,status:d??o[n]}}return null}).filter(n=>null!==n);this.testBenchSequence=c})}openDateTimeModal(){const a={startDate:this.jsStartDate,endDate:this.jsEndDate},r=this.modalService.open(C.Z);r.componentInstance.inputData=a,r.result.then(c=>{const d=new Intl.DateTimeFormat("en-GB",{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),l=new Date(c.dateData.startDate.year,c.dateData.startDate.month-1,c.dateData.startDate.day,c.dateData.startTime.hour,c.dateData.startTime.minute,0),v=d.format(l),g=new Date(c.dateData.endDate.year,c.dateData.endDate.month-1,c.dateData.endDate.day,c.dateData.endTime.hour,c.dateData.endTime.minute,0),p=d.format(g);this.formattedDateTimeRange=v+" - "+p,this.jsStartDate=l,this.jsEndDate=g,this.fromDate=(0,u.p6)(this.jsStartDate,"YYYY-MM-dd HH:mm:ss","en_US"),this.toDate=(0,u.p6)(this.jsEndDate,"YYYY-MM-dd HH:mm:ss","en_US"),this.storevalue=1,this.initEnvironMentCharts(),this.initEnvironMentCharts()},c=>{console.log(`Modal dismissed with: ${c}`)})}formatDate(e){return`${e.getFullYear()}-${this.padZero(e.getMonth()+1)}-${this.padZero(e.getDate())}T${this.padZero(e.getHours()-5)}:${this.padZero(Math.abs(e.getMinutes()-28))}:${this.padZero(e.getSeconds())}.000Z`}padZero(e){return e<10?`0${e}`:`${e}`}initEnvironMentCharts(){const o=this.calculateStartTime(new Date);this.gStartTime=o.toLocaleString();const a=(0,u.p6)(this.toDate,"YYYY-MM-dd HH:mm:ss","en_US"),r=(0,u.p6)(this.fromDate,"YYYY-MM-dd HH:mm:ss","en_US");this.projectService.getTimeSeriesByIdForRunPro(this.ProjectId,this.testno,r,a).subscribe(c=>{if(this.dataForPumpRPM=[],this.dataForDisPre=[],this.dataForDisFlow=[],this.dataForMotorPower=[],this.dataForStrokeRate=[],this.dataForInAirPV=[],this.dataForInAirSP=[],this.dataForMotorKW=[],this.dataForMotorKWh=[],this.dataForDisPreSP=[],this.dataForMotorRPM=[],this.dataForMotorAMP=[],this.datasetforChart=[],c){this.getTableData(),c.map(d=>{this.dataForDisPre.push({value:d.DischargePressurePV}),this.dataForDisFlow.push({value:d.DischargeFlow}),this.dataForMotorPower.push({value:d.MotorKW}),this.dataForStrokeRate.push({value:d.StrokeCountRate}),this.dataForPumpRPM.push({value:d.PumpRPM}),this.dataForInAirPV.push({value:d.AoddInAirPressPV}),this.dataForInAirSP.push({value:d.InAirPressSP}),this.dataForMotorKW.push({value:d.MotorKW}),this.dataForMotorKWh.push({value:d.MotorKWH}),this.dataForDisPreSP.push({value:d.DischargePressureSP}),this.dataForMotorRPM.push({value:d.MotorRPM}),this.dataForMotorAMP.push({value:d.MotorAMP}),this.time.push({label:new Date(d.DateTime)})}),this.dataForPumpRPM.reverse(),this.dataForDisPre.reverse(),this.dataForDisPreSP.reverse(),this.dataForDisFlow.reverse(),this.dataForMotorPower.reverse(),this.dataForStrokeRate.reverse(),this.dataForInAirPV.reverse(),this.dataForInAirSP.reverse(),this.dataForMotorKW.reverse(),this.dataForMotorKWh.reverse(),this.dataForMotorRPM.reverse(),this.dataForMotorAMP.reverse(),this.time.reverse();const n=this.dataForPumpRPM.length;"AODD"==this.projectDetails.ProjectType?this.datasetforChart=[{seriesname:"Inlet Air Press PV",data:this.dataForInAirPV.slice(0,n)},{seriesname:"Air Valve Output",data:this.dataForInAirSP.slice(0,n)},{seriesname:"Discharge Press PV",data:this.dataForDisPre.slice(0,n)},{seriesname:"Discharge Press SP",data:this.dataForDisPreSP.slice(0,n)},{seriesname:"Discharge Flow",data:this.dataForDisFlow.slice(0,n)},{seriesname:"Stroke Rate",data:this.dataForStrokeRate.slice(0,n)}]:"EODD"==this.projectDetails.ProjectType&&(this.datasetforChart=[{seriesname:"Pump RPM",data:this.dataForPumpRPM.slice(0,n)},{seriesname:"Motor AMP",data:this.dataForMotorAMP.slice(0,n)},{seriesname:"Motor KW",data:this.dataForMotorKW.slice(0,n)},{seriesname:"Discharge Press SP",data:this.dataForDisPreSP.slice(0,n)},{seriesname:"Discharge Press PV",data:this.dataForDisPre.slice(0,n)},{seriesname:"Discharge Flow",data:this.dataForDisFlow.slice(0,n)}]),this.initChartData()}else this.showChart=!0,this.getTableData(),this.intervalCharSubscription?.unsubscribe(),this.spinner.hide()})}getTableData(){const e=(0,u.p6)(this.toDate,"YYYY-MM-dd HH:mm:ss","en_US"),o=(0,u.p6)(this.fromDate,"YYYY-MM-dd HH:mm:ss","en_US");this.projectService.getTableData(this.ProjectId,this.projectDetails.TestRunCount,o,e).subscribe(r=>{this.tableData=r,0==r.length&&(this.tableView=!1),r&&r.length&&(this.displayedColumns=Object.keys(r[0]))})}exportToCSV(){const e=this.tableData.map(n=>Object.values(n)),o=Object.keys(this.tableData[0]);e.unshift(o);const a=f.P6.aoa_to_sheet(e),r=f.P6.decode_range(a["!ref"]);for(let n=r.s.r;n<=r.e.r;++n)for(let d=r.s.c;d<=r.e.c;++d){const l=f.P6.encode_cell({r:n,c:d});a[l]&&(a[l].s||(a[l].s={}),a[l].s.alignment={horizontal:"center",vertical:"center"})}const c=f.P6.book_new();f.P6.book_append_sheet(c,a,"Sheet1"),f.NC(c,"Statistical.xlsx")}onreset(){this.storevalue=0,this.getTimeSeriesDetails()}getProjectRunTimeData(){this.projectService.getProjectRunTime(this.ProjectId).subscribe(e=>{this.Time=0==Object.keys(e).length?this.calTime:e.Time})}pumpRPM(){this.cureentValueforGuage=this.dash.PumpRPM.toFixed(2);const e=this.dash.PumpRPMMax.toFixed(2),o={chart:{lowerLimit:this.dash.PumpRPMMin.toString(),upperLimit:e.toString(),displayLowerLimit:"1",displayUpperLimit:"1",showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numberSuffix:" RPM",numberSuffixFontSize:"10"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.dash.PumpRPMMin.toString(),maxValue:this.cureentValueforGuage.toString(),code:"#219653"},{minValue:this.cureentValueforGuage.toString(),maxValue:Number(e),code:"#D3D3D3"}]},dials:{dial:[{value:this.cureentValueforGuage+"RPM",bgHoverColor:"#cccccc",color:this.getNeedleColor_PumpRPM(this.cureentValueforGuage)}]}};this.dataSourcePumpRPM1=o}getNeedleColor_PumpRPM(e){return e>=this.dash.PumpRPMMin?"#219653":"#D3D3D3"}pumpRPMAirPressure(){this.cureentValueforGuage=this.dash.AoddInAirPressPV.toFixed(2);const e={chart:{lowerLimit:this.dash.inAirPTScaleMin.toString(),upperLimit:this.dash.inAirPTScaleMax.toString(),showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numberSuffix:" BAR",numberSuffixFontSize:"10"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.dash.inAirPTScaleMin.toString(),maxValue:this.cureentValueforGuage.toString(),code:"#219653"},{minValue:this.cureentValueforGuage.toString(),maxValue:this.dash.inAirPTScaleMax.toString(),code:"#D3D3D3"}]},dials:{dial:[{value:this.cureentValueforGuage,bgHoverColor:"#cccccc",color:this.getNeedleColor_RPMAirPress(this.cureentValueforGuage)}]}};this.dataSourcePumpRPMAirPressure=e}getNeedleColor_RPMAirPress(e){return e>=this.dash.inAirPTScaleMin?"#219653":"#D3D3D3"}dischargePressure(){this.cureentValueforGuage=(this.dash.DischargePressurePV||0).toFixed(2);const e=this.dash.DischargePTScaleMax.toFixed(2),o={chart:{lowerLimit:this.dash.DischargePTScaleMin.toString(),upperLimit:e.toString(),showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numbersuffix:" BAR",numberSuffixFontSize:"20"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.dash.DischargePTScaleMin.toString(),maxValue:this.dash.DischargePThSP.toString(),code:"#219653"},{minValue:this.dash.DischargePThSP.toString(),maxValue:this.dash.DischargePThhSP.toString(),code:"#FFD12E"},{minValue:this.dash.DischargePThhSP.toString(),maxValue:this.dash.DischargePTScaleMax.toString(),code:"#FF9898"}]},dials:{dial:[{value:this.cureentValueforGuage+"%",bgHoverColor:"#cccccc",bgColor:this.colorChangeNeedle(this.cureentValueforGuage,this.dash.DischargePTScaleMin,this.dash.DischargePThSP,this.dash.DischargePThhSP,this.dash.DischargePTScaleMax)}]}};this.dataSourceDischargePressure=o}colorChangeNeedle(e,o,a,r,c){return 1!=this.dash.DischargePThhEn?e>c?"#D3D3D3":"#219653":e>=o&&e<=a?"#219653":e>=a&&e<=r?"#FFD12E":e>=r&&e<=c?"#FF9898":""}dischargeFlow(){this.cureentValueforGuage=(this.dash.DischargeFlow||0).toFixed(2);const e=this.dash.FlowScaleMax.toFixed(2),o={chart:{lowerLimit:this.dash.FlowScaleMin.toString(),upperLimit:e.toString(),showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numbersuffix:" L"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.dash.FlowScaleMin.toString(),maxValue:this.cureentValueforGuage.toString(),code:"#219653"},{minValue:this.cureentValueforGuage.toString(),maxValue:this.dash.FlowScaleMax.toString(),code:"#D3D3D3"}]},dials:{dial:[{value:this.cureentValueforGuage+"%",bgHoverColor:"#cccccc",color:this.getNeedleColor_DischargeFlow(this.cureentValueforGuage)}]}};this.dataSourceDischargeFlow=o}getNeedleColor_DischargeFlow(e){return e<=this.dash.FlowScaleMax?"#219653":"#D3D3D3"}InAirFtChart(){this.cureentValueforGuage=(this.dash.AoddInAirSCFMPV||0).toFixed(2);const e={chart:{lowerLimit:this.dash.inAirFTScaleMin||0,upperLimit:this.dash.inAirFTScaleMax||0,displayLowerLimit:"1",displayUpperLimit:"1",showValue:"1",valueFont:"Arial",valueFontBold:"1",showhovereffect:"1",valueBelowPivot:"1",theme:"fusion",captionFontColor:"black",canvasBorderRadius:"15",baseFontSize:"10",valueFontSize:"12",autoAlignTickValues:"1",manageValueOverLapping:"1",baseFontColor:"black",chartTopMargin:"0",chartBottomMargin:"-4",chartLeftMargin:"0",chartRightMargin:"0",showTickMarks:"0",showTickValues:"1",placeValuesInside:"1",majorTMNumber:2,outCnvBaseFontColor:"#000000",pivotFillColor:"#5599CC",pivotFillAlpha:"100",gaugeInnerradius:"85%",gaugeFillMix:"{light+0}",showBorder:"0",canvasBgAlpha:"0",transposeAnimation:"1",tickValueDistance:"1",bgAlpha:"0",numberSuffix:" SCFM",numberSuffixFontSize:"20"},annotations:{groups:[{items:[{id:"2",type:"text",align:"center",bold:"1",fontSize:"15",color:"#ffffff",x:"$chartcenterX",y:"$chartCenterY + 65"}]}]},colorRange:{color:[{minValue:this.dash.inAirFTScaleMin,maxValue:this.cureentValueforGuage,code:"#219653"},{minValue:this.cureentValueforGuage,maxValue:this.dash.inAirFTScaleMax,code:"#D3D3D3"}]},dials:{dial:[{value:this.cureentValueforGuage,bgHoverColor:"#cccccc",color:this.getNeedleColor_PumpRPM(this.cureentValueforGuage)}]}};this.dataSourceInAirFT=e}getNeedleColor_InAirFT(e){return e<=this.dash.inAirFTScaleMax?"#219653":"#D3D3D3"}initChartData(){const e={chart:{showhovereffect:"1",showLabels:0,drawcrossline:"1",anchorRadius:"0",bgColor:"none",plottooltext:"<b>$seriesname<b>:$dataValue",theme:"fusion",captionAlignment:"left"},dataset:this.datasetforChart};this.dataSourceChart=e;const o=this.gStartTime,a=[];e.dataset.forEach(r=>{const c=[],n=new Date(o);r.data.forEach((l,v)=>{const g=new Date(n);0!=v&&(g.setMinutes(g.getMinutes()+1),n.setMinutes(n.getMinutes()+1));const p=new Date(this.time[v].label);p.setHours(p.getHours()-5),p.setMinutes(p.getMinutes()-30);const At={projectid:this.ProjectId,testno:+this.testno,paraname:r.seriesname,paratimestamp:this.formatDate(new Date(p))},_=this.checkExistObject(At);console.log(_,"annotaion");const x={x:p,y:l.value,click:function(j){const m=document.querySelector(".open-annotation");m.dataset.seriesName=j.dataSeries.name,m.dataset.x=j.dataPoint.x,_?(m.dataset.anid=_.anid,m.dataset.remark=_.remark):(m.dataset.anid="",m.dataset.remark=""),m.click()}};_&&(x.indexLabel=_.remark,x.indexLabelMaxWidth="100",x.markerType="triangle",x.markerSize=20),c.push(x)}),a.push({name:r.seriesname,dataPoints:c})}),this.timeSeriesData=a,this.dashService.timeSeriesData.next(this.timeSeriesData),this.spinner.hide(),this.showChart=!0}handleAnnotationModal(e){const o=e.target,{seriesName:a,x:r,anid:c,remark:n}=o.dataset,d={projectid:this.ProjectId,testno:this.testno,paraname:a,paratimestamp:this.formatDate(new Date(r)),createdbyuid:this.uid,createdbydate:this.formatDate(new Date),updatedbyid:this.uid,updatedbydate:this.formatDate(new Date),anid:c,remark:n},l=this.modalService.open(k.c,{size:"lg"});l.componentInstance.inputData=d,l.result.then(()=>{},()=>{})}checkExistObject(e){if(!this.annotations)return"";let o;return this.annotations.some(a=>{const{projectid:r,testno:c,paratimestamp:n,paraname:d}=a;(0,V.isEqual)({projectid:r,testno:c,paratimestamp:n,paraname:d},e)&&(o=a)}),o}formatTimeModalDate(){const o=new Intl.DateTimeFormat("en-GB",{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),a=this.toDate;this.jsEndDate=a;const r=o.format(a),c=this.fromDate;this.jsStartDate=c;const n=o.format(c);this.formattedDateTimeRange=n+" - "+r}calculateStartTime(e){const o=new Date(e.getTime());return"1"===this.selectedTimeRange?o.setHours(o.getHours()-1):"3"===this.selectedTimeRange?o.setHours(o.getHours()-3):"6"===this.selectedTimeRange?o.setHours(o.getHours()-6):"24"===this.selectedTimeRange&&o.setHours(o.getHours()-24),o.setMinutes(o.getMinutes()+1),o}getFavorite(){this.headerService.SelectFav({uid:this.uid,projectid:this.ProjectId,testno:this.testno}).subscribe(o=>{this.fid=o[0]?.fid,this.favSelect=o[0]?.status})}deletFav(){confirm("Are you sure you want to remove from favorite?")&&this.projectService.deleteFav(this.fid).subscribe({next:()=>{this.toastService.show({template:"Removed from Favorite!!",classname:"bg-success",delay:3e3}),this.favSelect=!1},error:o=>{console.warn(o),this.toastService.show({template:"Failed to remove from favorite!!",classname:"bg-danger",delay:3e3})}})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(I.u),t.Y36(U.k),t.Y36(q.r),t.Y36(P.FF),t.Y36(N.Y),t.Y36(Y.s),t.Y36(b.t2),t.Y36(O.gz),t.Y36(J._))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-running-projects"]],standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[["type","ball-scale-multiple"],["class","running-projects",4,"ngIf"],[1,"running-projects"],[1,"row","sec-first","mt-3"],["class","top-card col-12 col-md-2 cust-col-2",4,"ngFor","ngForOf"],[1,"dv-favourite","mt-3"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item",3,"click"],["role","button",1,"btn","btn-info"],[1,"fas","fa-camera"],[1,"breadcrumb-item"],["class","dv-remote-action d-flex gap-2 align-items-center mt-1",4,"ngIf"],["role","button",1,"btn","btn-info",3,"click"],[1,"fas","fa-history"],[1,"far","fa-file-alt"],["class","btn btn-info","role","button",3,"click",4,"ngIf"],["class","btn btn-warning","role","button",3,"click",4,"ngIf"],[1,"test-bench-sequence","mt-3"],["cardTitle","Live Test Bench Sequence",3,"options"],[1,"row"],["class","col-12 col-md-1 cust-col-1",4,"ngFor","ngForOf"],[1,"col-md-12","kpiCharts","mt-3"],["cardTitle","",3,"options"],["class","overflow-hidden",4,"ngIf"],[1,"col-md-12","parameterTrendView","mt-3"],["cardTitle","Parameter Trend View",3,"options"],[1,"col-md-6"],[1,"title","fw-bold"],[1,"col-md-6","d-flex","justify-content-end","dateRangePicker","px-2"],[1,"custom-datetime-range-span",3,"click"],[1,"fas","fa-calendar"],[1,"btn","btn-primary","btn-reset",3,"click"],[3,"_customRangeSelector","_size"],[1,"mt-3","col-md-12","parameterTrendView"],[1,"col-md-6","d-flex","justify-content-end","dateRangePicker","px-3","mb-1"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-file-csv","fw-bolder"],[1,"table-responsive"],[1,"table","table-styling","text-center"],[2,"background-color","lightgray"],["scope","col",4,"ngFor","ngForOf"],[2,"font-size","13px"],[4,"ngFor","ngForOf"],[1,"top-card","col-12","col-md-2","cust-col-2"],["blockClass","running-top-card",3,"hidHeader","cardClass",4,"ngIf"],["blockClass","running-top-card",3,"hidHeader","cardClass"],[1,"text-white","d-flex","gap-2","align-items-center","first-label"],[1,"text-white","sec-label"],[4,"ngIf"],[1,"dv-remote-action","d-flex","gap-2","align-items-center","mt-1"],["for","remote-stop justify-content-center"],[1,"form-check","form-switch","d-flex","flex-row-reverse"],["type","checkbox","id","remote-stop","role","switch",1,"form-check-input",3,"checked","disabled","click"],[1,"fas","fa-star"],["role","button",1,"btn","btn-warning",3,"click"],[1,"col-12","col-md-1","cust-col-1"],[1,"test-card",3,"ngClass"],["class","arrow-right",4,"ngIf"],["class","arrow-down",4,"ngIf"],[1,"arrow-right"],["width","24","height","24","xmlns","http://www.w3.org/2000/svg","fill-rule","evenodd","clip-rule","evenodd"],["d","M4 .755l14.374 11.245-14.374 11.219.619.781 15.381-12-15.391-12-.609.755z"],[1,"arrow-down"],["d","M23.245 4l-11.245 14.374-11.219-14.374-.781.619 12 15.381 12-15.391-.755-.609z"],[1,"overflow-hidden"],[1,"row","align-items-end","pt-0"],[1,"col-md-2","card-rt-br","kpi-chart-card-mh"],["class","position-relative d-flex flex-column align-items-center justify-content-center",4,"ngIf"],[1,"liveTest-heading","heading-style","mb-1","text-center"],[1,"position-relative","d-flex","flex-column","align-items-center","justify-content-center"],[3,"width","height","type","dataFormat","dataSource"],[1,"dv-p-main"],[1,"text-center","gauge-chart-bt-title"],[2,"font-weight","600","text-align","center"],[1,"col-md-4","projectDetails"],[1,"liveTest-heading","date-time-title","heading-style","mb-1",3,"ngStyle"],[1,"row","m-rl-5"],[1,"col-md-4"],[1,"card","mycard"],[1,"d-flex","align-items-start","pe-4"],[1,"text-nowrap","text-white"],[1,"p-1","fw-bold","text-white"],[1,"text-nowrap"],["class","text-nowrap",4,"ngIf"],["class","p-1 fw-bold text-white",4,"ngIf"],[1,"d-flex","align-items-start","pe-3"],[1,"liveTest-heading","heading-style","mb-1"],[1,"text-center"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mb-3"],[2,"height","40px","margin-bottom","15px"],["src","../../../assets/images/motor.ico","height","40px","width","30px",1,"apply-filter"],[1,"d-flex","align-items-center","justify-content-center","fw-bold"],[2,"text-align","center"],[1,"text-nowrap","mb-1"],[2,"color","gray"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mb-2"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mb-1","testtt","mt-2"],[2,"color","gray","margin-bottom","-10px"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mb-1","testtt"],["scope","col"]],template:function(o,a){1&o&&(t._UZ(0,"ngx-spinner",0),t.YNc(1,Mt,62,15,"div",1)),2&o&&(t.xp6(1),t.Q6J("ngIf",a.showChart))},dependencies:[u.ez,u.mk,u.sg,u.O5,u.PC,u.JJ,u.uU,w.m,L.A,b.Ro,M.Z,D.Qf,D.PZ],styles:[".running-projects .liveTest-heading.date-time-title{margin-bottom:47px!important}  .running-projects .top-card{padding:0 5px!important}  .running-projects .test-card{padding:0 10px;font-size:11px;font-weight:500;display:grid;place-items:center;min-height:65px;margin:0 12px}  .running-projects .test-card+svg{width:25px;margin:0 5px}  .running-projects .sec-first{padding:0 15px}  .running-projects .sec-first .card-body{height:110px!important}  .running-projects .testtt{border:2px solid rgba(0,0,0,.116);width:155px;border-radius:5px}  .running-projects .mycard{background-color:#5072a7;border:.2px gray;box-shadow:0 4px 8px #0003,0 6px 20px #00000030;margin-bottom:10px;font-size:11px;padding:5px;color:#fff}  .running-projects .mycard h5{font-size:12px}  .running-projects .mycard h6{color:#fff;font-size:10px}  .running-projects .projectDetails .col-md-4{padding:3px}  .running-projects .card .card-body{padding:10px 8px!important}  .running-projects .test-bench-sequence .test-card{border-radius:5px;color:#fff;text-align:center}  .running-projects .test-bench-sequence .card .card-header{padding:10px}  .running-projects .test-bench-sequence .card-body{height:unset!important}  .running-projects .kpiCharts .card-header{display:none}  .running-projects .parameterTrendView .card-header{display:none}  .running-projects .card-body{height:unset!important}  .running-projects .liveTest-heading{margin-bottom:20px!important;text-align:center}  .running-projects .btn-reset{padding:2px 8px;margin:0 4px}  .running-projects .card-rt-br{border-right:1px solid rgba(51,51,51,.2)}  .running-projects .kpi-chart-card-mh{min-height:197px}  .running-projects .gauge-chart-bt-title{min-height:20px}  .running-projects .pt40{padding-top:40px}  .running-projects .mt20{margin-top:20px}  .running-projects .pb20{padding-bottom:20px}  .running-projects .m-rl-5{margin:0 5px}  .running-projects .form-check-input:checked{background-color:green;border-color:green;height:20px;width:45px}  .running-projects .custom-datetime-range-span{padding:2px 8px;border:solid 1px rgb(206,212,218);border-radius:20px}  .running-projects .custom-datetime-range-span i{margin-right:15px}@media only screen and (min-width: 769px){  .running-projects .top-card:first-child{padding-left:0!important}  .running-projects .top-card:last-child{padding-right:0!important}  .running-projects .cust-col-1{width:11%!important;margin:0;display:flex;padding:0}  .running-projects .cust-col-1:first-child{margin-left:10px}  .running-projects .test-card{width:130px}  .running-projects .cust-col-2{width:14.28%!important}  .running-projects .running-top-card{position:relative;padding:10px!important}  .running-projects .running-top-card .first-label{padding:10px 0;position:absolute;top:0;font-size:15px}  .running-projects .running-top-card .sec-label{position:absolute;bottom:0;font-size:15px;font-weight:700}  .running-projects .arrow-down{display:none!important}  .running-projects .arrow-right{display:grid;place-items:center;margin:0}  .running-projects .breadcrumb .breadcrumb-item:last-child{padding-right:0}}@media only screen and (max-width: 768px){  .running-projects .breadcrumb-item{padding-right:0}  .running-projects .top-card{padding:5px!important}  .running-projects .running-top-card{position:relative;padding:10px!important}  .running-projects .running-top-card .first-label{padding:10px 0;position:absolute;top:0;font-size:12px}  .running-projects .running-top-card .sec-label{position:absolute;bottom:0;font-size:16px}  .running-projects .arrow-right{display:none!important}  .running-projects .arrow-down{text-align:center;margin:15px 0}  .running-projects .breadcrumb-item{padding:0 10px 4px;width:100%}  .running-projects .breadcrumb-item a,   .running-projects .breadcrumb-item .dv-remote-action{float:right}  .running-projects .card-rt-br{border-bottom:1px solid rgba(51,51,51,.2)}}  .running-projects ul.breadcrumb{padding-right:0}  .running-projects .card{margin-bottom:0}  .running-projects .breadcrumb-item+.breadcrumb-item:before{content:none!important}"]})}return i})()}}]);