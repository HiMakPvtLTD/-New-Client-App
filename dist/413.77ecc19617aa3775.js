"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[413],{8193:(Z,v,_)=>{_.d(v,{Z:()=>C});var a=_(9468),t=_(6814),n=_(7818),j=_(8351),P=_(5399),b=_(6223);function D(r,l){if(1&r){const o=a.EpF();a.TgZ(0,"span",18),a.NdJ("mouseenter",function(){const m=a.CHM(o).$implicit,g=a.oxw();return a.KtG(g.hoveredDate=m)})("mouseleave",function(){a.CHM(o);const p=a.oxw();return a.KtG(p.hoveredDate=null)}),a._uU(1),a.qZA()}if(2&r){const o=l.$implicit,h=l.focused,p=a.oxw();a.ekj("focused",h)("range",p.isRange(o))("faded",p.isHovered(o)||p.isInside(o)),a.xp6(1),a.hij(" ",o.day," ")}}let C=(()=>{class r{constructor(o){this.activeModal=o,this.calendar=(0,a.f3M)(P.vL),this.hoveredDate=null,this.fromDate=this.calendar.getToday(),this.toDate=this.calendar.getNext(this.fromDate,"d",-1),this.currentDate=new Date,this.startTime={hour:this.currentDate.getHours(),minute:this.currentDate.getMinutes()},this.endTime={hour:this.currentDate.getHours(),minute:this.currentDate.getMinutes()}}ngOnInit(){const o=this.inputData.startDate,h=this.inputData.endDate;this.fromDate={year:o.getFullYear(),month:o.getMonth()+1,day:o.getDate()},this.toDate={year:h.getFullYear(),month:h.getMonth()+1,day:h.getDate()};const p=o.getHours(),m=o.getMinutes(),g=h.getHours(),S=h.getMinutes();this.startTime={hour:p,minute:m},this.endTime={hour:g,minute:S}}onDateSelection(o){this.fromDate||this.toDate?this.fromDate&&!this.toDate&&o.after(this.fromDate)?this.toDate=o:(this.toDate=null,this.fromDate=o):this.fromDate=o}isHovered(o){return this.fromDate&&!this.toDate&&this.hoveredDate&&o.after(this.fromDate)&&o.before(this.hoveredDate)}isInside(o){return this.toDate&&o.after(this.fromDate)&&o.before(this.toDate)}isRange(o){return o.equals(this.fromDate)||this.toDate&&o.equals(this.toDate)||this.isInside(o)||this.isHovered(o)}selectDataAndClose(){this.activeModal.close({isUpdated:!0,dateData:{startDate:this.fromDate,endDate:this.toDate,startTime:this.startTime,endTime:this.endTime}})}closeModal(){this.activeModal.dismiss({isUpdated:!1})}static#t=this.\u0275fac=function(h){return new(h||r)(a.Y36(P.Kz))};static#e=this.\u0275cmp=a.Xpm({type:r,selectors:[["app-datatime-range-modal"]],inputs:{inputData:"inputData"},standalone:!0,features:[a.jDz],decls:26,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],["outsideDays","hidden",1,"range-datetimepicker",3,"displayMonths","dayTemplate","dateSelect"],["dp",""],["t",""],[1,"col-md-6","col-sm-6"],[3,"ngModel","ngModelChange"],[1,"row","justify-content-end"],[1,"col-xl-3","col-md-3","col-sm-6"],["type","button","ngbAutofocus","",1,"btn","btn-block","btn-primary","mb-4",3,"click"],[1,"fas","fa-check"],[1,"col-xl-4","col-md-3","col-sm-6"],["type","button",1,"btn","btn-block","btn-primary","mb-4",3,"click"],[1,"fas","fa-times"],[1,"custom-day",3,"mouseenter","mouseleave"]],template:function(h,p){if(1&h&&(a.TgZ(0,"div",0)(1,"h6",1),a._uU(2,"Select Date"),a.qZA(),a.TgZ(3,"button",2),a.NdJ("click",function(){return p.closeModal()}),a.TgZ(4,"span",3),a._uU(5,"\xd7"),a.qZA()()(),a.TgZ(6,"div",4)(7,"div",5)(8,"ngb-datepicker",6,7),a.NdJ("dateSelect",function(g){return p.onDateSelection(g)}),a.qZA(),a.YNc(10,D,2,7,"ng-template",null,8,a.W1O),a.qZA(),a.TgZ(12,"div",5)(13,"div",9)(14,"ngb-timepicker",10),a.NdJ("ngModelChange",function(g){return p.startTime=g}),a.qZA()(),a.TgZ(15,"div",9)(16,"ngb-timepicker",10),a.NdJ("ngModelChange",function(g){return p.endTime=g}),a.qZA()()(),a.TgZ(17,"div",11)(18,"div",12)(19,"button",13),a.NdJ("click",function(){return p.selectDataAndClose()}),a._UZ(20,"i",14),a._uU(21," Apply "),a.qZA()(),a.TgZ(22,"div",15)(23,"button",16),a.NdJ("click",function(){return p.closeModal()}),a._UZ(24,"i",17),a._uU(25," Cancel "),a.qZA()()()()),2&h){const m=a.MAs(11);a.xp6(8),a.Q6J("displayMonths",2)("dayTemplate",m),a.xp6(6),a.Q6J("ngModel",p.startTime),a.xp6(2),a.Q6J("ngModel",p.endTime)}},dependencies:[t.ez,n.m,b.JJ,b.On,P.VL,P.Pm,j.Qf],styles:[".modal-title{font-style:normal;font-weight:400}  .modal-header{padding:10px;justify-content:space-between}  .close{border-radius:50%;padding:0 8px;border-color:#666}  .modal-row-border{border-color:#ced4da;border-style:solid;border-width:.8px;border-radius:5px;padding:10px;margin:20px 10px}  .ml-10{margin-left:10px}  .mb-5{margin-bottom:5px}  .custom-day{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}  .custom-day.focused{background-color:#e6e6e6}  .custom-day.range,   .custom-day:hover{background-color:#0275d8;color:#fff}  .custom-day.faded{background-color:#0275d880}  .range-datetimepicker{overflow-x:scroll}@media only screen and (max-width: 768px){  .col-sm-6{width:50%}}"]})}return r})()},1413:(Z,v,_)=>{_.r(v),_.d(v,{NgbdSortableHeaderDirective:()=>E,default:()=>N});var a=_(6814),t=_(9468),n=_(8351),j=_(7818),P=_(5940),b=_(8193),D=_(7844),C=_(1486),r=_(9074),l=_(5399),o=_(589),h=_(8672),p=_(8642),m=_(6686),g=_(6223),S=_(220);function U(f,x){if(1&f){const e=t.EpF();t.TgZ(0,"tr",39),t.NdJ("click",function(){const s=t.CHM(e),i=s.index,u=s.$implicit,d=t.oxw(2);return t.KtG(d.handleRowClick(i,u.TestNo))}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"date"),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td",39),t.NdJ("click",function(s){const u=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.openMaintenanceModal(s,u.ProjectId,u.TestNo))}),t._UZ(26,"i",40),t.qZA()()}if(2&f){const e=x.$implicit;t.xp6(2),t.Oqu(e.ProjectId),t.xp6(2),t.Oqu(null==e?null:e.ProjectName),t.xp6(2),t.Oqu(null==e?null:e.TestBenchNo),t.xp6(2),t.Oqu(null==e?null:e.ProjectType),t.xp6(2),t.Oqu(null==e?null:e.ProjectConfig),t.xp6(2),t.Oqu(null==e?null:e.ProjectNo),t.xp6(2),t.Oqu(null==e?null:e.ProjectOwner),t.xp6(2),t.Oqu(null==e?null:e.TestNo),t.xp6(2),t.Oqu(t.Dn7(19,11,null==e?null:e.StartDateTime,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(t.Dn7(22,15,null==e?null:e.EndDateTime,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(null==e?null:e.differnce)}}function y(f,x){if(1&f){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4),t._UZ(3,"i",5),t.TgZ(4,"input",6),t.NdJ("ngModelChange",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.tbSearchFilter=s)})("keyup",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleSearchChange())}),t.qZA()(),t.TgZ(5,"div",7)(6,"span",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.openDateTimeModal())}),t._UZ(7,"i",9),t._uU(8),t.qZA(),t.TgZ(9,"button",10),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleResetFilters())}),t._UZ(10,"i",11),t.qZA()()(),t.TgZ(11,"div",12)(12,"div",13)(13,"div",14)(14,"app-card",15)(15,"fusioncharts",16),t.NdJ("dataplotClick",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.handleDataPlotClick(s))}),t.qZA()()(),t.TgZ(16,"div",14)(17,"app-card",17)(18,"fusioncharts",16),t.NdJ("dataplotClick",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.handleDataPlotClick(s))}),t.qZA()()(),t.TgZ(19,"div",14)(20,"app-card",18)(21,"fusioncharts",16),t.NdJ("dataplotClick",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.handleDataPlotClick(s))}),t.qZA()()()(),t.TgZ(22,"div")(23,"app-card",19)(24,"div",20)(25,"button",21),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.exportToCSV())}),t._UZ(26,"i",22),t._uU(27," Export "),t.qZA()(),t.TgZ(28,"div",23)(29,"table",24)(30,"thead")(31,"tr")(32,"th",25),t.NdJ("sort",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onSort(s))}),t._uU(33,"Project ID"),t.qZA(),t.TgZ(34,"th",26),t.NdJ("sort",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onSort(s))}),t._uU(35,"Project Name"),t.qZA(),t.TgZ(36,"th",27),t.NdJ("sort",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onSort(s))}),t._uU(37,"Test Bench"),t.qZA(),t.TgZ(38,"th",28),t.NdJ("sort",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onSort(s))}),t._uU(39,"Project Type"),t.qZA(),t.TgZ(40,"th",28),t.NdJ("sort",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onSort(s))}),t._uU(41,"Project Config"),t.qZA(),t.TgZ(42,"th",29),t.NdJ("sort",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onSort(s))}),t._uU(43,"Project Number"),t.qZA(),t.TgZ(44,"th",30),t.NdJ("sort",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onSort(s))}),t._uU(45,"Owner"),t.qZA(),t.TgZ(46,"th",31),t.NdJ("sort",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onSort(s))}),t._uU(47,"Test Run No."),t.qZA(),t.TgZ(48,"th",32),t.NdJ("sort",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onSort(s))}),t._uU(49,"Project Start Time"),t.qZA(),t.TgZ(50,"th",33),t.NdJ("sort",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onSort(s))}),t._uU(51,"Project End Time"),t.qZA(),t.TgZ(52,"th",34),t.NdJ("sort",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.onSort(s))}),t._uU(53,"Project Run Time"),t.qZA(),t.TgZ(54,"th"),t._uU(55,"Add Maintenance Log"),t.qZA()()(),t.TgZ(56,"tbody",35),t.YNc(57,U,27,19,"tr",36),t.qZA()(),t.TgZ(58,"div",37)(59,"span"),t._uU(60),t.qZA(),t.TgZ(61,"ngb-pagination",38),t.NdJ("pageChange",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.handlePageChange(s))})("pageChange",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.page=s)}),t.qZA()()()()()()()}if(2&f){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.tbSearchFilter),t.xp6(4),t.hij(" ",e.formattedDateTimeRange," "),t.xp6(6),t.Q6J("options",!1),t.xp6(1),t.Q6J("type",e.type)("dataFormat",e.dataFormat)("dataSource",e.dataSource),t.xp6(2),t.Q6J("options",!1),t.xp6(1),t.Q6J("type",e.type)("dataFormat",e.dataFormat)("dataSource",e.dataSourceTestBench),t.xp6(2),t.Q6J("options",!1),t.xp6(1),t.Q6J("type",e.type)("dataFormat",e.dataFormat)("dataSource",e.dataSourceMode),t.xp6(2),t.Q6J("hidHeader",!0)("options",!1),t.xp6(34),t.Q6J("ngForOf",e.selectedProjectsList),t.xp6(3),t.AsE("Page ",(e.page-1)*e.pageSize," - ",e.page*e.pageSize>e.projectsList.length?e.projectsList.length:e.page*e.pageSize," "),t.xp6(1),t.Q6J("pageSize",e.pageSize)("collectionSize",null==e.projectsList?null:e.projectsList.length)("page",e.page)}}const L={asc:"desc",desc:"","":"asc"},A=(f,x)=>f<x?-1:f>x?1:0;let E=(()=>{class f{constructor(){this.appSortable="",this.direction="",this.sort=new t.vpe}rotate(){this.direction=L[this.direction],this.sort.emit({column:this.appSortable,direction:this.direction})}static#t=this.\u0275fac=function(c){return new(c||f)};static#e=this.\u0275dir=t.lG2({type:f,selectors:[["th","appSortable",""]],hostVars:4,hostBindings:function(c,s){1&c&&t.NdJ("click",function(){return s.rotate()}),2&c&&t.ekj("asc","asc"===s.direction)("desc","desc"===s.direction)},inputs:{appSortable:"appSortable",direction:"direction"},outputs:{sort:"sort"},standalone:!0})}return f})(),N=(()=>{class f{constructor(e,c,s,i,u,d){this.headerService=e,this.modalService=c,this.projectService=s,this.spinner=i,this.router=u,this.idleTimerService=d,this.width="375",this.height="300",this.type="pie2d",this.dataFormat="json",this.page=1,this.pageSize=10,this.chart={showPercentInTooltip:"0",showlegend:"1",legendposition:"right",legendWidth:"350",legendHeight:"350",legendItemFontSize:"12",tooltipBorderRadius:"20",plottooltext:"$label, Count: $Value ",showLabels:"0",showValues:"0",bgAlpha:"0",theme:"fusion",pieRadius:90},this.dataSource={chart:this.chart,data:[]},this.dataSourceTestBench={chart:this.chart,data:[]},this.dataSourceMode={chart:this.chart,data:[]},this.showSpinner=!0,i.show(),this.headerService.setHeaderName("Historic List View")}ngOnInit(){this.formatTimeModalDate(),this.getTestData(),this.idleTimerService.setupIdle(),this.idleTimerService.resetIdleTimer()}getTestData(){this.projectService.getListView(this.fromDate,this.toDate).subscribe(e=>{this.projectsList=e.data,this.tempProjectsList=e.data,this.sliceProjects(this.page),this.dataSource.data=this.generateDataSource(this.projectsList,"ProjectType"),this.dataSourceTestBench.data=this.generateDataSource(this.projectsList,"TestBenchNo"),this.dataSourceMode.data=this.generateDataSource(this.projectsList,"ProjectConfig"),this.showSpinner=!1,this.spinner.hide()})}getCurrentDateTime(){return this.formatDate(new Date)}handlePageChange(e){this.sliceProjects(e)}handleSearchChange(){this.filterProjects(this.tbSearchFilter,!1)}handleRowClick(e,c){window.open(`${location.origin}#/project-analysis/${this.selectedProjectsList[e].ProjectId}/${c}`)}handleDataPlotClick(e){this.filterProjects(e.dataObj.categoryLabel??e.dataObj.datasetName)}handleResetFilters(){this.tbSearchFilter="",this.handleSearchChange(),this.formatTimeModalDate(),this.getTestData()}filterProjects(e,c=!0){if(c)if(this.selectedDataPlot){if(this.selectedDataPlot==e)return this.projectsList=this.tempProjectsList,this.sliceProjects(this.page),void(this.selectedDataPlot=void 0)}else this.selectedDataPlot=e;const s=this.tempProjectsList.filter(i=>{if(Object.entries(i).some(T=>{let M=T[1].toString();return e.startsWith("Test Bench")&&"TestBenchNo"==T[0]&&(M="Test Bench "+M),c?M==e:M.toLowerCase().includes(e.toLowerCase())}))return i});this.projectsList=s,this.sliceProjects(this.page)}openDateTimeModal(){const s={startDate:this.jsStartDate,endDate:this.jsEndDate},i=this.modalService.open(b.Z);i.componentInstance.inputData=s,i.result.then(u=>{const T=new Intl.DateTimeFormat("en-GB",{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),M=new Date(u.dateData.startDate.year,u.dateData.startDate.month-1,u.dateData.startDate.day,u.dateData.startTime.hour,u.dateData.startTime.minute,0),O=T.format(M),w=new Date(u.dateData.endDate.year,u.dateData.endDate.month-1,u.dateData.endDate.day,u.dateData.endTime.hour,u.dateData.endTime.minute,0),R=T.format(w);this.formattedDateTimeRange=O+" - "+R,this.jsStartDate=M,this.jsEndDate=w,this.fromDate=this.formatDate(this.jsStartDate),this.toDate=this.formatDate(this.jsEndDate),this.getTestData()},u=>{console.log(`Modal dismissed with: ${u}`)})}exportToCSV(){const e=[];this.selectedProjectsList.map(d=>{e.push([d.ProjectId,d.ProjectName,d.TestBenchNo,d.ProjectType,d.ProjectConfig,d.ProjectNo,d.ProjectOwner,d.TestNo,d.StartDateTime,d.EndDateTime,d.differnce])}),e.unshift(["Project ID","Project Name","Test Bench","Project Type","Project Config","Project Number","Owner","Test Run No.","Project Start Time","Project End Time","Project Run Time"]);const s=C.P6.aoa_to_sheet(e),i=C.P6.decode_range(s["!ref"]);for(let d=i.s.r;d<=i.e.r;++d)for(let T=i.s.c;T<=i.e.c;++T){const M=C.P6.encode_cell({r:d,c:T});s[M]&&(s[M].s||(s[M].s={}),s[M].s.alignment={horizontal:"center",vertical:"center"})}const u=C.P6.book_new();C.P6.book_append_sheet(u,s,"Sheet1"),C.NC(u,"historic_list.xlsx")}openMaintenanceModal(e,c,s){e.stopPropagation();const i={projectId:c,testId:s,mode:"add"},u=this.modalService.open(D.l,{size:"lg"});u.componentInstance.inputData=i,u.result.then(d=>{},d=>{console.log(`Modal dismissed with: ${JSON.stringify(d)}`)})}onSort({column:e,direction:c},s=""){if(this.headers)for(const i of this.headers)i.appSortable!==e&&(i.direction="");""===c||""===e?(this.projectsList=this.tempProjectsList,this.sliceProjects(this.page)):(this.projectsList="number"==s?[...this.tempProjectsList].sort((i,u)=>{const d=A(+i[e],+u[e]);return"asc"===c?d:-d}):"date"==s?[...this.tempProjectsList].sort((i,u)=>{const d=A(+new Date(i[e]),+new Date(u[e]));return"asc"===c?d:-d}):[...this.tempProjectsList].sort((i,u)=>{const d=A(i[e],u[e]);return"asc"===c?d:-d}),this.sliceProjects(this.page))}formatTimeModalDate(){const e=new Date;e.setDate(e.getDate()-30),this.fromDate=this.formatDate(e),this.toDate=this.getCurrentDateTime();const s=new Intl.DateTimeFormat("en-GB",{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),i=new Date;this.jsEndDate=i;const u=s.format(i),d=e;this.jsStartDate=d;const T=s.format(d);this.formattedDateTimeRange=T+" - "+u}sliceProjects(e){this.selectedProjectsList=this.projectsList.slice((e-1)*this.pageSize,e*this.pageSize)}generateDataSource(e,c){const s=new Map;e.forEach(u=>{const d=u[c];s.has(d)?s.set(d,s.get(d)+1):s.set(d,1)});const i=[];return s.forEach((u,d)=>{i.push({label:"TestBenchNo"==c?`Test Bench ${d}`:d,value:u})}),i}formatDate(e){return`${e.getFullYear()}-${this.padZero(e.getMonth()+1)}-${this.padZero(e.getDate())}T${this.padZero(e.getHours())}:${this.padZero(e.getMinutes())}`}padZero(e){return e<10?`0${e}`:`${e}`}static#t=this.\u0275fac=function(c){return new(c||f)(t.Y36(r.r),t.Y36(l.FF),t.Y36(o.Y),t.Y36(h.t2),t.Y36(p.F0),t.Y36(m.p))};static#e=this.\u0275cmp=t.Xpm({type:f,selectors:[["app-project-list-view"]],viewQuery:function(c,s){if(1&c&&t.Gf(E,5),2&c){let i;t.iGM(i=t.CRH())&&(s.headers=i)}},standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[["type","ball-scale-multiple"],["class","historic-list",4,"ngIf"],[1,"historic-list"],[1,"filter","row","col-md-12"],[1,"searchbar","col-md-4"],[1,"feather","icon","icon-search"],["type","text","name","","id","","placeholder","Search Project Name, Num, Owner, Type...",3,"ngModel","ngModelChange","keyup"],[1,"col-md-8","d-flex","justify-content-end","dateRangePicker"],[1,"custom-datetime-range-span",3,"click"],[1,"fas","fa-calendar"],[1,"btn","btn-primary","btn-reset",3,"click"],[1,"fas","fa-history"],[1,"project-view"],[1,"row"],[1,"col-md-4"],["cardTitle","Type Distribution",3,"options"],["width","100%","height","250",3,"type","dataFormat","dataSource","dataplotClick"],["cardTitle","Test Bench Utilization",3,"options"],["cardTitle","Mode Distribution",3,"options"],[3,"hidHeader","options"],[1,"export","d-flex","justify-content-end"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-file-csv","fw-bolder"],[1,"table-responsive"],[1,"table","table-styling","text-center"],["appSortable","ProjectId","scope","col",3,"sort"],["appSortable","ProjectName","scope","col",3,"sort"],["appSortable","TestBenchNo","scope","col",3,"sort"],["appSortable","ProjectType","scope","col",3,"sort"],["appSortable","ProjectNo","scope","col",3,"sort"],["appSortable","ProjectOwner","scope","col",3,"sort"],["appSortable","TestNo","scope","col",3,"sort"],["appSortable","StartDateTime","scope","col",3,"sort"],["appSortable","EndDateTime","scope","col",3,"sort"],["appSortable","differnce","scope","col",3,"sort"],[2,"font-size","12px"],[3,"click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","align-items-center","gap-3"],[1,"m-0",3,"pageSize","collectionSize","page","pageChange"],[3,"click"],[1,"icon","feather","icon-edit","text-success","fs-6"]],template:function(c,s){1&c&&(t._UZ(0,"ngx-spinner",0),t.YNc(1,y,62,22,"div",1)),2&c&&(t.xp6(1),t.Q6J("ngIf",!s.showSpinner))},dependencies:[a.ez,a.sg,a.O5,a.uU,j.m,g.Fj,g.JJ,g.On,S.A,l.N9,h.Ro,n.Qf,n.PZ,P.Cq,E],styles:['.historic-list .searchbar{background-color:#ddd;padding:2px 8px;display:flex;align-items:center;border-radius:20px;max-height:26px}  .historic-list .searchbar .feather{font-size:15px}  .historic-list .searchbar input{flex:1;background-color:transparent;border:0;outline:0}  .historic-list .custom-datetime-range-span{padding:2px 8px;border:solid 1px rgb(206,212,218);border-radius:20px}  .historic-list .custom-datetime-range-span i{margin-right:15px}  .historic-list .card-body{padding:15px 10px!important}  .historic-list .card-header{padding:15px!important}  .historic-list .filter{margin:10px 0}  .dateRangePicker{padding:0}  .dateRangePicker .btn-reset{padding:2px 8px;margin-left:5px}  table tbody tr{cursor:pointer}  table tbody tr:hover{background-color:#d3d3d3}  table thead th[appSortable]{cursor:pointer;-webkit-user-select:none;user-select:none}  table thead th[appSortable]:after{font-family:"Font Awesome 5 Free";margin-left:5px}  table thead th[appSortable].asc:after{content:"\\f062"}  table thead th[appSortable].desc:after{content:"\\f063"}@media only screen and (max-width: 768px){  .dateRangePicker{padding:0}}@media only screen and (max-width: 768px) and (max-width: 768px){  .dateRangePicker{margin:10px 0}}@media only screen and (max-width: 768px){  .btn-primary{margin:0 15px}}']})}return f})()},589:(Z,v,_)=>{_.d(v,{Y:()=>b});var a=_(5449),t=_(6814),n=_(9468),j=_(9862),P=_(7635);let b=(()=>{class D{constructor(r,l){this.http=r,this.authService=l}getLastRunData(){return this.http.get(`${a.N.apiUrl}/getLastRunData`)}getListView(r,l){return this.http.post(`${a.N.apiUrl}/getListView`,{fromDate:r,toDate:l})}getProjectDetails(r){return this.http.post(`${a.N.apiUrl}/getProjectDetails`,{id:r})}getCurrentBenchDetails(r){return this.http.post(`${a.N.apiUrl}/getCurrentBenchDetails`,{id:r})}getTableData(r,l,o,h){return this.http.post(`${a.N.apiUrl}/getRunningStats`,{id:r,no:l,start:o,end:h})}getProjectAnalysis(r,l){return this.http.post(`${a.N.apiUrl}/getProjectAnalysis`,{id:r,no:l})}getTestBenchSequence(r,l){return this.http.post(`${a.N.apiUrl}/getTestBenchseq`,{id:r,no:l})}getTimeSeriesById(r,l,o){return this.http.post(`${a.N.apiUrl}/getTimeSeriesbyid`,{projectConfig:r,id:l,no:o})}getTimeSeriesByIdForRunPro(r,l,o,h){return this.http.post(`${a.N.apiUrl}/getTimeSeriesDatabyid`,{id:r,no:l,start:o,end:h})}getProjectRunTime(r,l){return this.http.post(`${a.N.apiUrl}/getProjectTime`,{id:r,no:l})}getUpdatePanelStatus(r,l,o,h,p,m){const g=this.authService.getFullNameFromToken();return this.http.post(`${a.N.apiUrl}/UpdatePanelStatus`,{group:r,status:l,date:o,message:h,uid:g.uid,projectid:p,no:m})}getAnalysisData(r,l,o,h){return this.http.post(`${a.N.apiUrl}/getAnalysisData`,{id:r,start:l,end:o,data:h})}createMaintenance(r,l,o,h,p){const m=this.authService.getFullNameFromToken(),g=(0,t.p6)(new Date,"YYYY-MM-dd HH:mm:ss","en_US"),S=(0,t.p6)(new Date,"YYYY-MM-dd HH:mm:ss","en_US"),U=(0,t.p6)(new Date(p),"YYYY-MM-dd HH:mm:ss","en_US");return this.http.post(`${a.N.apiUrl}/CreateMaintenance`,{data:{projectid:r,testno:l,reason:o,desc:h,createuid:m.uid,updateid:m.uid,createdate:g,updatedate:S,issuecreateddate:U}})}selectUpdateMaintenance(r,l,o,h){const p=this.authService.getFullNameFromToken(),m=(0,t.p6)(new Date(h),"YYYY-MM-dd HH:mm:ss","en_US"),g=(0,t.p6)(new Date,"YYYY-MM-dd HH:mm:ss","en_US");return this.http.post(`${a.N.apiUrl}/UpdateMaintenance`,{mid:r,data:[`reason='${l}'`,`description='${o}'`,`updatedbyid=${p.uid}`,`updateddate='${g}'`,`issuecreateddate='${m}'`]})}deleteMaintenance(r){return this.http.post(`${a.N.apiUrl}/deleteMaintenance`,{mid:r})}createNote(r,l,o,h,p){const g={uid:this.authService.getFullNameFromToken().uid,projectid:r,testno:l,remarks:o,updateddate:p,createddate:h};return this.http.post(`${a.N.apiUrl}/CreateNote`,{data:g})}createFav(r,l,o,h){const m={uid:this.authService.getFullNameFromToken().uid,projectid:r,testno:l,favremark:o,updatedate:h,status:!0};return this.http.post(`${a.N.apiUrl}/CreateFav`,{data:m})}updateUserNote(r,l){const o=(0,t.p6)(new Date,"YYYY-MM-dd HH:mm:ss","en_US");return this.http.post(`${a.N.apiUrl}/UpdateNote`,{id:r,data:[`remarks='${l}'`,`updateddate='${o}'`]})}deleteUserNote(r){return this.http.post(`${a.N.apiUrl}/deleteNote`,{id:r})}deleteFav(r){return this.http.post(`${a.N.apiUrl}/deleteFav`,{fid:r})}getAttach(r,l,o,h,p,m){return this.http.post(`${a.N.apiUrl}/getSeriesReport`,{projectId:r,headers:l,value:o,match:h,fromDate:p,toDate:m},{responseType:"blob"})}getAmbientData(r,l,o){return this.http.post(`${a.N.apiUrl}/getAmbiantData`,{data:o,start:r,end:l})}getAmbientReport(r,l,o){return this.http.post(`${a.N.apiUrl}/getAmbiantReport`,{data:o,start:r,end:l},{responseType:"blob"})}getGroupCReport(r,l){return this.http.post(`${a.N.apiUrl}/getGroupCReport`,{start:r,end:l},{responseType:"blob"})}getAlarmReport(r,l){return this.http.post(`${a.N.apiUrl}/getAlarmReport`,{start:r,end:l},{responseType:"blob"})}getTankReport(r,l,o){return this.http.post(`${a.N.apiUrl}/getTankReport`,{data:o,start:r,end:l},{responseType:"blob"})}getAlarmData(r,l){return this.http.post(`${a.N.apiUrl}/getAlarmData`,{start:r,end:l})}getGroupCData(r,l){return this.http.post(`${a.N.apiUrl}/getAllGroupC`,{start:r,end:l})}static#t=this.\u0275fac=function(l){return new(l||D)(n.LFG(j.eN),n.LFG(P.u))};static#e=this.\u0275prov=n.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})()},7844:(Z,v,_)=>{_.d(v,{l:()=>C});var a=_(6814),t=_(7818),n=_(9468),j=_(5399),P=_(589),b=_(7911),D=_(6223);let C=(()=>{class r{constructor(o,h,p){this.activeModal=o,this.projectService=h,this.toastService=p,this.reason=""}ngOnInit(){console.log(this.inputData),this.inputData.reason&&(this.reason=this.inputData.reason),this.inputData.description&&(this.remark=this.inputData.description),this.currrentDate=this.formateDate(),console.log(this.currrentDate)}createMaintenance(){this.projectService.createMaintenance(this.inputData.projectId,this.inputData.testId,this.reason,this.remark,this.currrentDate).subscribe({next:o=>{console.log(o),this.toastService.show({template:"Inserted Succesfully!!",classname:"bg-success",delay:3e3})},error:()=>{this.toastService.show({template:"Something went wrong",classname:"bg-danger",delay:3e3})}})}updateMaintenance(){console.log(this.reason,this.remark),this.projectService.selectUpdateMaintenance(this.inputData.mid,this.reason,this.remark,this.currrentDate).subscribe({next:o=>{console.log(o),this.toastService.show({template:"Updated Succesfully!!",classname:"bg-success",delay:3e3})},error:()=>{this.toastService.show({template:"Something went wrong!!",classname:"bg-danger",delay:3e3})}})}selectDataAndClose(){this.reason?this.remark?("add"==this.inputData.mode?this.createMaintenance():this.updateMaintenance(),this.activeModal.close({isSearch:!1,isSuccess:!0})):this.toastService.show({template:"Please enter the description",classname:"bg-danger",delay:3e3}):this.toastService.show({template:"Please select the reason",classname:"bg-danger",delay:3e3})}closeModal(){this.activeModal.dismiss({isSearch:!1})}formateDate(){let o=new Date;this.inputData.issuecreateddate&&(o=new Date(this.inputData.issuecreateddate));const h=o.getMonth()+1,p=o.getDate(),m=o.getHours(),g=o.getMinutes();return`${o.getFullYear()}-${this.padding10(h)}-${this.padding10(p)}T${this.padding10(m)}:${this.padding10(g)}`}padding10(o){return o>=10?o:`0${o}`}static#t=this.\u0275fac=function(h){return new(h||r)(n.Y36(j.Kz),n.Y36(P.Y),n.Y36(b.k))};static#e=this.\u0275cmp=n.Xpm({type:r,selectors:[["app-project-maintenance-log-modal"]],inputs:{inputData:"inputData"},standalone:!0,features:[n.jDz],decls:48,vars:6,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"form-group"],["for",""],["type","text","disabled","",1,"form-control",3,"value"],["type","datetime-local","name","date","id","",1,"form-control",3,"ngModel","ngModelChange"],["name","reason",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled","","selected",""],["value","Calibration"],["value","Mechanical"],["value","Electrical"],["value","Others"],["name","remark",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","justify-content-end"],[1,"col-xl-2","col-md-2"],["type","button","ngbAutofocus","",1,"btn","btn-block","d-flex","align-items-center","gap-2","btn-primary","mb-4","custom-btn",3,"click"],[1,"fas","fa-check"],["type","button",1,"btn","btn-block","btn-primary","mb-4","custom-btn",3,"click"],[1,"fas","fa-times"]],template:function(h,p){1&h&&(n.TgZ(0,"div",0)(1,"h6",1),n._uU(2,"Add Maintenance log"),n.qZA(),n.TgZ(3,"button",2),n.NdJ("click",function(){return p.closeModal()}),n.TgZ(4,"span",3),n._uU(5,"\xd7"),n.qZA()()(),n.TgZ(6,"div",4)(7,"div",5)(8,"form")(9,"div",6)(10,"label",7),n._uU(11,"Project ID:"),n.qZA(),n._UZ(12,"input",8),n.qZA(),n.TgZ(13,"div",6)(14,"label",7),n._uU(15,"Test No:"),n.qZA(),n._UZ(16,"input",8),n.qZA(),n.TgZ(17,"div",6)(18,"label",7),n._uU(19,"Issue Created Date"),n.qZA(),n.TgZ(20,"input",9),n.NdJ("ngModelChange",function(g){return p.currrentDate=g}),n.qZA()(),n.TgZ(21,"div",6)(22,"label"),n._uU(23,"Select Reason"),n.qZA(),n.TgZ(24,"select",10),n.NdJ("ngModelChange",function(g){return p.reason=g}),n.TgZ(25,"option",11),n._uU(26,"Select Reason"),n.qZA(),n.TgZ(27,"option",12),n._uU(28,"Calibration"),n.qZA(),n.TgZ(29,"option",13),n._uU(30,"Mechanical"),n.qZA(),n.TgZ(31,"option",14),n._uU(32,"Electrical"),n.qZA(),n.TgZ(33,"option",15),n._uU(34,"Others"),n.qZA()()(),n.TgZ(35,"div",6)(36,"label",7),n._uU(37,"Description:"),n.qZA(),n.TgZ(38,"textarea",16),n.NdJ("ngModelChange",function(g){return p.remark=g}),n.qZA()()()(),n.TgZ(39,"div",17)(40,"div",18)(41,"button",19),n.NdJ("click",function(){return p.selectDataAndClose()}),n._UZ(42,"i",20),n._uU(43),n.qZA()(),n.TgZ(44,"div",18)(45,"button",21),n.NdJ("click",function(){return p.closeModal()}),n._UZ(46,"i",22),n._uU(47," Cancel "),n.qZA()()()()),2&h&&(n.xp6(12),n.Q6J("value",p.inputData.projectId),n.xp6(4),n.Q6J("value",p.inputData.testId),n.xp6(4),n.Q6J("ngModel",p.currrentDate),n.xp6(4),n.Q6J("ngModel",p.reason),n.xp6(14),n.Q6J("ngModel",p.remark),n.xp6(5),n.hij(" ","add"===p.inputData.mode?"Add":"Update"," "))},dependencies:[a.ez,t.m,D._Y,D.YN,D.Kr,D.Fj,D.EJ,D.JJ,D.JL,D.On,D.F],styles:[".modal-header[_ngcontent-%COMP%]{padding:10px;justify-content:space-between}"]})}return r})()}}]);